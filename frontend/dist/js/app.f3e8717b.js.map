{"version":3,"file":"js/app.f3e8717b.js","mappings":"sFACOA,GAAG,O,mGAARC,EAAAA,EAAAA,IAGM,MAHNC,EAGM,CAFcC,EAAAC,aAAU,WAA5BC,EAAAA,EAAAA,IAAgCC,EAAA,CAFpCC,IAAA,MAAAC,EAAAA,EAAAA,IAAA,QAGIC,EAAAA,EAAAA,IAAeC,I,kCCFZC,MAAM,c,GADbJ,IAAA,EAKSI,MAAM,a,GACHA,MAAM,gB,GANlBJ,IAAA,EAS+CI,MAAM,Y,wEARnDV,EAAAA,EAAAA,IAgBM,MAhBNC,EAgBM,cAfJU,EAAAA,EAAAA,IAEM,OAFDD,MAAM,gBAAc,EACvBC,EAAAA,EAAAA,IAAiB,UAAb,cAAQ,IAEeT,EAAAU,KAAKC,MAAMC,aAAU,WAAlDd,EAAAA,EAAAA,IAWM,MAXNe,EAWM,EAVJJ,EAAAA,EAAAA,IAMO,OANPK,EAMO,cAZbC,EAAAA,EAAAA,IAMiC,WAEzBN,EAAAA,EAAAA,IAA+B,eAAAO,EAAAA,EAAAA,IAApBhB,EAAAiB,UAAQ,GACPjB,EAAAU,KAAKC,MAAMO,KAAKC,YAAS,WAArCrB,EAAAA,EAAAA,IAEO,OAFPsB,GAEOJ,EAAAA,EAAAA,IADFhB,EAAAU,KAAKC,MAAMO,KAAKC,WAAS,KAVtCd,EAAAA,EAAAA,IAAA,UAaMC,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,OAAOd,MAAM,gBAAiBe,QAAOvB,EAAAwB,c,CAb3DC,SAAAC,EAAAA,EAAAA,KAayE,IAEnEC,EAAA,KAAAA,EAAA,KAfNZ,EAAAA,EAAAA,IAayE,cAbzEa,EAAA,G,mBAAAvB,EAAAA,EAAAA,IAAA,Q,kCCKA,MAAMwB,EAAe,GAErB,OACEC,QAASD,EAGTE,UAAW,CACTC,MAAO,aACPC,MAAO,aACPC,MAAO,aACPC,WAAY,mBACZC,aAAc,qBACdC,mBAAoB,qBACpBC,kBAAmB,4BACnBC,mBAAoB,0BACpBC,mBAAoB,kCAItBC,MAAAA,CAAOC,GACL,MAAO,GAAGC,KAAKb,UAAUY,GAC3B,G,SCzBKlC,MAAM,4B,GAIJA,MAAM,W,GAEJA,MAAM,c,GAQFA,MAAM,a,sEAdnBV,EAAAA,EAAAA,IAqBM,MArBNC,EAqBM,cApBJU,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAAiB,UAAb,cAAQ,KAEdA,EAAAA,EAAAA,IAaM,MAbNI,EAaM,cAZJJ,EAAAA,EAAAA,IAAgB,UAAZ,WAAO,KACXA,EAAAA,EAAAA,IAUM,MAVNK,EAUM,gBATJhB,EAAAA,EAAAA,IAQU8C,EAAAA,GAAA,MAhBlBC,EAAAA,EAAAA,IASyBC,EAAAZ,OAARa,K,WADT7C,EAAAA,EAAAA,IAQU8C,EAAA,CANP5C,IAAK2C,EAAKlD,GACXW,MAAM,YACNyC,OAAO,QACN1B,QAAK2B,GAAEC,EAAAC,WAAWL,I,CAb7BtB,SAAAC,EAAAA,EAAAA,KAeU,IAA4C,EAA5CjB,EAAAA,EAAAA,IAA4C,MAA5CW,GAA4CJ,EAAAA,EAAAA,IAAlB+B,EAAKM,MAAI,MAf7CzB,EAAA,G,4CAmBInB,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAA2B,SAAxB,qBAAoB,K,CAU7B,OACE4C,KAAM,gBACNC,IAAAA,GACE,MAAO,CACLpB,MAAO,GACPqB,SAAS,EAEb,EACAC,OAAAA,GACEb,KAAKc,YACP,EACAC,QAAS,CACP,gBAAMD,GACJd,KAAKY,SAAU,EACf,IACEI,QAAQC,IAAI,eACZ,MAAMC,QAAiBC,EAAAA,EAAMC,IAAIC,EAAIvB,OAAOuB,EAAIjC,UAAUG,QAC1DyB,QAAQC,IAAI,YAAaC,EAASP,MAClCX,KAAKT,MAAQ2B,EAASP,IACxB,CAAE,MAAOW,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,WAClB,CAAE,QACAtB,KAAKY,SAAU,CACjB,CACF,EACAH,UAAAA,CAAWL,GACTJ,KAAKwB,QAAQC,KAAK,CAAEf,KAAM,YAAagB,OAAQ,CAAExE,GAAIkD,EAAKlD,KAC5D,I,UCnDJ,MAAMyE,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCRO9D,MAAM,wB,GACJA,MAAM,U,GAFfJ,IAAA,G,GAaSI,MAAM,W,GACJA,MAAM,a,GA0BJA,MAAM,Y,GAxCnBJ,IAAA,EA2FeI,MAAM,kB,GA4CRA,MAAM,gB,GAgBRA,MAAM,mB,GAONA,MAAM,iB,seA7JfV,EAAAA,EAAAA,IAoKM,MApKNC,EAoKM,EAnKJU,EAAAA,EAAAA,IASM,MATNI,EASM,CAR2Cb,EAAAuE,UAAO,WAAtDzE,EAAAA,EAAAA,IAEM,OALZM,IAAA,EAGWI,MAAM,cAAee,QAAKI,EAAA,KAAAA,EAAA,OAAA6C,IAAExE,EAAAyE,QAAAzE,EAAAyE,UAAAD,K,EAC/BlE,EAAAA,EAAAA,IAAiCoE,EAAA,MAJzCjD,SAAAC,EAAAA,EAAAA,KAIiB,IAAc,EAAdpB,EAAAA,EAAAA,IAAcqE,MAJ/B/C,EAAA,I,aAAAb,EAAAA,EAAAA,IAIyC,cACnC,WACAjB,EAAAA,EAAAA,IAAkB,MANxBgB,IAAA,eAOML,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAEM,OAFDD,MAAM,eAAgBe,QAAKI,EAAA,KAAAA,EAAA,OAAA6C,IAAExE,EAAA4E,aAAA5E,EAAA4E,eAAAJ,K,gBARxCzD,EAAAA,EAAAA,IAQqD,YACxCT,EAAAA,EAAAA,IAA+BoE,EAAA,MAT5CjD,SAAAC,EAAAA,EAAAA,KASsB,IAAY,EAAZpB,EAAAA,EAAAA,IAAYuE,MATlCjD,EAAA,SAaInB,EAAAA,EAAAA,IA+HM,MA/HNW,EA+HM,EA9HJX,EAAAA,EAAAA,IAEM,MAFNqE,EAEM,EADJrE,EAAAA,EAAAA,IAAuB,WAAAO,EAAAA,EAAAA,IAAhBhB,EAAA+E,UAAQ,MAGjBzE,EAAAA,EAAAA,IAyHU0E,EAAA,CAxHRC,IAAI,YACHC,MAAOlF,EAAAmF,KACPC,MAAOpF,EAAAoF,MACR,iBAAe,MACf5E,MAAM,c,CAvBdiB,SAAAC,EAAAA,EAAAA,KAyBQ,IASe,EATfpB,EAAAA,EAAAA,IASe+E,EAAA,CATDC,MAAM,OAAOC,KAAK,e,CAzBxC9D,SAAAC,EAAAA,EAAAA,KA0BU,IAOY,EAPZpB,EAAAA,EAAAA,IAOYkF,EAAA,CAjCtBC,WA0B8BzF,EAAAmF,KAAKO,YA1BnC,sBAAA/D,EAAA,KAAAA,EAAA,GAAAuB,GA0B8BlD,EAAAmF,KAAKO,YAAWxC,GAAEyC,YAAY,UAAUC,MAAA,gB,CA1BtEnE,SAAAC,EAAAA,EAAAA,KA4Bc,IAA0B,gBAD5B5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MAhCdC,EAAAA,EAAAA,IA4B6B7C,EAAAmC,YAARb,K,WADTpB,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAKkB,EAAKzB,GACVyF,MAAOhE,EAAK+B,KACZyC,MAAOxE,EAAKzB,I,sCA/B3B+B,EAAA,G,qBAAAA,EAAA,KAoCQtB,EAAAA,EAAAA,IAEe+E,EAAA,CAFDC,MAAM,OAAOC,KAAK,Y,CApCxC9D,SAAAC,EAAAA,EAAAA,KAqCU,IAA4D,EAA5DpB,EAAAA,EAAAA,IAA4DyF,EAAA,CArCtEN,WAqC6BzF,EAAAmF,KAAKa,SArClC,sBAAArE,EAAA,KAAAA,EAAA,GAAAuB,GAqC6BlD,EAAAmF,KAAKa,SAAQ9C,GAAEyC,YAAY,a,0BArCxD/D,EAAA,KAwCQnB,EAAAA,EAAAA,IA+BM,MA/BNwF,EA+BM,EA9BJ3F,EAAAA,EAAAA,IAYe+E,EAAA,CAZDC,MAAM,OAAO9E,MAAM,a,CAzC3CiB,SAAAC,EAAAA,EAAAA,KA0CY,IAUE,EAVFpB,EAAAA,EAAAA,IAUE4F,EAAA,CApDdT,WA2CuBzF,EAAAmF,KAAKgB,eA3C5B,sBAAAxE,EAAA,KAAAA,EAAA,GAAAuB,GA2CuBlD,EAAAmF,KAAKgB,eAAcjD,GAC5B5B,KAAK,OACLqE,YAAY,OACZS,OAAO,aACP,eAAa,aACbR,MAAA,eACCS,UAAU,EACX,eAAa,oBACZC,YAAY,G,0BAnD3B1E,EAAA,KAuDUtB,EAAAA,EAAAA,IAee+E,EAAA,CAfDC,MAAM,OAAO9E,MAAM,a,CAvD3CiB,SAAAC,EAAAA,EAAAA,KAwDY,IAaiB,EAbjBpB,EAAAA,EAAAA,IAaiBiG,EAAA,CArE7Bd,WAyDuBzF,EAAAmF,KAAKqB,eAzD5B,sBAAA7E,EAAA,KAAAA,EAAA,GAAAuB,GAyDuBlD,EAAAmF,KAAKqB,eAActD,GAC5BkD,OAAO,QACPT,YAAY,OACZ,eAAa,QACbC,MAAA,eACCS,UAAU,EACX,eAAa,oBACZC,YAAY,G,CAEFG,QAAM/E,EAAAA,EAAAA,KACf,IAA4B,EAA5BpB,EAAAA,EAAAA,IAA4BoE,EAAA,MAnE5CjD,SAAAC,EAAAA,EAAAA,KAmEyB,IAAS,EAATpB,EAAAA,EAAAA,IAASoG,MAnElC9E,EAAA,OAAAA,EAAA,G,qBAAAA,EAAA,OAyEQtB,EAAAA,EAAAA,IAce+E,EAAA,CAdDC,MAAM,UAAUC,KAAK,Y,CAzE3C9D,SAAAC,EAAAA,EAAAA,KA0EU,IAYE,EAZFpB,EAAAA,EAAAA,IAYEqG,EAAA,CAtFZlB,WA2EqBzF,EAAAmF,KAAKyB,SA3E1B,sBAAAjF,EAAA,KAAAA,EAAA,GAAAuB,GA2EqBlD,EAAAmF,KAAKyB,SAAQ1D,GACrB2D,IAAK,EACLC,UAAW,EACXC,KAAM,KACPnB,MAAA,eACCoB,QAAKrF,EAAA,KAAAA,EAAA,GAAAuB,GAAElD,EAAAiH,cAAc/D,IACrB,cAAa,C,iDAIbgE,UAAU,G,0BArFvBtF,EAAA,KAyFQtB,EAAAA,EAAAA,IAyBe+E,EAAA,CAzBDC,MAAM,YAAYC,KAAK,gB,CAzF7C9D,SAAAC,EAAAA,EAAAA,KA0FU,IAAgD,gBAAhDjB,EAAAA,EAAAA,IAAgD,OAA3CD,MAAM,aAAY,uBAAmB,IACRR,EAAAmH,uBAAoB,WAAtDrH,EAAAA,EAAAA,IAOM,MAPNsH,EAOM,EANJ9G,EAAAA,EAAAA,IAKE+G,EAAA,CAJAC,MAAM,yBACNhG,KAAK,UACJiG,UAAU,EACX,qBAhGdlH,EAAAA,EAAAA,IAAA,QAmGUC,EAAAA,EAAAA,IAcYkH,EAAA,CAbVhH,MAAM,uBACNiH,OAAO,IACN,eAAa,EACb,YAAWzH,EAAA0H,wBACX,YAAW1H,EAAA2H,wBACX,YAAW3H,EAAA4H,eACXC,MAAO,EACRC,SAAA,GACA,YAAU,eACT,gBAAe9H,EAAA+H,mBAChBC,OAAO,iG,CA9GnBvG,SAAAC,EAAAA,EAAAA,KAgHY,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MAhHvCjD,SAAAC,EAAAA,EAAAA,KAgHqB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MAhH7BrG,EAAA,OAAAA,EAAA,G,4DAAAA,EAAA,KAoHQtB,EAAAA,EAAAA,IAiBe+E,EAAA,CAjBDC,MAAM,YAAYC,KAAK,e,CApH7C9D,SAAAC,EAAAA,EAAAA,KAqHU,IAAgD,gBAAhDjB,EAAAA,EAAAA,IAAgD,OAA3CD,MAAM,aAAY,uBAAmB,KAC1CF,EAAAA,EAAAA,IAcYkH,EAAA,CAbVhH,MAAM,uBACNiH,OAAO,IACN,eAAa,EACb,YAAWzH,EAAAkI,uBACX,YAAWlI,EAAAmI,uBACX,YAAWnI,EAAAoI,cACXP,MAAO,EACRC,SAAA,GACA,YAAU,eACT,gBAAe9H,EAAA+H,mBAChBC,OAAO,iG,CAjInBvG,SAAAC,EAAAA,EAAAA,KAmIY,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MAnIvCjD,SAAAC,EAAAA,EAAAA,KAmIqB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MAnI7BrG,EAAA,OAAAA,EAAA,G,4DAAAA,EAAA,KAuIQnB,EAAAA,EAAAA,IAGM,MAHN4H,EAGM,EAFJ/H,EAAAA,EAAAA,IAAkGe,EAAA,CAAvFC,KAAK,UAAUd,MAAM,aAAce,QAAOvB,EAAAsI,WAAa/E,QAASvD,EAAAuD,S,CAxIrF9B,SAAAC,EAAAA,EAAAA,KAwI8F,IAAEC,EAAA,MAAAA,EAAA,MAxIhGZ,EAAAA,EAAAA,IAwI8F,UAxI9Fa,EAAA,G,0BAyIUtB,EAAAA,EAAAA,IAA8De,EAAA,CAAnDb,MAAM,YAAae,QAAOvB,EAAAuI,W,CAzI/C9G,SAAAC,EAAAA,EAAAA,KAyI0D,IAAEC,EAAA,MAAAA,EAAA,MAzI5DZ,EAAAA,EAAAA,IAyI0D,UAzI1Da,EAAA,G,oBAAAA,EAAA,G,wBA+IItB,EAAAA,EAAAA,IAiBYkI,EAAA,CAhKhB/C,WAgJezF,EAAAyI,mBAhJf,sBAAA9G,EAAA,KAAAA,EAAA,GAAAuB,GAgJelD,EAAAyI,mBAAkBvF,GAC3BoE,MAAM,SACNoB,MAAM,MACL,wBAAsB,EACtB,yBAAuB,EACvB,cAAY,G,CArJnBjH,SAAAC,EAAAA,EAAAA,KAuJM,IAQM,EARNjB,EAAAA,EAAAA,IAQM,MARNkI,EAQM,gBAPJlI,EAAAA,EAAAA,IAAuB,SAApB,oBAAgB,KACnBH,EAAAA,EAAAA,IAIesI,EAAA,CAHZC,WAAY7I,EAAA8I,iBACZ1C,OAAQpG,EAAA+I,iBACRC,OAA6B,MAArBhJ,EAAA8I,iBAA2B,UAAY,I,0CAElDrI,EAAAA,EAAAA,IAA+C,IAA/CwI,GAA+CjI,EAAAA,EAAAA,IAAnBhB,EAAAkJ,cAAY,QA9JhDtH,EAAA,G,iCAkKInB,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAA2B,SAAxB,qBAAoB,K,kCAe7B,GACE4C,KAAM,YACN8F,WAAY,CACVC,UAAS,MACTC,SAAQ,MACRC,KAAI,MACJC,MAAKA,EAAAA,KAEPC,MAAO,CACL3J,GAAI,CACFyB,KAAM,CAACmI,OAAQC,QACfC,UAAU,IAGdC,KAAAA,CAAMJ,GACJ,MAAMK,GAASC,EAAAA,EAAAA,MACTC,GAAY9E,EAAAA,EAAAA,IAAI,MAChB1B,GAAU0B,EAAAA,EAAAA,KAAI,GACdF,GAAWE,EAAAA,EAAAA,IAAI,IACf9C,GAAa8C,EAAAA,EAAAA,IAAI,IACjB+E,GAAmB/E,EAAAA,EAAAA,IAAI,IACvBgF,GAAkBhF,EAAAA,EAAAA,IAAI,IACtB2C,GAAiB3C,EAAAA,EAAAA,IAAI,IACrBmD,GAAgBnD,EAAAA,EAAAA,IAAI,IACpBwD,GAAqBxD,EAAAA,EAAAA,KAAI,GACzB6D,GAAmB7D,EAAAA,EAAAA,IAAI,GACvBiE,GAAejE,EAAAA,EAAAA,IAAI,WACnBkC,GAAuBlC,EAAAA,EAAAA,KAAI,GAG3BV,GAAU2F,EAAAA,EAAAA,KAAS,IAChBxJ,GAAKC,MAAMC,YAA0C,IAA5BF,GAAKC,MAAMO,KAAKiJ,UAI5ChF,GAAOiF,EAAAA,EAAAA,IAAS,CACpB1E,YAAa,GACbM,SAAU,GACVG,gBAAgB,IAAIkE,MAAOC,cAAcC,MAAM,EAAG,IAClD/D,eAAgB,QAChBI,cAAU4D,EACVC,aAAc,GACdC,YAAa,KAGTtF,EAAQ,CACZM,YAAa,CACX,CAAEiE,UAAU,EAAMgB,QAAS,UAAWC,QAAS,WAEjD5E,SAAU,CACR,CAAE2D,UAAU,EAAMgB,QAAS,YAAaC,QAAS,SAEnDzE,eAAgB,CACd,CAAEwD,UAAU,IAEdnD,eAAgB,CACd,CAAEmD,UAAU,IAEd/C,SAAU,CACR,CAAE+C,UAAU,EAAMgB,QAAS,UAAWC,QAAS,aAInDC,EAAAA,EAAAA,KAAUC,UAER,MAAMC,EAAeC,SAASC,cAAc,QAC5CF,EAAaG,aAAa,OAAQ,YAClCH,EAAaG,aAAa,UAAW,yEACrCF,SAASG,KAAKC,YAAYL,GAG1B,MAAMM,EAAmBL,SAASM,cAAc,yBAC5CD,GAAoBA,IAAqBN,GAC3CM,EAAiBE,eAGbC,UACAC,GAAiB,KAGzBC,EAAAA,EAAAA,KAAgB,KAEd,MAAMX,EAAeC,SAASM,cAAc,yBACxCP,GACFA,EAAaQ,SAIf,MAAMF,EAAmBL,SAASC,cAAc,QAChDI,EAAiBH,aAAa,OAAQ,YACtCG,EAAiBH,aAAa,UAAW,wCACzCF,SAASG,KAAKC,YAAYC,EAAiB,IAG7C,MAAMG,EAAgBV,UACpB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUG,OACrDa,EAAOc,EAASP,KAAKuI,MAAKC,GAAKA,EAAEjM,KAAOkM,SAASvC,EAAM3J,MACzDkD,IACFgC,EAASe,MAAQ/C,EAAKM,KAE1B,CAAE,MAAOY,GACPN,QAAQM,MAAM,4BAA6BA,GAC3CC,EAAAA,GAAUD,MAAM,WAClB,GAGIwH,EAAkBX,UACtB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUI,YAC3DA,EAAW2D,MAAQjC,EAASP,IAC9B,CAAE,MAAOW,GACPN,QAAQM,MAAM,8BAA+BA,GAC7CC,EAAAA,GAAUD,MAAM,WAClB,GAII8D,EAAsBiE,IAE1B,MAAMC,EAAgB,CAAC,aAAc,YAAa,YAAa,YAAa,YAAa,cACnFC,EAAUD,EAAcE,SAASH,EAAK1K,MAE5C,IAAK4K,EAEH,OADAhI,EAAAA,GAAUD,MAAM,cACT,EAIT,MAAMmI,EAAU,SAChB,OAAIJ,EAAKK,KAAOD,GACdlI,EAAAA,GAAUD,MAAM,kBACT,GAIF,IAAIqI,SAASC,IAElB9D,EAAmB3C,OAAQ,EAC3BoD,EAAapD,MAAQ,YACrBgD,EAAiBhD,MAAQ,EAEzBnC,QAAQC,IAAI,UAAWoI,EAAK3I,KAAM,MAAO2I,EAAK1K,KAAM,OAAQ0K,EAAKK,KAAO,MAAMG,QAAQ,GAAI,MAG1F,IAAIC,IAAJ,CAAeT,EAAM,CACnBU,QAAS,GACTC,SAAU,KACVC,UAAW,KACXC,SAAU,aACVC,YAAa,EAEbC,UAAAA,GACEjE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,WACd,EAEAoJ,IAAAA,GACElE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,SACd,EACAqJ,OAAAA,CAAQC,GAEN,MAAMC,EAAWnB,EAAK3I,KAAK+J,QAAQ,YAAa,IAAM,OAGhDC,EAAgB,IAAIC,KAAK,CAACJ,GAASC,EAAU,CACjD7L,KAAM,aACNiM,cAAc,IAAIlD,MAAOmD,YAI3B7J,QAAQC,IAAI,WACZD,QAAQC,IAAI,WAAYoI,EAAKK,KAAO,MAAMG,QAAQ,GAAI,MACtD7I,QAAQC,IAAI,YAAayJ,EAAchB,KAAO,MAAMG,QAAQ,GAAI,MAChE7I,QAAQC,IAAI,SAAU6J,KAAKC,MAA6C,KAAtC,EAAIL,EAAchB,KAAOL,EAAKK,OAAc,KAC9E1I,QAAQC,IAAI,aAAcyJ,EAAc/L,MACxCqC,QAAQC,IAAI,YAAayJ,EAAchK,MAGvC6F,EAAapD,MAAQ,SACrBgD,EAAiBhD,MAAQ,IAGzB6H,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,KAGHyG,EAAQc,EACV,EACApJ,KAAAA,CAAM2J,GACJjK,QAAQM,MAAM,UAAW2J,GAEzB1E,EAAapD,MAAQ,cACrBgD,EAAiBhD,MAAQ,IAGzB6H,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,KAEHyG,EAAQP,EACV,GACA,GACF,EAIEtE,EAA0BoD,MAAOkB,EAAM6B,KAK3C,GAHAlK,QAAQC,IAAI,WAAYoI,GAGpBA,EAAK8B,UAGP,OAFAnK,QAAQC,IAAI,eAAgBoI,EAAK3I,WACjCuE,EAAe9B,MAAQ+H,GAKzB,GAAI7B,EAAK+B,KAAuB,UAAhB/B,EAAKhD,OAAoB,CAEvCP,EAAmB3C,OAAQ,EAC3BoD,EAAapD,MAAQ,YACrBgD,EAAiBhD,MAAQ,EAEzBnC,QAAQC,IAAI,aAAcoI,EAAK3I,KAAM,MAAO2I,EAAK+B,IAAIzM,KAAM,OAAQ0K,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAErG,IAEE,MAAMa,QAAsB,IAAIf,SAASC,IACvC,IAAIE,IAAJ,CAAeT,EAAK+B,IAAK,CACvBrB,QAAS,GACTC,SAAU,KACVC,UAAW,KACXC,SAAU,aACVC,YAAa,EAEbC,UAAAA,GACEjE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,WACd,EAEAoJ,IAAAA,GACElE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,SACd,EACAqJ,OAAAA,CAAQC,GAEN,MAAMC,EAAWnB,EAAK+B,IAAI1K,KAAK+J,QAAQ,YAAa,IAAM,OAGpDC,EAAgB,IAAIC,KAAK,CAACJ,GAASC,EAAU,CACjD7L,KAAM,aACNiM,cAAc,IAAIlD,MAAOmD,YAI3B7J,QAAQC,IAAI,WACZD,QAAQC,IAAI,WAAYoI,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAC1D7I,QAAQC,IAAI,YAAayJ,EAAchB,KAAO,MAAMG,QAAQ,GAAI,MAChE7I,QAAQC,IAAI,SAAU6J,KAAKC,MAAiD,KAA1C,EAAIL,EAAchB,KAAOL,EAAK+B,IAAI1B,OAAc,KAClF1I,QAAQC,IAAI,aAAcyJ,EAAc/L,MACxCqC,QAAQC,IAAI,YAAayJ,EAAchK,MAGvC6F,EAAapD,MAAQ,SACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQc,EACV,EACApJ,KAAAA,CAAM2J,GACJjK,QAAQM,MAAM,UAAW2J,GAEzB1E,EAAapD,MAAQ,cACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQP,EAAK+B,IACf,GACA,IAIJpK,QAAQC,IAAI,iBAAkByJ,EAAchK,MAG5C2I,EAAK8B,WAAY,EACjB9B,EAAK+B,IAAMV,EAGX,MAAMW,EAAgBhE,EAAiBlE,MAAMmI,WAAUC,GAAKA,EAAEC,MAAQnC,EAAKmC,KAAOD,EAAE7K,OAAS2I,EAAK3I,OAC9F2K,GAAiB,EAEnBhE,EAAiBlE,MAAMkI,GAAiBX,EAGxCrD,EAAiBlE,MAAM1B,KAAKiJ,GAI9BM,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,IAEL,CAAE,MAAO7B,GACPN,QAAQM,MAAM,WAAYA,GAC1BC,EAAAA,GAAUkK,QAAQ,kBAGlB,MAAMJ,EAAgBhE,EAAiBlE,MAAMmI,WAAUC,GAAKA,EAAEC,MAAQnC,EAAKmC,KAAOD,EAAE7K,OAAS2I,EAAK3I,OAC9F2K,GAAiB,EAEnBhE,EAAiBlE,MAAMkI,GAAiBhC,EAAK+B,IAG7C/D,EAAiBlE,MAAM1B,KAAK4H,EAAK+B,KAGnCtF,EAAmB3C,OAAQ,CAC7B,CACF,MAAYkG,EAAK+B,KAAO/B,EAAKqC,KAE3B1K,QAAQC,IAAI,cAAeoI,EAAK3I,MAIlCuE,EAAe9B,MAAQ+H,EAGvB,MAAMS,EAAW,IAAItE,EAAiBlE,SAAUmE,EAAgBnE,OAChEqB,EAAqBrB,MAAQyI,EAAmBD,GAEhD3K,QAAQC,IAAI,wBAAyBoG,EAAiBlE,MAAM,EAIxD6B,EAA0BA,CAACqE,EAAM6B,KACrClK,QAAQC,IAAI,WAAYoI,GACxBpE,EAAe9B,MAAQ+H,EAGnB7B,EAAK+B,IACP/D,EAAiBlE,MAAQkE,EAAiBlE,MAAM0I,QAAON,GACrDA,EAAE7K,OAAS2I,EAAK+B,IAAI1K,OAItB2G,EAAiBlE,MAAQkE,EAAiBlE,MAAM0I,QAAON,GACrDA,EAAEC,MAAQnC,EAAKmC,KAAOD,EAAE7K,OAAS2I,EAAK3I,OAKrCkL,EAAmB,IAAIvE,EAAiBlE,SAAUmE,EAAgBnE,UACrEqB,EAAqBrB,OAAQ,GAG/BnC,QAAQC,IAAI,wBAAyBoG,EAAiBlE,MAAM,EAIxDoC,EAAyB4C,MAAOkB,EAAM6B,KAK1C,GAHAlK,QAAQC,IAAI,WAAYoI,GAGpBA,EAAK8B,UAGP,OAFAnK,QAAQC,IAAI,eAAgBoI,EAAK3I,WACjC+E,EAActC,MAAQ+H,GAKxB,GAAI7B,EAAK+B,KAAuB,UAAhB/B,EAAKhD,OAAoB,CAEvCP,EAAmB3C,OAAQ,EAC3BoD,EAAapD,MAAQ,YACrBgD,EAAiBhD,MAAQ,EAEzBnC,QAAQC,IAAI,aAAcoI,EAAK3I,KAAM,MAAO2I,EAAK+B,IAAIzM,KAAM,OAAQ0K,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAErG,IAEE,MAAMa,QAAsB,IAAIf,SAASC,IACvC,IAAIE,IAAJ,CAAeT,EAAK+B,IAAK,CACvBrB,QAAS,GACTC,SAAU,KACVC,UAAW,KACXC,SAAU,aACVC,YAAa,EAEbC,UAAAA,GACEjE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,WACd,EAEAoJ,IAAAA,GACElE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,SACd,EACAqJ,OAAAA,CAAQC,GAEN,MAAMC,EAAWnB,EAAK+B,IAAI1K,KAAK+J,QAAQ,YAAa,IAAM,OAGpDC,EAAgB,IAAIC,KAAK,CAACJ,GAASC,EAAU,CACjD7L,KAAM,aACNiM,cAAc,IAAIlD,MAAOmD,YAI3B7J,QAAQC,IAAI,WACZD,QAAQC,IAAI,WAAYoI,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAC1D7I,QAAQC,IAAI,YAAayJ,EAAchB,KAAO,MAAMG,QAAQ,GAAI,MAChE7I,QAAQC,IAAI,SAAU6J,KAAKC,MAAiD,KAA1C,EAAIL,EAAchB,KAAOL,EAAK+B,IAAI1B,OAAc,KAClF1I,QAAQC,IAAI,aAAcyJ,EAAc/L,MACxCqC,QAAQC,IAAI,YAAayJ,EAAchK,MAGvC6F,EAAapD,MAAQ,SACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQc,EACV,EACApJ,KAAAA,CAAM2J,GACJjK,QAAQM,MAAM,UAAW2J,GAEzB1E,EAAapD,MAAQ,cACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQP,EAAK+B,IACf,GACA,IAIJpK,QAAQC,IAAI,iBAAkByJ,EAAchK,MAG5C2I,EAAK8B,WAAY,EACjB9B,EAAK+B,IAAMV,EAGX,MAAMW,EAAgB/D,EAAgBnE,MAAMmI,WAAUC,GAAKA,EAAEC,MAAQnC,EAAKmC,KAAOD,EAAE7K,OAAS2I,EAAK3I,OAC7F2K,GAAiB,EAEnB/D,EAAgBnE,MAAMkI,GAAiBX,EAGvCpD,EAAgBnE,MAAM1B,KAAKiJ,GAI7BM,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,IAEL,CAAE,MAAO7B,GACPN,QAAQM,MAAM,WAAYA,GAC1BC,EAAAA,GAAUkK,QAAQ,kBAGlB,MAAMJ,EAAgB/D,EAAgBnE,MAAMmI,WAAUC,GAAKA,EAAEC,MAAQnC,EAAKmC,KAAOD,EAAE7K,OAAS2I,EAAK3I,OAC7F2K,GAAiB,EAEnB/D,EAAgBnE,MAAMkI,GAAiBhC,EAAK+B,IAG5C9D,EAAgBnE,MAAM1B,KAAK4H,EAAK+B,KAGlCtF,EAAmB3C,OAAQ,CAC7B,CACF,MAAYkG,EAAK+B,KAAO/B,EAAKqC,KAE3B1K,QAAQC,IAAI,cAAeoI,EAAK3I,MAIlC+E,EAActC,MAAQ+H,EAGtB,MAAMS,EAAW,IAAItE,EAAiBlE,SAAUmE,EAAgBnE,OAChEqB,EAAqBrB,MAAQyI,EAAmBD,GAEhD3K,QAAQC,IAAI,uBAAwBqG,EAAgBnE,MAAM,EAItDqC,EAAyBA,CAAC6D,EAAM6B,KACpClK,QAAQC,IAAI,WAAYoI,GACxB5D,EAActC,MAAQ+H,EAGlB7B,EAAK+B,IACP9D,EAAgBnE,MAAQmE,EAAgBnE,MAAM0I,QAAON,GACnDA,EAAE7K,OAAS2I,EAAK+B,IAAI1K,OAItB4G,EAAgBnE,MAAQmE,EAAgBnE,MAAM0I,QAAON,GACnDA,EAAEC,MAAQnC,EAAKmC,KAAOD,EAAE7K,OAAS2I,EAAK3I,OAKrCkL,EAAmB,IAAIvE,EAAiBlE,SAAUmE,EAAgBnE,UACrEqB,EAAqBrB,OAAQ,GAG/BnC,QAAQC,IAAI,uBAAwBqG,EAAgBnE,MAAM,EAItDyI,EAAsBE,IAC1B,MAAMC,EAAqB,QAC3B,OAAOD,EAAME,MAAK3C,GAAQA,EAAKK,KAAOqC,GAAmB,EAIrDE,EAAwBC,IAC5B,GAAIA,EAAcC,MAAO,CACvB,MAAMjG,EAAa4E,KAAKC,MAA8B,IAAvBmB,EAAcE,OAAgBF,EAAcC,OAC3EhG,EAAiBhD,MAAQ+C,EAGvBK,EAAapD,MADX+C,EAAa,GACM,YACZA,EAAa,GACD,YACZA,EAAa,IACD,UAEA,cAEzB,GAIIE,EAAoBF,GACF,MAAfA,EAAqB,KAAO,GAAGA,KAGlCP,EAAaA,KACjByB,EAAUjE,MAAMkJ,UAASlE,UACvB,GAAImE,EAAO,CACT1L,EAAQuC,OAAQ,EAChB,IACE,MAAMoJ,EAAW,IAAIC,SAarB,GAZAD,EAASE,OAAO,SAAU5F,EAAM3J,IAChCqP,EAASE,OAAO,cAAejK,EAAKO,aACpCwJ,EAASE,OAAO,WAAYjK,EAAKa,UAG7Bb,EAAKgB,gBAAkBhB,EAAKqB,iBAC9B0I,EAASE,OAAO,iBAAkBjK,EAAKgB,gBACvC+I,EAASE,OAAO,iBAAkBjK,EAAKqB,iBAEzC0I,EAASE,OAAO,WAAYjK,EAAKyB,UAG7BlG,GAAKC,MAAMC,YAAcF,GAAKC,MAAMO,KAAM,CAC5CgO,EAASE,OAAO,aAAc1O,GAAKC,MAAMO,KAAKrB,IAE9C,MAAMwP,EAAc3O,GAAKC,MAAMO,KAAKoO,UAAY5O,GAAKC,MAAMO,KAAKqO,OAAS,KACzEL,EAASE,OAAO,eAAgBC,GAChC1L,QAAQC,IAAI,UAAW,CACrB4L,WAAY9O,GAAKC,MAAMO,KAAKrB,GAC5B4P,aAAcJ,EACdnO,KAAMR,GAAKC,MAAMO,MAErB,MACEyC,QAAQC,IAAI,iBAGdD,QAAQC,IAAI,UAAW,CACrB8L,OAAQlG,EAAM3J,GACd6F,YAAaP,EAAKO,YAClBM,SAAUb,EAAKa,SACfY,SAAUzB,EAAKyB,SACf6D,aAAcT,EAAiBlE,MAAQkE,EAAiBlE,MAAM6J,OAAS,EACvEjF,YAAaT,EAAgBnE,MAAQmE,EAAgBnE,MAAM6J,OAAS,IAIlE3F,EAAiBlE,OAASkE,EAAiBlE,MAAM6J,OAAS,IAC5DhM,QAAQC,IAAI,aAAcoG,EAAiBlE,MAAM6J,QACjD3F,EAAiBlE,MAAM8J,SAAQ,CAAC5D,EAAM6D,KAChC7D,IACFrI,QAAQC,IAAI,SAASiM,EAAM,KAAM7D,EAAK3I,MACtC6L,EAASE,OAAO,eAAgBpD,GAClC,KAKA/B,EAAgBnE,OAASmE,EAAgBnE,MAAM6J,OAAS,IAC1DhM,QAAQC,IAAI,aAAcqG,EAAgBnE,MAAM6J,QAChD1F,EAAgBnE,MAAM8J,SAAQ,CAAC5D,EAAM6D,KAC/B7D,IACFrI,QAAQC,IAAI,SAASiM,EAAM,KAAM7D,EAAK3I,MACtC6L,EAASE,OAAO,cAAepD,GACjC,KAKJ,MAAMsC,EAAW,IAAKtE,EAAiBlE,OAAS,MAASmE,EAAgBnE,OAAS,IAClFqB,EAAqBrB,MAAQyI,EAAmBD,GAG5CA,EAASqB,OAAS,IACpBlH,EAAmB3C,OAAQ,EAC3BgD,EAAiBhD,MAAQ,EACzBoD,EAAapD,MAAQ,WAGvB,MAAMjC,QAAiB8H,GAAYmE,SACjClE,EAAU7J,UAAUK,aACpB8M,EACAN,GAGFjL,QAAQC,IAAI,QAASC,EAASP,MAE9BY,EAAAA,GAAU+I,QAAQ,YAClB1E,GACF,CAAE,MAAOtE,GACPN,QAAQM,MAAM,yBAA0BA,GACpCA,EAAMJ,WACRF,QAAQM,MAAM,UAAWA,EAAMJ,SAASP,MACxCK,QAAQM,MAAM,SAAUA,EAAMJ,SAASmF,SAEzC9E,EAAAA,GAAUD,MAAM,aAClB,CAAE,QACAV,EAAQuC,OAAQ,EAChB2C,EAAmB3C,OAAQ,CAC7B,CACF,MACE5B,EAAAA,GAAUkK,QAAQ,SACpB,GACA,EAGE7F,EAAYA,KACZwB,EAAUjE,OACZiE,EAAUjE,MAAMiK,cAElB/F,EAAiBlE,MAAQ,GACzBmE,EAAgBnE,MAAQ,GACxB8B,EAAe9B,MAAQ,GACvBsC,EAActC,MAAQ,GACtBX,EAAKyB,cAAW4D,EAChBrF,EAAKgB,gBAAiB,IAAIkE,MAAOC,cAAcC,MAAM,EAAG,IACxDpF,EAAKqB,eAAiB,OAAO,EAGzB/B,EAASA,KAETF,EAAQuB,OACV+D,EAAOzF,KAAK,IACd,EAGIQ,EAAcA,KAClBiF,EAAOzF,KAAK,CAAEf,KAAM,cAAegB,OAAQ,CAAEqL,OAAQlG,EAAM3J,KAAO,EAG9DoH,EAAiB+I,IAErBrC,YAAW,KACT,GAAIqC,GAASA,EAAMC,OAAQ,CAEzB,MAAMC,EAAUF,EAAMC,OAAO3E,cAAc,SACvC4E,GACFA,EAAQC,QAEZ,IACC,GAAG,EAGR,MAAO,CACLhL,OACAC,QACA2E,YACAxG,UACAwB,WACA5C,aACAoC,UACAqD,iBACAQ,gBACAV,0BACAC,0BACAO,yBACAC,yBACAJ,qBACAO,aACAC,YACA9D,SACAG,cACAqC,gBACAwB,qBACAK,mBACAI,eACAH,mBACA5B,uBAEJ,GCp3BF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCRO3G,MAAM,qB,GACJA,MAAM,U,GAFfJ,IAAA,G,GAaSI,MAAM,W,GACJA,MAAM,a,GAINA,MAAM,W,GAiBJA,MAAM,iB,GASmBA,MAAM,yB,GAsCrBA,MAAM,kB,IAkCZA,MAAM,kB,IAQZA,MAAM,mB,IAEFA,MAAM,e,IAEJA,MAAM,gB,IAhIvBJ,IAAA,EA6KwDI,MAAM,iB,GA7K9D,Y,IAAAJ,IAAA,EA2LqFI,MAAM,e,IA3L3FJ,IAAA,G,IAAAA,IAAA,EAwMuDI,MAAM,iB,GAxM7D,Y,IAAAJ,IAAA,EAsNoFI,MAAM,e,IAtN1FJ,IAAA,G,IA+NqBI,MAAM,qB,IA/N3BJ,IAAA,EAuPkCI,MAAM,gB,IAvPxCJ,IAAA,EA4PeI,MAAM,e,8qBA3PnBV,EAAAA,EAAAA,IA6QM,MA7QNC,EA6QM,EA5QJU,EAAAA,EAAAA,IASM,MATNI,EASM,EARJJ,EAAAA,EAAAA,IAEM,OAFDD,MAAM,cAAee,QAAKI,EAAA,KAAAA,EAAA,OAAA6C,IAAExE,EAAAyE,QAAAzE,EAAAyE,UAAAD,K,EAC/BlE,EAAAA,EAAAA,IAAiCoE,EAAA,MAJzCjD,SAAAC,EAAAA,EAAAA,KAIiB,IAAc,EAAdpB,EAAAA,EAAAA,IAAcqE,MAJ/B/C,EAAA,I,aAAAb,EAAAA,EAAAA,IAIyC,aACnC,eACAN,EAAAA,EAAAA,IAAe,UAAX,UAAM,IACmCT,EAAAuE,UAAO,WAApDzE,EAAAA,EAAAA,IAEM,OATZM,IAAA,EAOWI,MAAM,YAAae,QAAKI,EAAA,KAAAA,EAAA,OAAA6C,IAAExE,EAAAoQ,QAAApQ,EAAAoQ,UAAA5L,K,cAPrCzD,EAAAA,EAAAA,IAO4D,UACjDT,EAAAA,EAAAA,IAA2BoE,EAAA,MARtCjD,SAAAC,EAAAA,EAAAA,KAQoB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ+P,MAR5BzO,EAAA,S,WAUM9B,EAAAA,EAAAA,IAAkB,MAVxBgB,OAaIL,EAAAA,EAAAA,IAoPM,MApPNW,EAoPM,EAnPJX,EAAAA,EAAAA,IAEM,MAFNqE,EAEM,EADJrE,EAAAA,EAAAA,IAAgC,WAAAO,EAAAA,EAAAA,IAAzBhB,EAAA+E,UAAW,YAAS,MAG7BtE,EAAAA,EAAAA,IAaM,MAbNwF,EAaM,EAZJ3F,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAAsQ,c,CAnB1C7O,SAAAC,EAAAA,EAAAA,KAoBU,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MApBrCjD,SAAAC,EAAAA,EAAAA,KAoBmB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MApB3BrG,EAAA,I,eAAAb,EAAAA,EAAAA,IAoBqC,cApBrCa,EAAA,G,eAsBoE5B,EAAAuE,SAAWvE,EAAAuQ,cAAW,WAAlFrQ,EAAAA,EAAAA,IAEYmB,EAAA,CAxBpBjB,IAAA,EAsBmBkB,KAAK,UAAWC,QAAOvB,EAAAwQ,oB,CAtB1C/O,SAAAC,EAAAA,EAAAA,KAuBU,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MAvBrCjD,SAAAC,EAAAA,EAAAA,KAuBmB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQmQ,MAvB3B7O,EAAA,I,eAAAb,EAAAA,EAAAA,IAuBqC,cAvBrCa,EAAA,G,iBAAAvB,EAAAA,EAAAA,IAAA,QAyBQC,EAAAA,EAAAA,IAEYe,EAAA,CAFAE,QAAOvB,EAAA0Q,gBAAc,CAzBzCjP,SAAAC,EAAAA,EAAAA,KA0BU,IAA8B,EAA9BpB,EAAAA,EAAAA,IAA8BoE,EAAA,MA1BxCjD,SAAAC,EAAAA,EAAAA,KA0BmB,IAAW,EAAXpB,EAAAA,EAAAA,IAAWqQ,MA1B9B/O,EAAA,I,eAAAb,EAAAA,EAAAA,IA0BwC,YA1BxCa,EAAA,G,gBA4BQtB,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAA4Q,cAAgBrN,QAASvD,EAAAuD,S,CA5BnE9B,SAAAC,EAAAA,EAAAA,KA6BU,IAA+B,EAA/BpB,EAAAA,EAAAA,IAA+BoE,EAAA,MA7BzCjD,SAAAC,EAAAA,EAAAA,KA6BmB,IAAY,EAAZpB,EAAAA,EAAAA,IAAYuQ,MA7B/BjP,EAAA,I,eAAAb,EAAAA,EAAAA,IA6ByC,cA7BzCa,EAAA,G,4BAkCMtB,EAAAA,EAAAA,IAwFU0C,EAAA,CAxFDxC,MAAM,eAAa,CAlClCiB,SAAAC,EAAAA,EAAAA,KAmCQ,IAOM,EAPNjB,EAAAA,EAAAA,IAOM,MAPN2G,EAOM,gBANJ3G,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRH,EAAAA,EAAAA,IAIYe,EAAA,CAJDC,KAAK,UAAUwP,KAAA,GAAMvP,QAAKI,EAAA,KAAAA,EAAA,GAAAuB,GAAElD,EAAA+Q,iBAAmB/Q,EAAA+Q,kB,CArCpEtP,SAAAC,EAAAA,EAAAA,KAsCY,IAAmC,EAtC/CX,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAsCehB,EAAA+Q,gBAAkB,KAAO,MAAO,IACnC,GAAgB/Q,EAAA+Q,kB,WAChB7Q,EAAAA,EAAAA,IAAsCwE,EAAA,CAxClDtE,IAAA,IAAAqB,SAAAC,EAAAA,EAAAA,KAwC4B,IAAY,EAAZpB,EAAAA,EAAAA,IAAY0Q,MAxCxCpP,EAAA,OAuC2C,WAA/B1B,EAAAA,EAAAA,IAAyDwE,EAAA,CAvCrEtE,IAAA,IAAAqB,SAAAC,EAAAA,EAAAA,KAuC6C,IAAc,EAAdpB,EAAAA,EAAAA,IAAc2Q,MAvC3DrP,EAAA,QAAAA,EAAA,O,SA4CQnB,EAAAA,EAAAA,IA6EM,MA7EN4H,EA6EM,EA5EJ/H,EAAAA,EAAAA,IA2EU0E,EAAA,CA3EAE,MAAOlF,EAAAkR,WAAY,cAAY,QAAQ1Q,MAAM,e,CA7CjEiB,SAAAC,EAAAA,EAAAA,KA8CY,IA8BS,EA9BTpB,EAAAA,EAAAA,IA8BS6Q,EAAA,CA9BAC,OAAQ,IAAE,CA9C/B3P,SAAAC,EAAAA,EAAAA,KAgDc,IAaS,EAbTpB,EAAAA,EAAAA,IAaS+Q,EAAA,CAbAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,I,CAhD/DjQ,SAAAC,EAAAA,EAAAA,KAiDgB,IAWe,EAXfpB,EAAAA,EAAAA,IAWe+E,EAAA,CAXDC,MAAM,QAAM,CAjD1C7D,SAAAC,EAAAA,EAAAA,KAkDkB,IASE,EATFpB,EAAAA,EAAAA,IASE4F,EAAA,CA3DpBT,WAmD6BzF,EAAAkR,WAAWS,UAnDxC,sBAAAhQ,EAAA,KAAAA,EAAA,GAAAuB,GAmD6BlD,EAAAkR,WAAWS,UAASzO,GAC7B5B,KAAK,YACL,kBAAgB,IAChB,oBAAkB,OAClB,kBAAgB,OAChB8E,OAAO,aACP,eAAa,aACbR,MAAA,gB,0BA1DpBhE,EAAA,OAAAA,EAAA,KAgEctB,EAAAA,EAAAA,IAWS+Q,EAAA,CAXAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,I,CAhE/DjQ,SAAAC,EAAAA,EAAAA,KAiEgB,IASe,EATfpB,EAAAA,EAAAA,IASe+E,EAAA,CATDC,MAAM,QAAM,CAjE1C7D,SAAAC,EAAAA,EAAAA,KAkEkB,IAOY,EAPZpB,EAAAA,EAAAA,IAOYkF,EAAA,CAzE9BC,WAkEsCzF,EAAAkR,WAAWxL,YAlEjD,sBAAA/D,EAAA,KAAAA,EAAA,GAAAuB,GAkEsClD,EAAAkR,WAAWxL,YAAWxC,GAAEyC,YAAY,SAASC,MAAA,eAAoBgM,UAAA,I,CAlEvGnQ,SAAAC,EAAAA,EAAAA,KAoEsB,IAA0B,gBAD5B5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MAxEtBC,EAAAA,EAAAA,IAoEqC7C,EAAAmC,YAARb,K,WADTpB,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAKkB,EAAKzB,GACVyF,MAAOhE,EAAK+B,KACZyC,MAAOxE,EAAKzB,I,sCAvEnC+B,EAAA,G,qBAAAA,EAAA,OAAAA,EAAA,OAAAA,EAAA,KA8EYtB,EAAAA,EAAAA,IAoCS6Q,EAAA,CApCAC,OAAQ,IAAE,CA9E/B3P,SAAAC,EAAAA,EAAAA,KAgFc,IAsBS,EAtBTpB,EAAAA,EAAAA,IAsBS+Q,EAAA,CAtBAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,I,CAhF/DjQ,SAAAC,EAAAA,EAAAA,KAiFgB,IAoBe,EApBfpB,EAAAA,EAAAA,IAoBe+E,EAAA,CApBDC,MAAM,WAAS,CAjF7C7D,SAAAC,EAAAA,EAAAA,KAkFkB,IAkBM,EAlBNjB,EAAAA,EAAAA,IAkBM,MAlBNkI,EAkBM,EAjBJrI,EAAAA,EAAAA,IAOEqG,EAAA,CA1FtBlB,WAoF+BzF,EAAAkR,WAAWW,YApF1C,sBAAAlQ,EAAA,KAAAA,EAAA,GAAAuB,GAoF+BlD,EAAAkR,WAAWW,YAAW3O,GAC9B2D,IAAK,EACLC,UAAW,EACXC,KAAM,KACPpB,YAAY,MACZC,MAAA,e,sCAEFnF,EAAAA,EAAAA,IAAsC,QAAhCD,MAAM,mBAAkB,KAAC,KAC/BF,EAAAA,EAAAA,IAOEqG,EAAA,CAnGtBlB,WA6F+BzF,EAAAkR,WAAWY,YA7F1C,sBAAAnQ,EAAA,KAAAA,EAAA,GAAAuB,GA6F+BlD,EAAAkR,WAAWY,YAAW5O,GAC9B2D,IAAK7G,EAAAkR,WAAWW,aAAe,EAC/B/K,UAAW,EACXC,KAAM,KACPpB,YAAY,MACZC,MAAA,e,kCAlGtBhE,EAAA,OAAAA,EAAA,KAyGctB,EAAAA,EAAAA,IAQS+Q,EAAA,CARAC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,GAAKC,GAAI,I,CAzG/DjQ,SAAAC,EAAAA,EAAAA,KA0GgB,IAMe,EANfpB,EAAAA,EAAAA,IAMe+E,EAAA,CANDC,MAAM,QAAM,CA1G1C7D,SAAAC,EAAAA,EAAAA,KA2GkB,IAIE,EAJFpB,EAAAA,EAAAA,IAIEyF,EAAA,CA/GpBN,WA4G6BzF,EAAAkR,WAAWlL,SA5GxC,sBAAArE,EAAA,KAAAA,EAAA,GAAAuB,GA4G6BlD,EAAAkR,WAAWlL,SAAQ9C,GAC5ByC,YAAY,YACZiM,UAAA,I,0BA9GpBhQ,EAAA,OAAAA,EAAA,OAAAA,EAAA,KAoHYnB,EAAAA,EAAAA,IAGM,MAHNwI,GAGM,EAFJ3I,EAAAA,EAAAA,IAA6De,EAAA,CAAlDC,KAAK,UAAWC,QAAOvB,EAAA+R,a,CArHhDtQ,SAAAC,EAAAA,EAAAA,KAqH6D,IAAEC,EAAA,MAAAA,EAAA,MArH/DZ,EAAAA,EAAAA,IAqH6D,UArH7Da,EAAA,G,gBAsHctB,EAAAA,EAAAA,IAA8Ce,EAAA,CAAlCE,QAAOvB,EAAAgS,aAAW,CAtH5CvQ,SAAAC,EAAAA,EAAAA,KAsH8C,IAAEC,EAAA,MAAAA,EAAA,MAtHhDZ,EAAAA,EAAAA,IAsH8C,UAtH9Ca,EAAA,G,oBAAAA,EAAA,G,0BA4CqB5B,EAAA+Q,sBA5CrBnP,EAAA,KA4HMnB,EAAAA,EAAAA,IAoIM,MApINwR,GAoIM,EAnIJ3R,EAAAA,EAAAA,IAkIU0C,EAAA,CAlIDxC,MAAM,gBAAc,CA7HrCiB,SAAAC,EAAAA,EAAAA,KA8HU,IAOM,EAPNjB,EAAAA,EAAAA,IAOM,MAPNyR,GAOM,gBANJzR,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAIM,MAJN0R,GAIM,EAHJ7R,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAA4Q,e,CAjIhDnP,SAAAC,EAAAA,EAAAA,KAkIgB,IAA+B,EAA/BpB,EAAAA,EAAAA,IAA+BoE,EAAA,MAlI/CjD,SAAAC,EAAAA,EAAAA,KAkIyB,IAAY,EAAZpB,EAAAA,EAAAA,IAAYuQ,MAlIrCjP,EAAA,I,eAAAb,EAAAA,EAAAA,IAkI+C,cAlI/Ca,EAAA,G,yCAuIU1B,EAAAA,EAAAA,IA8GWkS,EAAA,CA7GR9O,KAAMtD,EAAAqS,gBACPzM,MAAA,eACA0M,OAAA,GAEAC,OAAA,GACA/R,MAAM,mBACNgS,OAAO,MACNC,SAAQzS,EAAA0S,c,CA/IrBjR,SAAAC,EAAAA,EAAAA,KAiJY,IAAuE,EAAvEpB,EAAAA,EAAAA,IAAuEqS,EAAA,CAAtDpN,KAAK,kBAAkBD,MAAM,OAAO,YAAU,SAC/DhF,EAAAA,EAAAA,IAAgEqS,EAAA,CAA/CpN,KAAK,WAAWD,MAAM,OAAO,YAAU,SACxDhF,EAAAA,EAAAA,IAIkBqS,EAAA,CAJDrN,MAAM,SAAS,YAAU,O,CAC7B7D,SAAOC,EAAAA,EAAAA,KAC6CkR,GADtC,EApJvC7R,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAqJmBhB,EAAA6S,uBAAuBD,EAAME,IAAIC,wBAAqB,MArJzEnR,EAAA,KAwJYtB,EAAAA,EAAAA,IAIkBqS,EAAA,CAJDrN,MAAM,QAAQ,YAAU,O,CAC5B7D,SAAOC,EAAAA,EAAAA,KAC+BkR,GADxB,EAzJvC7R,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IA0JmBgS,WAAWJ,EAAME,IAAIlM,UAAU4F,QAAQ,IAAD,MA1JzD5K,EAAA,KA6JYtB,EAAAA,EAAAA,IAIkBqS,EAAA,CAJDrN,MAAM,OAAO,YAAU,MAAM9E,MAAM,iB,CACvCiB,SAAOC,EAAAA,EAAAA,KACkCkR,GAD3B,EA9JvC7R,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IA+JmBhB,EAAA6S,uBAAuBD,EAAME,IAAIG,aAAU,MA/J9DrR,EAAA,KAkKYtB,EAAAA,EAAAA,IAIkBqS,EAAA,CAJDrN,MAAM,MAAM,YAAU,MAAM9E,MAAM,iB,CACtCiB,SAAOC,EAAAA,EAAAA,KACoBkR,GADb,EAnKvC7R,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAoKmB4R,EAAME,IAAIrD,cAAgB,MAAJ,MApKzC7N,EAAA,KAuKYtB,EAAAA,EAAAA,IA0BkBqS,EAAA,CAzBhBrN,MAAM,YACNoD,MAAM,MACNwK,MAAM,U,CAEKzR,SAAOC,EAAAA,EAAAA,KAkBVkR,GAlBiB,CACZA,EAAME,IAAIK,oBAAiB,WAAtCrT,EAAAA,EAAAA,IAiBM,MAjBNsT,GAiBM,gBAfJtT,EAAAA,EAAAA,IAWM8C,EAAAA,GAAA,MA1LxBC,EAAAA,EAAAA,IAgL4C7C,EAAAqT,eAAeT,EAAME,IAAIK,oBAhLrE,CAgL4BG,EAAMzD,M,WADhB/P,EAAAA,EAAAA,IAWM,OATHM,IAAKyP,EACNrP,MAAM,4BACLe,QAAK2B,GAAElD,EAAAuT,aAAavT,EAAAqT,eAAeT,EAAME,IAAIK,mBAAoBtD,I,EAElEvP,EAAAA,EAAAA,IAIYkT,EAAA,CAHV5N,MAAA,6BACC6N,IAAG,GAAKzT,EAAA0T,UAAUJ,IACnBK,IAAI,S,mBAxL1BC,O,MA2L6B5T,EAAAqT,eAAeT,EAAME,IAAIK,mBAAmBxD,OAAS,IAAH,WAA7D7P,EAAAA,EAAAA,IAEM,MAFN+T,IAEM7S,EAAAA,EAAAA,IADDhB,EAAAqT,eAAeT,EAAME,IAAIK,mBAAmBxD,QAAS,KAC1D,KA7LlBtP,EAAAA,EAAAA,IAAA,uBA+LgBP,EAAAA,EAAAA,IAAqB,OA/LrCgU,GA+L6B,SA/L7BlS,EAAA,KAkMYtB,EAAAA,EAAAA,IA0BkBqS,EAAA,CAzBhBrN,MAAM,YACNoD,MAAM,MACNwK,MAAM,U,CAEKzR,SAAOC,EAAAA,EAAAA,KAkBVkR,GAlBiB,CACZA,EAAME,IAAIiB,mBAAgB,WAArCjU,EAAAA,EAAAA,IAiBM,MAjBNkU,GAiBM,gBAfJlU,EAAAA,EAAAA,IAWM8C,EAAAA,GAAA,MArNxBC,EAAAA,EAAAA,IA2M4C7C,EAAAqT,eAAeT,EAAME,IAAIiB,mBA3MrE,CA2M4BT,EAAMzD,M,WADhB/P,EAAAA,EAAAA,IAWM,OATHM,IAAKyP,EACNrP,MAAM,4BACLe,QAAK2B,GAAElD,EAAAuT,aAAavT,EAAAqT,eAAeT,EAAME,IAAIiB,kBAAmBlE,I,EAEjEvP,EAAAA,EAAAA,IAIYkT,EAAA,CAHV5N,MAAA,6BACC6N,IAAG,GAAKzT,EAAA0T,UAAUJ,IACnBK,IAAI,S,mBAnN1BM,O,MAsN6BjU,EAAAqT,eAAeT,EAAME,IAAIiB,kBAAkBpE,OAAS,IAAH,WAA5D7P,EAAAA,EAAAA,IAEM,MAFNoU,IAEMlT,EAAAA,EAAAA,IADDhB,EAAAqT,eAAeT,EAAME,IAAIiB,kBAAkBpE,QAAS,KACzD,KAxNlBtP,EAAAA,EAAAA,IAAA,uBA0NgBP,EAAAA,EAAAA,IAAqB,OA1NrCqU,GA0N6B,SA1N7BvS,EAAA,KA6NYtB,EAAAA,EAAAA,IAuBkBqS,EAAA,CAvBDrN,MAAM,KAAK,YAAU,KAAK8O,MAAM,S,CACpC3S,SAAOC,EAAAA,EAAAA,KAoBVkR,GApBiB,EACvBnS,EAAAA,EAAAA,IAmBM,MAnBN4T,GAmBM,CAbIrU,EAAAsU,QAAQ1B,EAAME,OAAG,WALzB5S,EAAAA,EAAAA,IAQYmB,EAAA,CAxO9BjB,IAAA,EAiOoBkB,KAAK,UACL+K,KAAK,QACJ9K,QAAK2B,GAAElD,EAAAuU,WAAW3B,EAAME,IAAIjT,IAC7B2U,KAAA,I,CApOpB/S,SAAAC,EAAAA,EAAAA,KAsOmB,IAEDC,EAAA,MAAAA,EAAA,MAxOlBZ,EAAAA,EAAAA,IAsOmB,YAtOnBa,EAAA,G,oBAAAvB,EAAAA,EAAAA,IAAA,OA8O0BL,EAAAsU,QAAQ1B,EAAME,OAAG,WALzB5S,EAAAA,EAAAA,IAQYmB,EAAA,CAjP9BjB,IAAA,EA0OoBkB,KAAK,SACL+K,KAAK,QACJ9K,QAAK2B,GAAElD,EAAAyU,cAAc7B,EAAME,KAC5B0B,KAAA,I,CA7OpB/S,SAAAC,EAAAA,EAAAA,KA+OmB,IAEDC,EAAA,MAAAA,EAAA,MAjPlBZ,EAAAA,EAAAA,IA+OmB,YA/OnBa,EAAA,G,oBAAAvB,EAAAA,EAAAA,IAAA,YAAAuB,EAAA,OAAAA,EAAA,G,4BA2IuB5B,EAAAuD,WA4GFvD,EAAA0U,cAAW,WAAtB5U,EAAAA,EAAAA,IAGM,MAHN6U,GAGM,EAFJrU,EAAAA,EAAAA,IAA8CoE,EAAA,CAArClE,MAAM,WAAS,CAxPpCiB,SAAAC,EAAAA,EAAAA,KAwPqC,IAAW,EAAXpB,EAAAA,EAAAA,IAAWsU,MAxPhDhT,EAAA,I,eAAAb,EAAAA,EAAAA,IAwP0D,kBAxP1DV,EAAAA,EAAAA,IAAA,OA4P4D,IAAnBL,EAAA6U,QAAQlF,QAAiB3P,EAAAuD,SA5PlElD,EAAAA,EAAAA,IAAA,SA4PyE,WAA/DP,EAAAA,EAAAA,IAEM,MAFNgV,GAEM,EADJxU,EAAAA,EAAAA,IAAiCyU,EAAA,CAAvBC,YAAY,iBA7PlCpT,EAAA,Q,eAmQInB,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAA2B,SAAxB,qBAAoB,IAKjBT,EAAAiV,aAAU,WADlB/U,EAAAA,EAAAA,IAKEgV,EAAA,CA7QN9U,IAAA,EA0QO,WAAUJ,EAAAmV,cACV,gBAAenV,EAAAoV,aACfC,QAAOrV,EAAAsV,a,iDA5QdjV,EAAAA,EAAAA,IAAA,Q,uECMAsD,QAAQC,IAAI,WAAY2R,GAAAA,SACxB5R,QAAQC,IAAI,aAAc4R,OAAOC,KAAKF,IAAMG,KAAK,OAQjD,MAAMC,GAAqB7K,MAAO8K,EAAUlC,EAAUmC,OAAO7P,SAAS8P,UAGpE,GAFAnS,QAAQC,IAAI,QAASgS,IAEhBA,EAEH,OADAjS,QAAQM,MAAM,WACP,KAIT,MAAM8R,EAAUH,EAASI,WAAW,KAChC,GAAGtC,IAAUkC,IACbA,EAEJ,IACEjS,QAAQC,IAAI,QAASmS,GACrB,MAAMlS,QAAiBoS,MAAMF,EAAS,CACpCG,QAAS,CACP,gBAAiB,WACjB,OAAU,cAId,IAAKrS,EAASsS,GACZ,MAAM,IAAIC,MAAM,WAAWvS,EAASmF,UAAUnF,EAASwS,cAGzD,MAAMC,QAAoBzS,EAASyS,cAEnC,OADA3S,QAAQC,IAAI,aAAc0S,EAAYC,WAAY,MAC3CD,CACT,CAAE,MAAOrS,GAEP,OADAN,QAAQM,MAAM,UAAWA,GAClB,IACT,GAyCWuS,GAA0B1L,MAAOxH,EAAM6J,EAAU+I,EAASxC,EAAUmC,OAAO7P,SAAS8P,OAAQW,EAAa,QAIpH,GAHA9S,QAAQC,IAAI,yCACZD,QAAQC,IAAI,QAASN,EAAKqM,SAErBrM,GAAwB,IAAhBA,EAAKqM,OAEhB,OADAhM,QAAQM,MAAM,cACP,EAGT,IAEEkJ,EAAWA,EAASC,QAAQ,gBAAiB,KAC7C,MAAMsJ,GAAY,IAAIrM,MAAOC,cAAc8C,QAAQ,SAAU,IAAIuJ,UAAU,EAAG,IACxEC,EAAe,GAAGzJ,KAAYuJ,SAG9BG,EAAW,IAAIC,KAAAA,UACrBD,EAASE,QAAU,WACnBF,EAASG,eAAiB,WAC1BH,EAASrT,QAAU,IAAI6G,KACvBwM,EAASI,SAAW,IAAI5M,KAGxB,MAAM6M,EAAYL,EAASM,aAAa,UAGlCC,EAAUlB,EAAQmB,KAAIC,IAAU,CACpCA,OAAQA,EAAO9C,KACfpU,IAAKkX,EAAOC,MACZ7O,MAAO4O,EAAOpL,QAAU,GAAK,OAE/BgL,EAAUE,QAAUA,EAGpBF,EAAUM,OAAO,GAAGC,KAAO,CAAEC,MAAM,GACnCR,EAAUM,OAAO,GAAGG,UAAY,CAAEC,SAAU,SAAUC,WAAY,UAGlElU,QAAQC,IAAI,cAGZ,MAAMkU,EAAaxU,EAAKqM,QAAU,EAAIuG,EAAQ1H,QAAOuJ,GAAKA,EAAE7L,UAASyD,QACrE,IAAIqI,EAAc,EAElB,IAAK,IAAIC,EAAW,EAAGA,EAAW3U,EAAKqM,OAAQsI,IAAY,CACzD,MAAMnF,EAAMxP,EAAK2U,GAEjBtU,QAAQC,IAAI,OAAOqU,EAAW,KAAK3U,EAAKqM,iBAGxC,MAAMuI,EAAU,CAAC,EACjBhC,EAAQtG,SAAQ0H,IACTA,EAAOpL,UACVgM,EAAQZ,EAAOC,OAASzE,EAAIwE,EAAOC,QAAU,GAC/C,IAIF,MAAMY,EAAWjB,EAAUkB,OAAOF,GAGlCC,EAAS3F,OAAS,GAGlBwF,IACIvB,GAAoC,oBAAfA,GACvBA,EAAWuB,EAAaF,GAI1B,IAAK,MAAMR,KAAUpB,EACnB,GAAIoB,EAAOpL,QAAS,CAClB,MAAMmM,EAAYf,EAAOC,MACnBe,EAAYxF,EAAIuF,GAEtB,GAAIC,EAAW,CACb3U,QAAQC,IAAI,MAAMqU,EAAW,OAAOI,cAAsBC,KAG1D,IACE,MAAMC,QAAoB5C,GAAmB2C,EAAW5E,GAExD,GAAI6E,EAAa,CAEf,MAAMC,EAAWtC,EAAQjI,WAAU8J,GAAKA,EAAER,QAAUc,IAAa,EAG3DI,EAAUvB,EAAUwB,QAAQT,EAAW,EAAGO,GAAUG,QAGpDC,EAAU/B,EAASgC,SAAS,CAChCC,OAAQP,EACRQ,UAAWT,EAAUU,MAAM,KAAKC,MAAMC,gBAIxChC,EAAU2B,SAASD,EAAS,CAC1BO,GAAI,CAAEC,IAAKZ,EAAW,EAAG1F,IAAKmF,EAAW,GACzCoB,GAAI,CAAED,IAAKZ,EAAU1F,IAAKmF,EAAW,KACrCqB,OAAQ,YAGV3V,QAAQC,IAAI,aAAa6U,IAC3B,MACE9U,QAAQM,MAAM,WAAWqU,IAE7B,CAAE,MAAOiB,GACP5V,QAAQM,MAAM,WAAYsV,EAC5B,CACF,MACE5V,QAAQC,IAAI,MAAMqU,EAAW,OAAOI,YAItCL,IACIvB,GAAoC,oBAAfA,GACvBA,EAAWuB,EAAaF,EAE5B,CAEJ,CAEAnU,QAAQC,IAAI,0BAGZ,MAAMkV,QAAejC,EAAS2C,KAAKC,cAC7BC,EAAO,IAAIC,KAAK,CAACb,GAAS,CAAExX,KAAM,sEAClC+M,EAAMwH,OAAO+D,IAAIC,gBAAgBH,GAEjC5I,EAAO9F,SAASC,cAAc,KASpC,OARA6F,EAAKgJ,KAAOzL,EACZyC,EAAKiJ,SAAWnD,EAChB9F,EAAKkJ,QAGLnE,OAAO+D,IAAIK,gBAAgB5L,GAE3B1K,QAAQC,IAAI,mBACL,CACT,CAAE,MAAOK,GAEP,OADAN,QAAQM,MAAM,eAAgBA,IACvB,CACT,GASWiW,GAAgBpP,MAAOxH,EAAM6J,EAAU+I,KAClD,IAAK5S,GAAwB,IAAhBA,EAAKqM,OAEhB,OADAhM,QAAQM,MAAM,cACP,EAITkJ,EAAWA,EAASC,QAAQ,gBAAiB,KAC7C,MAAMsJ,GAAY,IAAIrM,MAAOC,cAAc8C,QAAQ,SAAU,IAAIuJ,UAAU,EAAG,IACxEC,EAAe,GAAGzJ,KAAYuJ,SAEpC/S,QAAQC,IAAI,gBAAiBN,EAAKqM,QAElC,IACEhM,QAAQC,IAAI,uBAGZ,MAAMiT,EAAW,IAAIC,KAAAA,UACrBD,EAASE,QAAU,WACnBF,EAASG,eAAiB,WAC1BH,EAASrT,QAAU,IAAI6G,KACvBwM,EAASI,SAAW,IAAI5M,KAGxB,MAAM6M,EAAYL,EAASM,aAAa,UAGlCC,EAAUlB,EAAQmB,KAAIC,IAAU,CACpCA,OAAQA,EAAO9C,KACfpU,IAAKkX,EAAOC,MACZ7O,MAAO,OAETwO,EAAUE,QAAUA,EAGpBF,EAAUM,OAAO,GAAGC,KAAO,CAAEC,MAAM,GACnCR,EAAUM,OAAO,GAAGG,UAAY,CAAEC,SAAU,SAAUC,WAAY,UAGlEvU,EAAKsM,SAAQkD,IACX,MAAMoF,EAAU,CAAC,EACjBhC,EAAQtG,SAAQ0H,IACdY,EAAQZ,EAAOC,OAASzE,EAAIwE,EAAOC,QAAU,EAAE,IAEjDL,EAAUkB,OAAOF,EAAQ,IAI3BvU,QAAQC,IAAI,gBACZ,MAAMkV,QAAejC,EAAS2C,KAAKC,cAG7BC,EAAO,IAAIC,KAAK,CAACb,GAAS,CAC9BxX,KAAM,sEAIF+M,EAAMuL,IAAIC,gBAAgBH,GAC1BS,EAAInP,SAASC,cAAc,KAYjC,OAXAkP,EAAEL,KAAOzL,EACT8L,EAAEJ,SAAWnD,EACbjT,QAAQC,IAAI,mBAGZoH,SAASoP,KAAKhP,YAAY+O,GAC1BA,EAAEH,QACFhP,SAASoP,KAAKC,YAAYF,GAC1BP,IAAIK,gBAAgB5L,GAEpB1K,QAAQC,IAAI,cACL,CACT,CAAE,MAAOK,GAKP,OAJAN,QAAQM,MAAM,kBAAmBA,GACjCN,QAAQC,IAAI,YAEZ0W,GAAYhX,EAAM6J,EAAU+I,IACrB,CACT,GASWoE,GAAcA,CAAChX,EAAM6J,EAAU+I,KAE1C,MAAMQ,GAAY,IAAIrM,MAAOC,cAAc8C,QAAQ,SAAU,IAAIuJ,UAAU,EAAG,IACxE4D,EAAc,GAAGpN,KAAYuJ,QAGnC,IAAI8D,EAAa,SAGjB,MAAMC,EAAYvE,EAAQmB,KAAIU,GAAK,IAAIA,EAAEzQ,WAAUoO,KAAK,KACxD8E,GAAcC,EAAY,OAG1BnX,EAAKsM,SAAQ8K,IACX,MAAM5H,EAAMoD,EAAQmB,KAAIC,IACtB,MAAMxR,EAAQ4U,EAAKpD,EAAOC,OAG1B,GAAc,OAAVzR,QAA4B0E,IAAV1E,EACpB,MAAO,GAIT,GAAoB,WAAhBwR,EAAOhW,MAAsC,kBAAVwE,EACrC,OAAOA,EAIT,IAAI6U,EAAYlR,OAAO3D,GAMvB,OALI6U,EAAUxO,SAAS,MAAQwO,EAAUxO,SAAS,MAAQwO,EAAUxO,SAAS,SAC3EwO,EAAYA,EAAUvN,QAAQ,KAAM,MACpCuN,EAAY,IAAIA,MAGXA,CAAS,IACfjF,KAAK,KAER8E,GAAc1H,EAAM,MAAM,IAI5B,MAAM4G,EAAO,IAAIC,KAAK,CAACa,GAAa,CAAElZ,KAAM,4BACtC+M,EAAMuL,IAAIC,gBAAgBH,GAC1B5I,EAAO9F,SAASC,cAAc,KACpC6F,EAAK5F,aAAa,OAAQmD,GAC1ByC,EAAK5F,aAAa,WAAYqP,GAC9BzJ,EAAKlL,MAAMgV,WAAa,SACxB5P,SAASoP,KAAKhP,YAAY0F,GAC1BA,EAAKkJ,QACLhP,SAASoP,KAAKC,YAAYvJ,GAC1B8I,IAAIK,gBAAgB5L,GAEpB1K,QAAQC,IAAI,UAAU,ED7FxB,QACEP,KAAM,cACN8F,WAAY,CACVC,UAAS,MACTyR,KAAI,OACJC,QAAO,MACPxR,KAAI,MACJyR,KAAI,MACJC,UAAS,MACTC,QAAO,MACPC,SAAQ,MACRC,cAAa,MACbC,QAAOA,EAAAA,KAET5R,MAAO,CACLkG,OAAQ,CACNpO,KAAM,CAACmI,OAAQC,QACfC,UAAU,IAGdC,KAAAA,CAAMJ,GACJ,MAAMK,GAASC,EAAAA,EAAAA,MACT+K,GAAU5P,EAAAA,EAAAA,IAAI,IACd1B,GAAU0B,EAAAA,EAAAA,KAAI,GACdF,GAAWE,EAAAA,EAAAA,IAAI,IACf9C,GAAa8C,EAAAA,EAAAA,IAAI,IACjB8L,GAAkB9L,EAAAA,EAAAA,KAAI,GAGtByO,EAAU9H,EAAU9J,QAGpBuR,EAAkBC,IACtB,IAAKA,EAAM,MAAO,GAElB,IAEE,OAAIA,EAAK0C,WAAW,MAAQ1C,EAAK+H,SAAS,KACjCC,KAAKC,MAAMjI,GAGb,CAACA,EACV,CAAE,MAAOrP,GAGP,OAFAN,QAAQM,MAAM,YAAaA,GAEpB,CAACqP,EACV,GAIIkI,GAAOvW,EAAAA,EAAAA,IAAI,GACXwW,GAAWxW,EAAAA,EAAAA,IAAI,IACfyW,GAAUzW,EAAAA,EAAAA,KAAI,GACdyP,GAAczP,EAAAA,EAAAA,KAAI,GAGlBiM,GAAa9G,EAAAA,EAAAA,IAAS,CAC1BuH,UAAW,KACXjM,YAAa,KACbmM,YAAa,KACbC,YAAa,KACb9L,SAAU,KAINqM,GAAkBnI,EAAAA,EAAAA,KAAS,IAC1B2K,EAAQ/O,OAAU6V,MAAMC,QAAQ/G,EAAQ/O,OAItC+O,EAAQ/O,MAAM0I,QAAOqN,IAE1B,GAAI3K,EAAWxL,aAAemW,EAAOC,gBAAkB5K,EAAWxL,YAChE,OAAO,EAIT,GAA+B,OAA3BwL,EAAWW,aAAwBmB,WAAW6I,EAAOjV,UAAYsK,EAAWW,YAC9E,OAAO,EAET,GAA+B,OAA3BX,EAAWY,aAAwBkB,WAAW6I,EAAOjV,UAAYsK,EAAWY,YAC9E,OAAO,EAIT,GAAIZ,EAAWlL,WAAa6V,EAAO7V,SAASkT,cAAc/M,SAAS+E,EAAWlL,SAASkT,eACrF,OAAO,EAIT,GAAIhI,EAAWS,WAA6C,IAAhCT,EAAWS,UAAUhC,OAAc,CAC7D,MAAMoM,EAAY,IAAI1R,KAAK6G,EAAWS,UAAU,IAC1CqK,EAAU,IAAI3R,KAAK6G,EAAWS,UAAU,IAC9CqK,EAAQC,SAAS,GAAI,GAAI,IAEzB,MAAMC,EAAa,IAAI7R,KAAKwR,EAAO9I,uBACnC,GAAImJ,EAAaH,GAAaG,EAAaF,EACzC,OAAO,CAEX,CAEA,OAAO,CAAI,IAlCJ,KAuCLzX,GAAU2F,EAAAA,EAAAA,KAAS,IAChBxJ,GAAK6D,YAIRgM,GAAcrG,EAAAA,EAAAA,KAAS,IACpBxJ,GAAK6P,gBAIRsC,EAA0BsJ,IAC9B,IAAKA,EAAa,MAAO,GACzB,MAAMC,EAAO,IAAI/R,KAAK8R,GACtB,MAAO,GAAGC,EAAKC,iBAAiB5S,OAAO2S,EAAKE,WAAa,GAAGC,SAAS,EAAG,QAAQ9S,OAAO2S,EAAKI,WAAWD,SAAS,EAAG,QAAQ9S,OAAO2S,EAAKK,YAAYF,SAAS,EAAG,QAAQ9S,OAAO2S,EAAKM,cAAcH,SAAS,EAAG,MAAM,EAI/M7L,EAAiB5F,gBACf6R,IACNzY,EAAAA,GAAU+I,QAAQ,QAAQ,EAItBxI,EAASA,KAEb,MAAMiL,EAAShP,GAAKkc,YAChBlN,EACF7F,EAAOzF,KAAK,SAASsL,KAGrB7F,EAAOzF,KAAK,IACd,EAIIgM,EAASA,KACbvG,EAAOzF,KAAK,IAAI,EAIZoM,EAAqBA,KACzB3G,EAAOzF,KAAK,mBAAmB,EAI3BkM,EAAeA,KACnBzG,EAAOzF,KAAK,SAASoF,EAAMkG,SAAS,EAIhC6E,EAAcsI,IAClBhT,EAAOzF,KAAK,WAAWyY,IAAW,EAI9BvI,EAAWuH,IACf,IAAKA,EAAQ,OAAO,EAGpB,GAAItX,EAAQuB,MAAO,OAAO,EAG1B,MAAM4J,EAAShP,GAAKkc,YACpB,GAAIrM,EAAYzK,OAAS4J,GAAUmM,EAAOiB,UAAY/Q,SAAS2D,GAAS,OAAO,EAG/E,MAAMqN,EAASrc,GAAKsc,YACpB,OAAOD,GAAUlB,EAAOrM,aAAezD,SAASgR,EAAO,EAInDtI,EAAiBoH,IACrBoB,GAAAA,EAAaC,QACX,uBACA,OACA,CACEC,kBAAmB,OACnBC,iBAAkB,KAClB9b,KAAM,YAGP+b,MAAKvS,UACJ,UACQa,GAAY2R,OAAO,GAAG1R,EAAU7J,UAAUK,gBAAgByZ,EAAOhc,MACvEqE,EAAAA,GAAU+I,QAAQ,iBACZ0P,GACR,CAAE,MAAO1Y,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,aAClB,KAEDsZ,OAAM,KACLrZ,EAAAA,GAAUsZ,KAAK,QAAQ,GACvB,EAIAzL,EAAcjH,UAClB,IAEE0Q,EAAK1V,MAAQ,QAGP6W,IAENzY,EAAAA,GAAU+I,QAAQ,UACpB,CAAE,MAAOhJ,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,SAClB,GAII+N,EAAclH,UAClBoG,EAAWS,UAAY,KACvBT,EAAWxL,YAAc,KACzBwL,EAAWW,YAAc,KACzBX,EAAWY,YAAc,KACzBZ,EAAWlL,SAAW,GAGtBwV,EAAK1V,MAAQ,QAGP6W,IAENzY,EAAAA,GAAU+I,QAAQ,UAAU,EAIxB2D,EAAgB9F,UACpB,UAEQmS,GAAAA,EAAaC,QACjB,UACA,OACA,CACEC,kBAAmB,QACnBC,iBAAkB,SAClBK,2BAA2B,EAC3Bnc,KAAM,SAER+b,MAAKvS,gBAEC4S,GAAkB,IACvBH,OAAM9V,IACQ,WAAXA,GAEFkW,GACF,GAEJ,CAAE,MAAO1Z,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,UAAYA,EAAM0G,SAAW,QAC/C,GAII+S,EAAmB5S,UACvB,KAEE5G,EAAAA,EAAAA,IAAU,CACRyG,QAAS,0BACTrJ,KAAM,OACNsc,SAAU,MAIZ,MAAMC,EAAkBC,GAAAA,GAAUC,QAAQ,CACxCC,MAAM,EACNxJ,KAAM,gBACNyJ,WAAY,uBAId1a,EAAQuC,OAAQ,EAGhB,MAAMoY,EAAc,CAClBxY,YAAawL,EAAWxL,YAAcwL,EAAWxL,iBAAc8E,EAC/DqH,YAAaX,EAAWW,YAAcX,EAAWW,iBAAcrH,EAC/DsH,YAAaZ,EAAWY,YAAcZ,EAAWY,iBAActH,EAC/DxE,SAAUkL,EAAWlL,eAAYwE,EACjCmH,UAAWT,EAAWS,UAAY2J,KAAK6C,UAAUjN,EAAWS,gBAAanH,EACzEkF,OAAQlG,EAAMkG,OAAS3D,SAASvC,EAAMkG,aAAUlF,GAGlD7G,QAAQC,IAAI,aAAcsa,GAG1B,MAAM,KAAE5a,SAAeQ,EAAAA,EAAMC,IAC3B,GAAG6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUS,uBAAuB9B,GAAKC,MAAMO,KAAKrB,KAC/E,CAAEwE,OAAQ6Z,IAKZ,GAFAva,QAAQC,IAAI,UAAUN,EAAKqM,kBAEP,IAAhBrM,EAAKqM,OAIP,OAHAkO,EAAgBO,QAChBla,EAAAA,GAAUkK,QAAQ,qBAClB7K,EAAQuC,OAAQ,GAKlB+X,EAAgBQ,QAAQ,QAAQ/a,EAAKqM,iBAGrC,MAAM2O,EAAahb,EAAK+T,KAAIwE,IAE1B,MAAM0C,EAAelL,EAAewI,EAAO1I,mBACrCqL,EAAcnL,EAAewI,EAAO9H,kBAE1C,MAAO,CACL,KAAM8H,EAAO1a,UACb,OAAQ0a,EAAO4C,gBACf,OAAQ5C,EAAO7V,SACf,SAAU6V,EAAOjV,SACjB,SAAUiM,EAAuBgJ,EAAO9I,uBACxC,MAAO8I,EAAOpM,cAAgB,KAC9B,QAAS8O,EAAa5O,OAAS,EAAI4O,EAAa,GAAK,GACrD,QAASC,EAAY7O,OAAS,EAAI6O,EAAY,GAAK,GACpD,IAIGrR,EAAW,UAAUpI,EAASe,MAAQf,EAASe,MAAQ,SAGvDoQ,EAAU,CACd,CAAE1B,KAAM,KAAM+C,MAAO,MACrB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,MAAO+C,MAAO,OACtB,CAAE/C,KAAM,QAAS+C,MAAO,QAASrL,SAAS,GAC1C,CAAEsI,KAAM,QAAS+C,MAAO,QAASrL,SAAS,IAItCwH,EAAUmC,OAAO7P,SAAS8P,OAG1BW,EAAaA,CAACiI,EAAS5P,KAC3B,MAAM6P,EAAUlR,KAAKC,MAAOgR,EAAU5P,EAAS,KAC/C+O,EAAgBQ,QAAQ,QAAQM,OAAaD,KAAW5P,KAAS,EAI7D5B,QAAesJ,GAAwB8H,EAAYnR,EAAU+I,EAASxC,EAAS+C,GAGrFoH,EAAgBO,QAEZlR,EACFhJ,EAAAA,GAAU+I,QAAQ,QAElB/I,EAAAA,GAAUD,MAAM,WAEpB,CAAE,MAAOA,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,UAAYA,EAAM0G,SAAW,QAC/C,CAAE,QACApH,EAAQuC,OAAQ,EAEhBgY,GAAAA,GAAUC,UAAUK,OACtB,GAIIT,EAAsB7S,UAC1B,IAEE,MAAM+S,EAAkBC,GAAAA,GAAUC,QAAQ,CACxCC,MAAM,EACNxJ,KAAM,gBACNyJ,WAAY,uBAId1a,EAAQuC,OAAQ,EAGhB,MAAMoY,EAAc,CAClBxY,YAAawL,EAAWxL,YAAcwL,EAAWxL,iBAAc8E,EAC/DqH,YAAaX,EAAWW,YAAcX,EAAWW,iBAAcrH,EAC/DsH,YAAaZ,EAAWY,YAAcZ,EAAWY,iBAActH,EAC/DxE,SAAUkL,EAAWlL,eAAYwE,EACjCmH,UAAWT,EAAWS,UAAY2J,KAAK6C,UAAUjN,EAAWS,gBAAanH,EACzEkF,OAAQlG,EAAMkG,OAAS3D,SAASvC,EAAMkG,aAAUlF,IAI5C,KAAElH,SAAeQ,EAAAA,EAAMC,IAC3B,GAAG6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUS,uBAAuB9B,GAAKC,MAAMO,KAAKrB,KAC/E,CAAEwE,OAAQ6Z,IAGZ,GAAoB,IAAhB5a,EAAKqM,OAIP,OAHAkO,EAAgBO,QAChBla,EAAAA,GAAUkK,QAAQ,qBAClB7K,EAAQuC,OAAQ,GAKlB+X,EAAgBQ,QAAQ,QAAQ/a,EAAKqM,iBAGrC,MAAM2O,EAAahb,EAAK+T,KAAIwE,IAAK,CAC/B,KAAMA,EAAO1a,UACb,OAAQ0a,EAAO4C,gBACf,OAAQ5C,EAAO7V,SACf,SAAU6V,EAAOjV,SACjB,SAAUiM,EAAuBgJ,EAAO9I,uBACxC,MAAO8I,EAAOpM,cAAgB,KAC9B,QAASoM,EAAO1I,kBAAoB,IAAM,IAC1C,QAAS0I,EAAO9H,iBAAmB,IAAM,QAIrC5G,EAAW,UAAUpI,EAASe,MAAQf,EAASe,MAAQ,SAGvDoQ,EAAU,CACd,CAAE1B,KAAM,KAAM+C,MAAO,MACrB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,MAAO+C,MAAO,OACtB,CAAE/C,KAAM,QAAS+C,MAAO,SACxB,CAAE/C,KAAM,QAAS+C,MAAO,UAIpBrK,QAAegN,GAAcoE,EAAYnR,EAAU+I,GAGzD2H,EAAgBO,QAEZlR,EACFhJ,EAAAA,GAAU+I,QAAQ,QAElB/I,EAAAA,GAAUD,MAAM,WAEpB,CAAE,MAAOA,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,UAAYA,EAAM0G,SAAW,QAC/C,CAAE,QACApH,EAAQuC,OAAQ,EAEhBgY,GAAAA,GAAUC,UAAUK,OACtB,GAIInJ,GAAahQ,EAAAA,EAAAA,KAAI,GACjBkQ,GAAgBlQ,EAAAA,EAAAA,IAAI,IACpBmQ,GAAenQ,EAAAA,EAAAA,IAAI,GAGnBsO,EAAeA,CAACqL,EAAO/O,KAE3B,MAAMgP,EAAalD,MAAMC,QAAQgD,GAASA,EAAQ,CAACA,GACnDzJ,EAAcrP,MAAQ+Y,EAAWxH,KAAI/D,GAAQ,GAAGI,IAAUJ,MAC1D8B,EAAatP,MAAQ+J,GAAS,EAC9BoF,EAAWnP,OAAQ,CAAI,EAInBwP,EAAcA,KAClBL,EAAWnP,OAAQ,CAAK,GAG1B+E,EAAAA,EAAAA,KAAUC,gBACFU,UACAC,UACAkR,GAAc,IAItB,MAAMlR,EAAkBX,UACtB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUI,YAC3DA,EAAW2D,MAAQjC,EAASP,IAC9B,CAAE,MAAOW,GACPN,QAAQM,MAAM,8BAA+BA,GAC7CC,EAAAA,GAAUD,MAAM,aAClB,GAGIuH,EAAgBV,UACpB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUG,OACrDa,EAAOc,EAASP,KAAKuI,MAAKC,GAAKA,EAAEjM,KAAOkM,SAASvC,EAAMkG,UACzD3M,IACFgC,EAASe,MAAQ/C,EAAKM,KAE1B,CAAE,MAAOY,GACPN,QAAQM,MAAM,4BAA6BA,GAC3CC,EAAAA,GAAUD,MAAM,WAClB,GAGI0Y,EAAe7R,MAAOgU,GAAa,KAClCA,EAKHpK,EAAY5O,OAAQ,GAJpBvC,EAAQuC,OAAQ,EAChB0V,EAAK1V,MAAQ,EACb+O,EAAQ/O,MAAQ,IAKlB,IAEE,MAAMzB,EAAS,CACbmX,KAAMA,EAAK1V,MACX2V,SAAUA,EAAS3V,OAIjBoL,EAAWxL,cAAarB,EAAOqB,YAAcwL,EAAWxL,aAC7B,OAA3BwL,EAAWW,cAAsBxN,EAAOwN,YAAcX,EAAWW,aACtC,OAA3BX,EAAWY,cAAsBzN,EAAOyN,YAAcZ,EAAWY,aACjEZ,EAAWlL,WAAU3B,EAAO2B,SAAWkL,EAAWlL,UAClDkL,EAAWS,WAA6C,IAAhCT,EAAWS,UAAUhC,SAC/CtL,EAAOsN,UAAY2J,KAAK6C,UAAUjN,EAAWS,YAI/C,MAAMoL,EAASrc,GAAKsc,YACpB,IAAKD,EACH,MAAM,IAAI3G,MAAM,SAIlB,MAAMvS,QAAiB8H,GAAY5H,IAAI,GAAG6H,EAAU7J,UAAUQ,sBAAsBwa,IAAU,CAAE1Y,WAG5FR,EAASP,MAAQqY,MAAMC,QAAQ/X,EAASP,KAAKuR,UAE7CA,EAAQ/O,MADNgZ,EACc,IAAIjK,EAAQ/O,SAAUjC,EAASP,KAAKuR,SAEpChR,EAASP,KAAKuR,QAGhC6G,EAAQ5V,QAAUjC,EAASP,KAAKoY,UAEhC/X,QAAQM,MAAM,2BAA4BJ,EAASP,MACnDuR,EAAQ/O,MAAQ,GAChB4V,EAAQ5V,OAAQ,EAChB5B,EAAAA,GAAUD,MAAM,mBAEpB,CAAE,MAAOA,GACPN,QAAQM,MAAM,0BAA2BA,GACzC4Q,EAAQ/O,MAAQ,GAChB4V,EAAQ5V,OAAQ,EAChB5B,EAAAA,GAAUD,MAAM,WAClB,CAAE,QACAV,EAAQuC,OAAQ,EAChB4O,EAAY5O,OAAQ,CACtB,GAII4M,EAAe5H,UAEnB,IAAKiU,IAAMA,EAAE9O,OAAQ,OAErB,MAAM+O,EAAeD,EAAE9O,OAAO+O,cAAgB,EACxCC,EAAYF,EAAE9O,OAAOgP,WAAa,EAClCC,EAAeH,EAAE9O,OAAOiP,cAAgB,EAG1CF,EAAeC,EAAYC,EAAe,IAAMxD,EAAQ5V,QAAU4O,EAAY5O,QAChF0V,EAAK1V,cACC6W,GAAa,GACrB,EAGF,MAAO,CACL9H,UACAxC,kBACA9O,UACAwB,WACA5C,aACAoC,UACAgM,cACAsC,yBACAnC,iBACAjM,SACA2L,SACAI,qBACAF,eACAiE,aACAD,UACAG,gBACA7I,UAAS,EAETmF,kBACAG,aACAa,cACAC,cAEApB,gBAEAqE,aACAE,gBACAC,eACA7B,eACA+B,cACA5C,eAEAW,iBACAK,UAEA8H,OACAC,WACAC,UACAhH,cAEJ,GE14BF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROlU,MAAM,mB,IACJA,MAAM,c,IAFfJ,IAAA,EAyDmCI,MAAM,e,+NAxDvCV,EAAAA,EAAAA,IA4DM,MA5DNC,GA4DM,EA3DJU,EAAAA,EAAAA,IA0DM,MA1DNI,GA0DM,cAzDJJ,EAAAA,EAAAA,IAGM,OAHDD,MAAM,gBAAc,EACvBC,EAAAA,EAAAA,IAAiB,UAAb,aACJA,EAAAA,EAAAA,IAAa,UAAT,UAAI,KAGVH,EAAAA,EAAAA,IA+CU0E,EAAA,CA9CRC,IAAI,YACHC,MAAOlF,EAAAmF,KACPC,MAAOpF,EAAAoF,MACR,cAAY,OACZ5E,MAAM,aACL2e,UAdTC,EAAAA,EAAAA,IAcyBpf,EAAAsI,WAAU,c,CAdnC7G,SAAAC,EAAAA,EAAAA,KAgBQ,IAKe,EALfpB,EAAAA,EAAAA,IAKe+E,EAAA,CALDC,MAAM,MAAMC,KAAK,S,CAhBvC9D,SAAAC,EAAAA,EAAAA,KAiBU,IAGE,EAHFpB,EAAAA,EAAAA,IAGEyF,EAAA,CApBZN,WAkBqBzF,EAAAmF,KAAKoK,MAlB1B,sBAAA5N,EAAA,KAAAA,EAAA,GAAAuB,GAkBqBlD,EAAAmF,KAAKoK,MAAKrM,GACnByC,YAAY,U,0BAnBxB/D,EAAA,KAuBQtB,EAAAA,EAAAA,IAOe+E,EAAA,CAPDC,MAAM,KAAKC,KAAK,Y,CAvBtC9D,SAAAC,EAAAA,EAAAA,KAwBU,IAKE,EALFpB,EAAAA,EAAAA,IAKEyF,EAAA,CA7BZN,WAyBqBzF,EAAAmF,KAAKka,SAzB1B,sBAAA1d,EAAA,KAAAA,EAAA,GAAAuB,GAyBqBlD,EAAAmF,KAAKka,SAAQnc,GACtB5B,KAAK,WACLqE,YAAY,QACZ,oB,0BA5BZ/D,EAAA,KAgCQtB,EAAAA,EAAAA,IAMe+E,EAAA,MAtCvB5D,SAAAC,EAAAA,EAAAA,KAiCU,IAIiB,EAJjBpB,EAAAA,EAAAA,IAIiBgf,EAAA,CArC3B7Z,WAiCmCzF,EAAAmF,KAAKoa,SAjCxC,sBAAA5d,EAAA,KAAAA,EAAA,GAAAuB,GAiCmClD,EAAAmF,KAAKoa,SAAQrc,GAAGsc,SAAQxf,EAAAyf,sB,CAjC3Dhe,SAAAC,EAAAA,EAAAA,KAkCY,IAAkC,EAAlCpB,EAAAA,EAAAA,IAAkCof,EAAA,CAAvBpa,MAAO,GAAC,CAlC/B7D,SAAAC,EAAAA,EAAAA,KAkCiC,IAAEC,EAAA,KAAAA,EAAA,KAlCnCZ,EAAAA,EAAAA,IAkCiC,UAlCjCa,EAAA,KAmCYtB,EAAAA,EAAAA,IAAqCof,EAAA,CAA1Bpa,MAAO,GAAC,CAnC/B7D,SAAAC,EAAAA,EAAAA,KAmCiC,IAAKC,EAAA,KAAAA,EAAA,KAnCtCZ,EAAAA,EAAAA,IAmCiC,aAnCjCa,EAAA,KAoCYtB,EAAAA,EAAAA,IAAqCof,EAAA,CAA1Bpa,MAAO,GAAC,CApC/B7D,SAAAC,EAAAA,EAAAA,KAoCiC,IAAKC,EAAA,KAAAA,EAAA,KApCtCZ,EAAAA,EAAAA,IAoCiC,aApCjCa,EAAA,OAAAA,EAAA,G,gCAAAA,EAAA,KAwCQtB,EAAAA,EAAAA,IAEe+E,EAAA,MA1CvB5D,SAAAC,EAAAA,EAAAA,KAyCU,IAAyD,EAAzDpB,EAAAA,EAAAA,IAAyDqf,EAAA,CAzCnEla,WAyCgCzF,EAAAmF,KAAKya,WAzCrC,sBAAAje,EAAA,KAAAA,EAAA,GAAAuB,GAyCgClD,EAAAmF,KAAKya,WAAU1c,I,CAzC/CzB,SAAAC,EAAAA,EAAAA,KAyCiD,IAAIC,EAAA,KAAAA,EAAA,KAzCrDZ,EAAAA,EAAAA,IAyCiD,YAzCjDa,EAAA,G,qBAAAA,EAAA,KA4CQtB,EAAAA,EAAAA,IAUe+E,EAAA,MAtDvB5D,SAAAC,EAAAA,EAAAA,KA6CU,IAQY,EARZpB,EAAAA,EAAAA,IAQYe,EAAA,CAPVC,KAAK,UACL,cAAY,SACXC,QAAOvB,EAAAsI,WACP/E,QAASvD,EAAAU,KAAKC,MAAM4C,QACrBqC,MAAA,gB,CAlDZnE,SAAAC,EAAAA,EAAAA,KAmDW,IAEDC,EAAA,KAAAA,EAAA,KArDVZ,EAAAA,EAAAA,IAmDW,YAnDXa,EAAA,G,4BAAAA,EAAA,OAAAA,EAAA,G,gCAyDiB5B,EAAAU,KAAKC,MAAMsD,QAAK,WAA3BnE,EAAAA,EAAAA,IAEM,MAFNgB,IAEME,EAAAA,EAAAA,IADDhB,EAAAU,KAAKC,MAAMsD,OAAK,KA1D3B5D,EAAAA,EAAAA,IAAA,U,CAuEA,QACEgD,KAAM,YACNuG,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MACT+V,GAAY5a,EAAAA,EAAAA,IAAI,MAEhBE,GAAOiF,EAAAA,EAAAA,IAAS,CACpBmF,MAAO,GACP8P,SAAU,GACVE,SAAU,EACVK,YAAY,IAIRE,GAAe5V,EAAAA,EAAAA,KAAS,KAAM,IAG9B9E,GAAQ8E,EAAAA,EAAAA,KAAS,KACrB,MAAM6V,EAAa,CACjB,CAAEpW,UAAU,EAAMgB,QAAS,SAAUC,QAAS,UAC9C,CAAEoV,QAAS,gBAAiBrV,QAAS,cAAeC,QAAS,WAGzDqV,EAAgB,CACpB,CAAEtW,UAAU,EAAMgB,QAAS,QAASC,QAAS,WAG/C,MAAO,CACL2E,MAAOwQ,EACPV,SAAUY,EACX,IAIGR,EAAuBA,KACvBI,EAAU/Z,OACZ+Z,EAAU/Z,MAAMoa,eAClB,EAII5X,EAAawC,UACjBnH,QAAQC,IAAI,WACPic,EAAU/Z,MAMXpF,GAAKC,MAAM4C,QACbI,QAAQC,IAAI,eAKdD,QAAQC,IAAI,QACZic,EAAU/Z,MAAMkJ,UAASlE,UACnBmE,GACFtL,QAAQC,IAAI,gBACNuc,KAENxc,QAAQC,IAAI,SACd,KAlBAD,QAAQC,IAAI,UAmBZ,EAIEuc,EAAUrV,UACdnH,QAAQC,IAAI,WAAYuB,EAAKoK,MAAO,QAASpK,EAAKoa,UAClD,IAEE5b,QAAQC,IAAI,eAGZ,MAAMsJ,QAAexM,GAAKsB,MACxBmD,EAAKoK,MACLpK,EAAKka,SACLla,EAAKya,WACLza,EAAKoa,UAKP,GAFA5b,QAAQC,IAAI,QAASsJ,GAEjBA,EAAOD,QAAS,CAClB,MAAM/L,EAAOgM,EAAOhM,KAEpBgD,EAAAA,GAAU+I,QAAQ,MAAM/L,EAAKoO,UAAYpO,EAAKqO,SAGzB,IAAjBrO,EAAKiJ,QAEPN,EAAOzF,KAAK,kBACc,IAAjBlD,EAAKiJ,QAEdN,EAAOzF,KAAK,YAAYlD,EAAK4b,WAG7BjT,EAAOzF,KAAK,SAASlD,EAAK4b,UAE9B,MAEE5Y,EAAAA,GAAUD,MAAMiJ,EAAOjJ,OAAS,OAEpC,CAAE,MAAOA,GAEPC,EAAAA,GAAUD,MAAMA,EAAMJ,UAAUP,MAAMW,OAAS,eACjD,GAiBF,OAbA4G,EAAAA,EAAAA,KAAU,KACR,GAAInK,GAAKC,MAAMC,WAAY,CACzB,MAAMM,EAAOR,GAAKC,MAAMO,KACH,IAAjBA,EAAKiJ,QACPN,EAAOzF,KAAK,kBACc,IAAjBlD,EAAKiJ,QACdN,EAAOzF,KAAK,YAAYlD,EAAK4b,WAE7BjT,EAAOzF,KAAK,SAASlD,EAAK4b,UAE9B,KAGK,CACL3X,OACAC,QACAya,YACAC,eACAL,uBACAnX,aACA5H,KAAIA,GAER,GCpMF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROF,MAAM,yB,IACJA,MAAM,U,IAQNA,MAAM,W,IACJA,MAAM,e,IAXjBJ,IAAA,EAwFeI,MAAM,kB,GAxFrB,Q,GAAA,Q,IAyLWA,MAAM,mB,IAONA,MAAM,iB,6jBA/LfV,EAAAA,EAAAA,IAsMM,MAtMNC,GAsMM,EArMJU,EAAAA,EAAAA,IAMM,MANNI,GAMM,EALJJ,EAAAA,EAAAA,IAEM,OAFDD,MAAM,cAAee,QAAKI,EAAA,KAAAA,EAAA,OAAA6C,IAAExE,EAAAyE,QAAAzE,EAAAyE,UAAAD,K,EAC/BlE,EAAAA,EAAAA,IAAiCoE,EAAA,MAJzCjD,SAAAC,EAAAA,EAAAA,KAIiB,IAAc,EAAdpB,EAAAA,EAAAA,IAAcqE,MAJ/B/C,EAAA,I,aAAAb,EAAAA,EAAAA,IAIyC,YAEnCN,EAAAA,EAAAA,IAA0C,WAAAO,EAAAA,EAAAA,IAAnChB,EAAAogB,MAAQ,SAAW,UAAd,gBACZ3f,EAAAA,EAAAA,IAAW,wBAGbA,EAAAA,EAAAA,IAoKM,MApKNK,GAoKM,EAnKJL,EAAAA,EAAAA,IAEM,MAFNW,GAEM,EADJX,EAAAA,EAAAA,IAAuB,WAAAO,EAAAA,EAAAA,IAAhBhB,EAAA+E,UAAQ,2BAGjB7E,EAAAA,EAAAA,IA8JU8E,EAAA,CA7JRC,IAAI,aACHC,MAAOlF,EAAAmF,KACPC,MAAOpF,EAAAoF,MACR,cAAY,QACZ5E,MAAM,e,CApBdiB,SAAAC,EAAAA,EAAAA,KAwBQ,IASe,CAT8B1B,EAAAqgB,cAAgBrgB,EAAAogB,QAAK,WAAlElgB,EAAAA,EAAAA,IASemF,EAAA,CAjCvBjF,IAAA,EAwBsBkF,MAAM,KAAKC,KAAK,U,CAxBtC9D,SAAAC,EAAAA,EAAAA,KAyBU,IAOY,EAPZpB,EAAAA,EAAAA,IAOYkF,EAAA,CAhCtBC,WAyB8BzF,EAAAmF,KAAKuK,OAzBnC,sBAAA/N,EAAA,KAAAA,EAAA,GAAAuB,GAyB8BlD,EAAAmF,KAAKuK,OAAMxM,GAAEyC,YAAY,QAAQC,MAAA,gB,CAzB/DnE,SAAAC,EAAAA,EAAAA,KA2Bc,IAAqB,gBADvB5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MA/BdC,EAAAA,EAAAA,IA2B6B7C,EAAAkC,OAARa,K,WADT7C,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAK2C,EAAKlD,GACVyF,MAAOvC,EAAKM,KACZyC,MAAO/C,EAAKlD,I,sCA9B3B+B,EAAA,G,qBAAAA,EAAA,MAAAvB,EAAAA,EAAAA,IAAA,QAmCQC,EAAAA,EAAAA,IASe+E,EAAA,CATDC,MAAM,OAAOC,KAAK,e,CAnCxC9D,SAAAC,EAAAA,EAAAA,KAoCU,IAOY,EAPZpB,EAAAA,EAAAA,IAOYkF,EAAA,CA3CtBC,WAoC8BzF,EAAAmF,KAAKO,YApCnC,sBAAA/D,EAAA,KAAAA,EAAA,GAAAuB,GAoC8BlD,EAAAmF,KAAKO,YAAWxC,GAAEyC,YAAY,UAAUC,MAAA,gB,CApCtEnE,SAAAC,EAAAA,EAAAA,KAsCc,IAA0B,gBAD5B5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MA1CdC,EAAAA,EAAAA,IAsC6B7C,EAAAmC,YAARb,K,WADTpB,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAKkB,EAAKzB,GACVyF,MAAOhE,EAAK+B,KACZyC,MAAOxE,EAAKzB,I,sCAzC3B+B,EAAA,G,qBAAAA,EAAA,KA8CQtB,EAAAA,EAAAA,IAEe+E,EAAA,CAFDC,MAAM,OAAOC,KAAK,Y,CA9CxC9D,SAAAC,EAAAA,EAAAA,KA+CU,IAA4D,EAA5DpB,EAAAA,EAAAA,IAA4DyF,EAAA,CA/CtEN,WA+C6BzF,EAAAmF,KAAKa,SA/ClC,sBAAArE,EAAA,KAAAA,EAAA,GAAAuB,GA+C6BlD,EAAAmF,KAAKa,SAAQ9C,GAAEyC,YAAY,a,0BA/CxD/D,EAAA,KAkDQtB,EAAAA,EAAAA,IASe+E,EAAA,CATDC,MAAM,QAAM,CAlDlC7D,SAAAC,EAAAA,EAAAA,KAmDU,IAOE,EAPFpB,EAAAA,EAAAA,IAOE4F,EAAA,CA1DZT,WAoDqBzF,EAAAmF,KAAKgB,eApD1B,sBAAAxE,EAAA,KAAAA,EAAA,GAAAuB,GAoDqBlD,EAAAmF,KAAKgB,eAAcjD,GAC5B5B,KAAK,OACLqE,YAAY,OACZS,OAAO,aACP,eAAa,aACbR,MAAA,gB,0BAzDZhE,EAAA,KA6DQtB,EAAAA,EAAAA,IAae+E,EAAA,CAbDC,MAAM,QAAM,CA7DlC7D,SAAAC,EAAAA,EAAAA,KA8DU,IAUiB,EAVjBpB,EAAAA,EAAAA,IAUiBiG,EAAA,CAxE3Bd,WA+DqBzF,EAAAmF,KAAKqB,eA/D1B,sBAAA7E,EAAA,KAAAA,EAAA,GAAAuB,GA+DqBlD,EAAAmF,KAAKqB,eAActD,GAC5BkD,OAAO,QACPT,YAAY,OACZ,eAAa,QACbC,MAAA,gB,CAEWa,QAAM/E,EAAAA,EAAAA,KACf,IAA4B,EAA5BpB,EAAAA,EAAAA,IAA4BoE,EAAA,MAtE1CjD,SAAAC,EAAAA,EAAAA,KAsEuB,IAAS,EAATpB,EAAAA,EAAAA,IAASoG,MAtEhC9E,EAAA,OAAAA,EAAA,G,qBAAAA,EAAA,KA4EQtB,EAAAA,EAAAA,IAQe+E,EAAA,CARDC,MAAM,UAAUC,KAAK,Y,CA5E3C9D,SAAAC,EAAAA,EAAAA,KA6EU,IAME,EANFpB,EAAAA,EAAAA,IAMEqG,EAAA,CAnFZlB,WA8EqBzF,EAAAmF,KAAKyB,SA9E1B,sBAAAjF,EAAA,KAAAA,EAAA,GAAAuB,GA8EqBlD,EAAAmF,KAAKyB,SAAQ1D,GACrB2D,IAAK,EACLC,UAAW,EACXC,KAAM,KACPnB,MAAA,gB,0BAlFZhE,EAAA,KAsFQtB,EAAAA,EAAAA,IA0Be+E,EAAA,CA1BDC,MAAM,YAAYC,KAAK,qB,CAtF7C9D,SAAAC,EAAAA,EAAAA,KAuFU,IAAgD,gBAAhDjB,EAAAA,EAAAA,IAAgD,OAA3CD,MAAM,aAAY,uBAAmB,IACRR,EAAAmH,uBAAoB,WAAtDrH,EAAAA,EAAAA,IAOM,MAPNgF,GAOM,EANJxE,EAAAA,EAAAA,IAKE+G,EAAA,CAJAC,MAAM,yBACNhG,KAAK,UACJiG,UAAU,EACX,qBA7FdlH,EAAAA,EAAAA,IAAA,QAgGUC,EAAAA,EAAAA,IAeYkH,EAAA,CAdVhH,MAAM,uBACNiH,OAAO,IACN,eAAa,EACb,YAAWzH,EAAA0H,wBACX,YAAW1H,EAAA2H,wBACX,YAAW3H,EAAA4H,eACXC,MAAO,EACRC,SAAA,GACA,YAAU,eACT,aAAY9H,EAAAsgB,yBACZ,gBAAetgB,EAAA+H,mBAChBC,OAAO,iG,CA5GnBvG,SAAAC,EAAAA,EAAAA,KA8GY,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MA9GvCjD,SAAAC,EAAAA,EAAAA,KA8GqB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MA9G7BrG,EAAA,OAAAA,EAAA,G,yEAAAA,EAAA,KAkHQtB,EAAAA,EAAAA,IA0Be+E,EAAA,CA1BDC,MAAM,YAAYC,KAAK,oB,CAlH7C9D,SAAAC,EAAAA,EAAAA,KAmHU,IAAgD,gBAAhDjB,EAAAA,EAAAA,IAAgD,OAA3CD,MAAM,aAAY,uBAAmB,KAC1CF,EAAAA,EAAAA,IAeYkH,EAAA,CAdVhH,MAAM,uBACNiH,OAAO,IACN,eAAa,EACb,YAAWzH,EAAAkI,uBACX,YAAWlI,EAAAmI,uBACX,YAAWnI,EAAAoI,cACXP,MAAO,EACRC,SAAA,GACA,YAAU,eACT,aAAY9H,EAAAsgB,yBACZ,gBAAetgB,EAAA+H,mBAChBC,OAAO,iG,CAhInBvG,SAAAC,EAAAA,EAAAA,KAkIY,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MAlIvCjD,SAAAC,EAAAA,EAAAA,KAkIqB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MAlI7BrG,EAAA,OAAAA,EAAA,G,sEAuIkB5B,EAAAiV,aAAU,WADlB/U,EAAAA,EAAAA,IAKEgV,EAAA,CA3IZ9U,IAAA,EAwIa,WAAUJ,EAAAmV,cACV,gBAAenV,EAAAoV,aACfC,QAAOrV,EAAAsV,a,iDA1IpBjV,EAAAA,EAAAA,IAAA,UAAAuB,EAAA,KA8IQtB,EAAAA,EAAAA,IAGe+E,EAAA,MAjJvB5D,SAAAC,EAAAA,EAAAA,KA+IU,IAA+E,EAA/EpB,EAAAA,EAAAA,IAA+Ee,EAAA,CAApEC,KAAK,UAAWC,QAAOvB,EAAAsI,WAAa/E,QAASvD,EAAAuD,S,CA/IlE9B,SAAAC,EAAAA,EAAAA,KA+I2E,IAAEC,EAAA,MAAAA,EAAA,MA/I7EZ,EAAAA,EAAAA,IA+I2E,UA/I3Ea,EAAA,G,0BAgJUtB,EAAAA,EAAAA,IAAyCe,EAAA,CAA7BE,QAAOvB,EAAAyE,QAAM,CAhJnChD,SAAAC,EAAAA,EAAAA,KAgJqC,IAAEC,EAAA,MAAAA,EAAA,MAhJvCZ,EAAAA,EAAAA,IAgJqC,UAhJrCa,EAAA,G,kBAAAA,EAAA,IAoJ4B5B,EAAAogB,OApJ5B/f,EAAAA,EAAAA,IAAA,SAoJiC,WAAzBH,EAAAA,EAAAA,IAwBcqgB,EAAA,CA5KtBngB,IAAA,IAAAqB,SAAAC,EAAAA,EAAAA,KAqJU,IAsBmB,EAtBnBpB,EAAAA,EAAAA,IAsBmBkgB,EAAA,CAtBDlZ,MAAM,QAAM,CArJxC7F,SAAAC,EAAAA,EAAAA,KAsJY,IAoBM,EApBNjB,EAAAA,EAAAA,IAoBM,2BAnBJA,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,mBACZX,EAAAA,EAAAA,IAOM8C,EAAAA,GAAA,MA/JpBC,EAAAA,EAAAA,IAwJ2C7C,EAAA4H,gBAxJ3C,CAwJ2BoE,EAAM6D,M,WAAnB/P,EAAAA,EAAAA,IAOM,OAPwCM,IAAG,UAAYyP,G,EAC3DpP,EAAAA,EAAAA,IAA8B,WAAzB,QAAIO,EAAAA,EAAAA,IAAGgL,EAAK3I,MAAI,IACrB5C,EAAAA,EAAAA,IAA8B,WAAzB,SAAKO,EAAAA,EAAAA,IAAGgL,EAAKqC,KAAG,IACrB5N,EAAAA,EAAAA,IAEM,aADJA,EAAAA,EAAAA,IAAoE,OAA9DgT,IAAKzH,EAAKqC,IAAKzI,MAAA,4C,OA5JvCK,MAAA,eA8JgBxF,EAAAA,EAAAA,IAAM,yB,qBAGRA,EAAAA,EAAAA,IAAiB,UAAb,YAAQ,mBACZX,EAAAA,EAAAA,IAOM8C,EAAAA,GAAA,MAzKpBC,EAAAA,EAAAA,IAkK2C7C,EAAAoI,eAlK3C,CAkK2B4D,EAAM6D,M,WAAnB/P,EAAAA,EAAAA,IAOM,OAPuCM,IAAG,SAAWyP,G,EACzDpP,EAAAA,EAAAA,IAA8B,WAAzB,QAAIO,EAAAA,EAAAA,IAAGgL,EAAK3I,MAAI,IACrB5C,EAAAA,EAAAA,IAA8B,WAAzB,SAAKO,EAAAA,EAAAA,IAAGgL,EAAKqC,KAAG,IACrB5N,EAAAA,EAAAA,IAEM,aADJA,EAAAA,EAAAA,IAAoE,OAA9DgT,IAAKzH,EAAKqC,IAAKzI,MAAA,4C,OAtKvCwB,MAAA,eAwKgB3G,EAAAA,EAAAA,IAAM,yB,WAxKtBmB,EAAA,OAAAA,EAAA,QAAAA,EAAA,G,0BAqBmB5B,EAAAuD,cA4JfjD,EAAAA,EAAAA,IAiBYkI,EAAA,CAlMhB/C,WAkLezF,EAAAyI,mBAlLf,sBAAA9G,EAAA,KAAAA,EAAA,GAAAuB,GAkLelD,EAAAyI,mBAAkBvF,GAC3BoE,MAAM,SACNoB,MAAM,MACL,wBAAsB,EACtB,yBAAuB,EACvB,cAAY,G,CAvLnBjH,SAAAC,EAAAA,EAAAA,KAyLM,IAQM,EARNjB,EAAAA,EAAAA,IAQM,MARN4H,GAQM,gBAPJ5H,EAAAA,EAAAA,IAAuB,SAApB,oBAAgB,KACnBH,EAAAA,EAAAA,IAIesI,EAAA,CAHZC,WAAY7I,EAAA8I,iBACZ1C,OAAQpG,EAAA+I,iBACRC,OAA6B,MAArBhJ,EAAA8I,iBAA2B,UAAY,I,0CAElDrI,EAAAA,EAAAA,IAA+C,IAA/CkI,IAA+C3H,EAAAA,EAAAA,IAAnBhB,EAAAkJ,cAAY,QAhMhDtH,EAAA,G,iCAoMInB,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAA2B,SAAxB,qBAAoB,K,CAe7B,QACE4C,KAAM,iBACN8F,WAAY,CACVC,UAAS,MACTE,KAAI,MACJC,MAAK,MACL4R,cAAaA,GAAAA,IAEfvR,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MACT2W,GAAQC,EAAAA,EAAAA,MACRC,GAAa1b,EAAAA,EAAAA,IAAI,MACjB1B,GAAU0B,EAAAA,EAAAA,KAAI,GACd2b,GAAa3b,EAAAA,EAAAA,KAAI,GACjBF,GAAWE,EAAAA,EAAAA,IAAI,IACf9C,GAAa8C,EAAAA,EAAAA,IAAI,IACjB/C,GAAQ+C,EAAAA,EAAAA,IAAI,IACZ2C,GAAiB3C,EAAAA,EAAAA,IAAI,IACrBmD,GAAgBnD,EAAAA,EAAAA,IAAI,IACpBkQ,GAAgBlQ,EAAAA,EAAAA,IAAI,IACpBgQ,GAAahQ,EAAAA,EAAAA,KAAI,GACjBmQ,GAAenQ,EAAAA,EAAAA,IAAI,GACnB4b,GAAY5b,EAAAA,EAAAA,IAAI,IAChBwD,GAAqBxD,EAAAA,EAAAA,KAAI,GACzB6D,GAAmB7D,EAAAA,EAAAA,IAAI,GACvBiE,GAAejE,EAAAA,EAAAA,IAAI,WACnBkC,GAAuBlC,EAAAA,EAAAA,KAAI,GAG3BoO,EAAkBC,IACtB,IAAKA,EAAM,MAAO,GAElB3P,QAAQC,IAAI,cAAe0P,EAAM,aAAcA,GAE/C,IAEE,GAAIqI,MAAMC,QAAQtI,GAEhB,OADA3P,QAAQC,IAAI,aAAc0P,GACnBA,EAIT,GAAoB,kBAATA,EAAmB,CAE5B,GAAIA,EAAK0C,WAAW,MAAQ1C,EAAK+H,SAAS,KAAM,CAC9C,MAAMyF,EAASxF,KAAKC,MAAMjI,GAE1B,OADA3P,QAAQC,IAAI,iBAAkBkd,GACvBA,CACT,CAGA,GAAIxN,EAAKnH,SAAS,KAAM,CACtB,MAAMyS,EAAQtL,EAAK0F,MAAM,KAAK3B,KAAI0J,GAAKA,EAAEC,SAAQxS,QAAOuS,GAAKA,IAE7D,OADApd,QAAQC,IAAI,kBAAmBgb,GACxBA,CACT,CAIA,OADAjb,QAAQC,IAAI,gBAAiB,CAAC0P,IACvB,CAACA,EACV,CAIA,OADA3P,QAAQC,IAAI,qBAAsB6F,OAAO6J,IAClC,CAAC7J,OAAO6J,GACjB,CAAE,MAAOrP,GAGP,OAFAN,QAAQM,MAAM,YAAaA,GAEJ,kBAATqP,EAAoB,CAACA,GAAQ,EAC7C,GAII8M,GAAQlW,EAAAA,EAAAA,KAAS,KACbuW,EAAMpc,OAAOxE,IAA0B,QAApB4gB,EAAMpc,OAAOxE,KAIpCwgB,GAAenW,EAAAA,EAAAA,KAAS,IACrBxJ,GAAKC,MAAMC,YAA0C,IAA5BF,GAAKC,MAAMO,KAAKiJ,UAI5ChF,GAAOiF,EAAAA,EAAAA,IAAS,CACpBsF,OAAQ,GACRhK,YAAa,GACbM,SAAU,GACVG,eAAgB,GAChBK,eAAgB,GAChBI,SAAU,EACViW,SAAU,KACVoE,UAAWvgB,GAAKC,MAAMO,MAAMrB,IAAM,KAClCsT,kBAAmB,GACnBY,iBAAkB,GAClBmN,QAAS,KAGL9b,EAAQ,CACZsK,OAAQ,CACN,CAAE/F,UAAU,EAAMgB,QAAS,QAASC,QAAS,WAE/ClF,YAAa,CACX,CAAEiE,UAAU,EAAMgB,QAAS,UAAWC,QAAS,WAEjD5E,SAAU,CACR,CAAE2D,UAAU,EAAMgB,QAAS,YAAaC,QAAS,SAEnDzE,eAAgB,CACd,CAAEwD,UAAU,IAEdnD,eAAgB,CACd,CAAEmD,UAAU,IAEd/C,SAAU,CACR,CAAE+C,UAAU,EAAMgB,QAAS,UAAWC,QAAS,aAInDC,EAAAA,EAAAA,KAAUC,UACRvH,EAAQuC,OAAQ,EAEhB,UAEQ2F,IAGF4U,EAAava,aACTrC,IAIJ2c,EAAMta,OAEHua,EAAava,OAASpF,GAAKC,MAAMO,OACpCiE,EAAKuK,OAAShP,GAAKC,MAAMO,KAAK4b,cACxBtR,EAAcrG,EAAKuK,eAIrByR,GAEV,CAAE,MAAOld,GACPN,QAAQM,MAAM,WAAYA,GAC1BC,EAAAA,GAAUD,MAAM,eAClB,CAAE,QACAV,EAAQuC,OAAQ,CAClB,KAIF,MAAMrC,EAAaqH,UACjB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUG,OAC3DA,EAAM4D,MAAQjC,EAASP,IACzB,CAAE,MAAOW,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,WAClB,GAIIuH,EAAgBV,UACpB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUG,OACrDa,EAAOc,EAASP,KAAKuI,MAAKC,GAAKA,EAAEjM,KAAOkM,SAAS2D,KACnD3M,IACFgC,EAASe,MAAQ/C,EAAKM,KAE1B,CAAE,MAAOY,GACPN,QAAQM,MAAM,YAAaA,EAC7B,GAIIwH,EAAkBX,UACtB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUI,YAC3DA,EAAW2D,MAAQjC,EAASP,IAC9B,CAAE,MAAOW,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,WAClB,GAIIkd,EAAqBrW,UACzB,IACEvH,EAAQuC,OAAQ,EAChB,MAAMjC,QAAiB8H,GAAY5H,IAAI,GAAG6H,EAAU7J,UAAUK,uBAAuBqe,EAAMpc,OAAOxE,MAE5Fgc,EAAShY,EAASP,KASxB,GARAK,QAAQC,IAAI,YAAaiY,GAEzB1W,EAAKuK,OAASmM,EAAOiB,QACrB3X,EAAKO,YAAcmW,EAAOC,cAC1B3W,EAAKa,SAAW6V,EAAO7V,SACvBb,EAAK0X,SAAWhB,EAAOhc,GAGnBgc,EAAO9I,sBAAuB,CAChC,MAAMqO,EAAW,IAAI/W,KAAKwR,EAAO9I,uBACjC5N,EAAKgB,eAAiBib,EAAS9W,cAAcC,MAAM,EAAG,IACtDpF,EAAKqB,eAAiB4a,EAASC,eAAe9W,MAAM,EAAG,EACzD,CAKA,GAHApF,EAAKyB,SAAWiV,EAAOjV,SAGnBiV,EAAO1I,kBAAmB,CAC5BxP,QAAQC,IAAI,WAAYiY,EAAO1I,mBAC/B,MAAMmO,EAAajO,EAAewI,EAAO1I,mBACzCxP,QAAQC,IAAI,eAAgB0d,GAE5B1Z,EAAe9B,MAAQwb,EAAWjK,KAAI/D,IAEpC,IAAIyC,EAAUzC,EACd,IAAKA,EAAK0C,WAAW,QAAS,CAE5B,MAAMuL,EAAYjO,EAAK0C,WAAW,KAAO1C,EAAKqD,UAAU,GAAKrD,EAC7DyC,EAAU,GAAGF,OAAO7P,SAAS8P,UAAUyL,GACzC,CAIA,OAFA5d,QAAQC,IAAI,cAAemS,GAEpB,CACL1S,KAAMiQ,EAAK0F,MAAM,KAAKC,MACtB5K,IAAK0H,EACN,GAEL,CAEA,GAAI8F,EAAO9H,iBAAkB,CAC3BpQ,QAAQC,IAAI,WAAYiY,EAAO9H,kBAC/B,MAAMuN,EAAajO,EAAewI,EAAO9H,kBACzCpQ,QAAQC,IAAI,eAAgB0d,GAE5BlZ,EAActC,MAAQwb,EAAWjK,KAAI/D,IAEnC,IAAIyC,EAAUzC,EACd,IAAKA,EAAK0C,WAAW,QAAS,CAE5B,MAAMuL,EAAYjO,EAAK0C,WAAW,KAAO1C,EAAKqD,UAAU,GAAKrD,EAC7DyC,EAAU,GAAGF,OAAO7P,SAAS8P,UAAUyL,GACzC,CAIA,OAFA5d,QAAQC,IAAI,cAAemS,GAEpB,CACL1S,KAAMiQ,EAAK0F,MAAM,KAAKC,MACtB5K,IAAK0H,EACN,GAEL,CAGAhR,EAASe,MAAQ+V,EAAO1a,UAGxB0f,EAAU/a,MAAQ+V,EAAO5I,WAGzBuO,EAAoB,IAAI5Z,EAAe9B,SAAUsC,EAActC,OAEjE,CAAE,MAAO7B,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,WAClB,CAAE,QACAV,EAAQuC,OAAQ,CAClB,GAIIiC,EAAsBiE,IAE1B,MAAMC,EAAgB,CAAC,aAAc,YAAa,YAAa,YAAa,YAAa,cACnFC,EAAUD,EAAcE,SAASH,EAAK1K,MAE5C,IAAK4K,EAEH,OADAhI,EAAAA,GAAUD,MAAM,cACT,EAIT,MAAMmI,EAAU,SAChB,OAAIJ,EAAKK,KAAOD,GACdlI,EAAAA,GAAUD,MAAM,kBACT,GAIF,IAAIqI,SAASC,IAElB9D,EAAmB3C,OAAQ,EAC3BoD,EAAapD,MAAQ,YACrBgD,EAAiBhD,MAAQ,EAEzBnC,QAAQC,IAAI,UAAWoI,EAAK3I,KAAM,MAAO2I,EAAK1K,KAAM,OAAQ0K,EAAKK,KAAO,MAAMG,QAAQ,GAAI,MAG1F,IAAIC,IAAJ,CAAeT,EAAM,CACnBU,QAAS,GACTC,SAAU,KACVC,UAAW,KACXC,SAAU,aACVC,YAAa,EAEbC,UAAAA,GACEjE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,WACd,EAEAoJ,IAAAA,GACElE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,SACd,EACAqJ,OAAAA,CAAQC,GAEN,MAAMC,EAAWnB,EAAK3I,KAAK+J,QAAQ,YAAa,IAAM,OAGhDC,EAAgB,IAAIC,KAAK,CAACJ,GAASC,EAAU,CACjD7L,KAAM,aACNiM,cAAc,IAAIlD,MAAOmD,YAI3B7J,QAAQC,IAAI,WACZD,QAAQC,IAAI,WAAYoI,EAAKK,KAAO,MAAMG,QAAQ,GAAI,MACtD7I,QAAQC,IAAI,YAAayJ,EAAchB,KAAO,MAAMG,QAAQ,GAAI,MAChE7I,QAAQC,IAAI,SAAU6J,KAAKC,MAA6C,KAAtC,EAAIL,EAAchB,KAAOL,EAAKK,OAAc,KAC9E1I,QAAQC,IAAI,aAAcyJ,EAAc/L,MACxCqC,QAAQC,IAAI,YAAayJ,EAAchK,MAGvC6F,EAAapD,MAAQ,SACrBgD,EAAiBhD,MAAQ,IAGzB6H,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,KAGHyG,EAAQc,EACV,EACApJ,KAAAA,CAAM2J,GACJjK,QAAQM,MAAM,UAAW2J,GAEzB1E,EAAapD,MAAQ,cACrBgD,EAAiBhD,MAAQ,IAGzB6H,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,KAEHyG,EAAQP,EACV,GACA,GACF,EAIEtE,EAA0BoD,MAAOkB,EAAM6B,KAI3C,GAHAlK,QAAQC,IAAI,WAAYoI,GAGpBA,EAAK8B,UAGP,OAFAnK,QAAQC,IAAI,eAAgBoI,EAAK3I,MACjCuE,EAAe9B,MAAQ+H,GAChB,EAIT,GAAI7B,EAAK+B,KAAuB,UAAhB/B,EAAKhD,OAAoB,CAEvCP,EAAmB3C,OAAQ,EAC3BoD,EAAapD,MAAQ,YACrBgD,EAAiBhD,MAAQ,EAEzBnC,QAAQC,IAAI,aAAcoI,EAAK3I,KAAM,MAAO2I,EAAK+B,IAAIzM,KAAM,OAAQ0K,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAErG,IAEE,MAAMa,QAAsB,IAAIf,SAASC,IACvC,IAAIE,IAAJ,CAAeT,EAAK+B,IAAK,CACvBrB,QAAS,GACTC,SAAU,KACVC,UAAW,KACXC,SAAU,aACVC,YAAa,EAEbC,UAAAA,GACEjE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,WACd,EAEAoJ,IAAAA,GACElE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,SACd,EACAqJ,OAAAA,CAAQC,GAEN,MAAMC,EAAWnB,EAAK+B,IAAI1K,KAAK+J,QAAQ,YAAa,IAAM,OAGpDC,EAAgB,IAAIC,KAAK,CAACJ,GAASC,EAAU,CACjD7L,KAAM,aACNiM,cAAc,IAAIlD,MAAOmD,YAI3B7J,QAAQC,IAAI,WACZD,QAAQC,IAAI,WAAYoI,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAC1D7I,QAAQC,IAAI,YAAayJ,EAAchB,KAAO,MAAMG,QAAQ,GAAI,MAChE7I,QAAQC,IAAI,SAAU6J,KAAKC,MAAiD,KAA1C,EAAIL,EAAchB,KAAOL,EAAK+B,IAAI1B,OAAc,KAClF1I,QAAQC,IAAI,aAAcyJ,EAAc/L,MACxCqC,QAAQC,IAAI,YAAayJ,EAAchK,MAGvC6F,EAAapD,MAAQ,SACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQc,EACV,EACApJ,KAAAA,CAAM2J,GACJjK,QAAQM,MAAM,UAAW2J,GAEzB1E,EAAapD,MAAQ,cACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQP,EAAK+B,IACf,GACA,IAIJpK,QAAQC,IAAI,iBAAkByJ,EAAchK,MAG5C2I,EAAK8B,WAAY,EACjB9B,EAAK+B,IAAMV,EAGXM,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,IAEL,CAAE,MAAO7B,GACPN,QAAQM,MAAM,WAAYA,GAC1BC,EAAAA,GAAUkK,QAAQ,kBAClB3F,EAAmB3C,OAAQ,CAC7B,CACF,MAAYkG,EAAK+B,KAAO/B,EAAKqC,KAE3B1K,QAAQC,IAAI,cAAeoI,EAAK3I,MAkBlC,OAdAkL,EAAmBV,QAGFrD,IAAbwB,EAAK+B,KAAqC,UAAhB/B,EAAKhD,SACjCgD,EAAK+B,IAAM/B,EAAKyV,eAAiBzV,EACjCrI,QAAQC,IAAI,iBAAkBoI,EAAK+B,MAIrCnG,EAAe9B,MAAQ+H,EAGvB2T,EAAoB,IAAI5Z,EAAe9B,SAAUsC,EAActC,SAExD,CAAK,EAIR6B,EAA0BA,CAACqE,EAAM6B,KACrClK,QAAQC,IAAI,WAAYoI,GAGxBpE,EAAe9B,MAAQ+H,EAGlBU,EAAmB,IAAI3G,EAAe9B,SAAUsC,EAActC,UACjEqB,EAAqBrB,OAAQ,GAI/B0b,EAAoB,IAAI5Z,EAAe9B,SAAUsC,EAActC,OAAO,EAIlEoC,EAAyB4C,MAAOkB,EAAM6B,KAI1C,GAHAlK,QAAQC,IAAI,WAAYoI,GAGpBA,EAAK8B,UAGP,OAFAnK,QAAQC,IAAI,eAAgBoI,EAAK3I,MACjC+E,EAActC,MAAQ+H,GACf,EAIT,GAAI7B,EAAK+B,KAAuB,UAAhB/B,EAAKhD,OAAoB,CAEvCP,EAAmB3C,OAAQ,EAC3BoD,EAAapD,MAAQ,YACrBgD,EAAiBhD,MAAQ,EAEzBnC,QAAQC,IAAI,aAAcoI,EAAK3I,KAAM,MAAO2I,EAAK+B,IAAIzM,KAAM,OAAQ0K,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAErG,IAEE,MAAMa,QAAsB,IAAIf,SAASC,IACvC,IAAIE,IAAJ,CAAeT,EAAK+B,IAAK,CACvBrB,QAAS,GACTC,SAAU,KACVC,UAAW,KACXC,SAAU,aACVC,YAAa,EAEbC,UAAAA,GACEjE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,WACd,EAEAoJ,IAAAA,GACElE,EAAiBhD,MAAQ,GACzBoD,EAAapD,MAAQ,YACrBnC,QAAQC,IAAI,SACd,EACAqJ,OAAAA,CAAQC,GAEN,MAAMC,EAAWnB,EAAK+B,IAAI1K,KAAK+J,QAAQ,YAAa,IAAM,OAGpDC,EAAgB,IAAIC,KAAK,CAACJ,GAASC,EAAU,CACjD7L,KAAM,aACNiM,cAAc,IAAIlD,MAAOmD,YAI3B7J,QAAQC,IAAI,WACZD,QAAQC,IAAI,WAAYoI,EAAK+B,IAAI1B,KAAO,MAAMG,QAAQ,GAAI,MAC1D7I,QAAQC,IAAI,YAAayJ,EAAchB,KAAO,MAAMG,QAAQ,GAAI,MAChE7I,QAAQC,IAAI,SAAU6J,KAAKC,MAAiD,KAA1C,EAAIL,EAAchB,KAAOL,EAAK+B,IAAI1B,OAAc,KAClF1I,QAAQC,IAAI,aAAcyJ,EAAc/L,MACxCqC,QAAQC,IAAI,YAAayJ,EAAchK,MAGvC6F,EAAapD,MAAQ,SACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQc,EACV,EACApJ,KAAAA,CAAM2J,GACJjK,QAAQM,MAAM,UAAW2J,GAEzB1E,EAAapD,MAAQ,cACrBgD,EAAiBhD,MAAQ,IAEzByG,EAAQP,EAAK+B,IACf,GACA,IAIJpK,QAAQC,IAAI,iBAAkByJ,EAAchK,MAG5C2I,EAAK8B,WAAY,EACjB9B,EAAK+B,IAAMV,EAGXM,YAAW,KACTlF,EAAmB3C,OAAQ,CAAK,GAC/B,IAEL,CAAE,MAAO7B,GACPN,QAAQM,MAAM,WAAYA,GAC1BC,EAAAA,GAAUkK,QAAQ,kBAClB3F,EAAmB3C,OAAQ,CAC7B,CACF,MAAYkG,EAAK+B,KAAO/B,EAAKqC,KAE3B1K,QAAQC,IAAI,cAAeoI,EAAK3I,MAkBlC,OAdAkL,EAAmBV,QAGFrD,IAAbwB,EAAK+B,KAAqC,UAAhB/B,EAAKhD,SACjCgD,EAAK+B,IAAM/B,EAAKyV,eAAiBzV,EACjCrI,QAAQC,IAAI,iBAAkBoI,EAAK+B,MAIrC3F,EAActC,MAAQ+H,EAGtB2T,EAAoB,IAAI5Z,EAAe9B,SAAUsC,EAActC,SAExD,CAAK,EAIRqC,EAAyBA,CAAC6D,EAAM6B,KACpClK,QAAQC,IAAI,WAAYoI,GAGxB5D,EAActC,MAAQ+H,EAGjBU,EAAmB,IAAI3G,EAAe9B,SAAUsC,EAActC,UACjEqB,EAAqBrB,OAAQ,GAI/B0b,EAAoB,IAAI5Z,EAAe9B,SAAUsC,EAActC,OAAO,EAIlE0b,EAAuB3T,IAC3BsH,EAAcrP,MAAQ+H,EAASwJ,KAAIrL,GAC7BA,EAAKqC,KACP1K,QAAQC,IAAI,WAAYoI,EAAKqC,KACtBrC,EAAKqC,KACHrC,EAAK+B,KAET/B,EAAK0V,WACR1V,EAAK0V,SAAW9H,IAAIC,gBAAgB7N,EAAK+B,MAE3CpK,QAAQC,IAAI,cAAeoI,EAAK0V,UACzB1V,EAAK0V,UACH1V,aAAgBsB,MAEpBtB,EAAK0V,WACR1V,EAAK0V,SAAW9H,IAAIC,gBAAgB7N,IAEtCrI,QAAQC,IAAI,eAAgBoI,EAAK0V,UAC1B1V,EAAK0V,UAEP,KACNlT,QAAOH,GAAOA,IAEjB1K,QAAQC,IAAI,UAAWuR,EAAcrP,MAAM,EAIvCwa,EAA4BtU,IAChCrI,QAAQC,IAAI,QAASoI,GAGrBwV,EAAoB,IAAI5Z,EAAe9B,SAAUsC,EAActC,QAG/D,MAAM+J,EAAQsF,EAAcrP,MAAMmI,WAAUI,IAC1C,GAAIrC,EAAKqC,IACP,OAAOA,IAAQrC,EAAKqC,IACf,GAAIrC,EAAK+B,IAAK,CAEnB,MAAM4T,EAAU/H,IAAIC,gBAAgB7N,EAAK+B,KACnCb,EAASmB,IAAQsT,EAGvB,OADA/H,IAAIK,gBAAgB0H,GACbzU,CACT,CACA,OAAO,CAAK,IAIZkI,EAAatP,OADA,IAAX+J,EACmBA,EAEA,EAIvBoF,EAAWnP,OAAQ,CAAI,EAInBwP,EAAcA,KAClBL,EAAWnP,OAAQ,CAAK,EAIpByI,EAAsBE,IAC1B,MAAMC,EAAqB,QAC3B,OAAOD,EAAME,MAAK3C,GAAQA,EAAKK,KAAOqC,GAAmB,EAIrDE,EAAwBC,IAC5B,GAAIA,EAAcC,MAAO,CACvB,MAAMjG,EAAa4E,KAAKC,MAA8B,IAAvBmB,EAAcE,OAAgBF,EAAcC,OAC3EhG,EAAiBhD,MAAQ+C,EAGvBK,EAAapD,MADX+C,EAAa,GACM,YACZA,EAAa,GACD,YACZA,EAAa,IACD,UAEA,cAEzB,GAIIE,EAAoBF,GACF,MAAfA,EAAqB,KAAO,GAAGA,KAIlCP,EAAawC,UACZ6V,EAAW7a,aAEV6a,EAAW7a,MAAMkJ,UAASlE,UAC9B,IAAImE,EAwLF,OAFAtL,QAAQC,IAAI,UACZM,EAAAA,GAAUD,MAAM,cACT,EAtLP6E,EAAiBhD,MAAQ,EACzBoD,EAAapD,MAAQ,YACrB2C,EAAmB3C,OAAQ,EAE3B,IACE,MAAMoJ,EAAW,IAAIC,SAarB,GAZAD,EAASE,OAAO,SAAUjK,EAAKuK,QAC/BR,EAASE,OAAO,cAAejK,EAAKO,aACpCwJ,EAASE,OAAO,WAAYjK,EAAKa,UACjCkJ,EAASE,OAAO,iBAAkBjK,EAAKgB,gBACvC+I,EAASE,OAAO,iBAAkBjK,EAAKqB,gBACvC0I,EAASE,OAAO,WAAYjK,EAAKyB,UACjCsI,EAASE,OAAO,UAAWjK,EAAK+b,SAAW,IAMvCtZ,EAAe9B,MAAM6J,OAAS,EAAG,CACnC,MAAMiS,EAAWha,EAAe9B,MAAM0I,QAAOxC,GAAQA,EAAK+B,MACpD8T,EAAgBja,EAAe9B,MAAM0I,QAAOxC,IAASA,EAAK+B,MAGhE,GAAI6T,EAASjS,OAAS,GAYpB,GAXAhM,QAAQC,IAAI,uBAGZge,EAAShS,SAAQ5D,IACXA,EAAK+B,MACPpK,QAAQC,IAAI,aAAcoI,EAAK+B,IAAI1K,MACnC6L,EAASE,OAAO,eAAgBpD,EAAK+B,KACvC,IAIE8T,EAAclS,OAAS,EAAG,CAC5B,MAAMmS,EAAgBD,EAAcxK,KAAIrL,IAEtC,IAAIsH,EAAOtH,EAAKqC,IAChB,MAAMyH,EAASD,OAAO7P,SAAS8P,OAQ/B,OAPIxC,EAAK0C,WAAWF,KAClBxC,EAAOA,EAAKqD,UAAUb,EAAOnG,QAExB2D,EAAK0C,WAAW,OACnB1C,EAAO,IAAMA,IAGVA,CAAI,IAGb3P,QAAQC,IAAI,eAAgBke,GAC5B5S,EAASE,OAAO,oBAAqBkM,KAAK6C,UAAU2D,GACtD,OACK,GAAID,EAAclS,OAAS,EAAG,CAEnC,MAAMmS,EAAgBD,EAAcxK,KAAIrL,IAEtC,IAAIsH,EAAOtH,EAAKqC,IAChB,MAAMyH,EAASD,OAAO7P,SAAS8P,OAQ/B,OAPIxC,EAAK0C,WAAWF,KAClBxC,EAAOA,EAAKqD,UAAUb,EAAOnG,QAExB2D,EAAK0C,WAAW,OACnB1C,EAAO,IAAMA,IAGVA,CAAI,IAGb3P,QAAQC,IAAI,qBAAsBke,GAClC5S,EAASE,OAAO,oBAAqBkM,KAAK6C,UAAU2D,GACtD,CACF,MAEE5S,EAASE,OAAO,oBAAqBkM,KAAK6C,UAAU,KAItD,GAAI/V,EAActC,MAAM6J,OAAS,EAAG,CAClC,MAAMiS,EAAWxZ,EAActC,MAAM0I,QAAOxC,GAAQA,EAAK+B,MACnD8T,EAAgBzZ,EAActC,MAAM0I,QAAOxC,IAASA,EAAK+B,MAG/D,GAAI6T,EAASjS,OAAS,GAYpB,GAXAhM,QAAQC,IAAI,uBAGZge,EAAShS,SAAQ5D,IACXA,EAAK+B,MACPpK,QAAQC,IAAI,aAAcoI,EAAK+B,IAAI1K,MACnC6L,EAASE,OAAO,cAAepD,EAAK+B,KACtC,IAIE8T,EAAclS,OAAS,EAAG,CAC5B,MAAMmS,EAAgBD,EAAcxK,KAAIrL,IAEtC,IAAIsH,EAAOtH,EAAKqC,IAChB,MAAMyH,EAASD,OAAO7P,SAAS8P,OAQ/B,OAPIxC,EAAK0C,WAAWF,KAClBxC,EAAOA,EAAKqD,UAAUb,EAAOnG,QAExB2D,EAAK0C,WAAW,OACnB1C,EAAO,IAAMA,IAGVA,CAAI,IAGb3P,QAAQC,IAAI,eAAgBke,GAC5B5S,EAASE,OAAO,mBAAoBkM,KAAK6C,UAAU2D,GACrD,OACK,GAAID,EAAclS,OAAS,EAAG,CAEnC,MAAMmS,EAAgBD,EAAcxK,KAAIrL,IAEtC,IAAIsH,EAAOtH,EAAKqC,IAChB,MAAMyH,EAASD,OAAO7P,SAAS8P,OAQ/B,OAPIxC,EAAK0C,WAAWF,KAClBxC,EAAOA,EAAKqD,UAAUb,EAAOnG,QAExB2D,EAAK0C,WAAW,OACnB1C,EAAO,IAAMA,IAGVA,CAAI,IAGb3P,QAAQC,IAAI,qBAAsBke,GAClC5S,EAASE,OAAO,mBAAoBkM,KAAK6C,UAAU2D,GACrD,CACF,MAEE5S,EAASE,OAAO,mBAAoBkM,KAAK6C,UAAU,KAIrDxa,QAAQC,IAAI,eACZ,IAAK,IAAKxD,EAAK0F,KAAUoJ,EAAS6S,UAC5Bjc,aAAiBwH,KACnB3J,QAAQC,IAAI,GAAGxD,aAAe0F,EAAMzC,SAASyC,EAAMxE,SAASwE,EAAMuG,eAElE1I,QAAQC,IAAI,GAAGxD,MAAQ0F,KAKvBX,EAAK0X,gBACDlR,GAAYqW,QAChB,GAAGpW,EAAU7J,UAAUK,gBAAgB+C,EAAK0X,WAC5C3N,EACAN,GAEF1K,EAAAA,GAAU+I,QAAQ,oBAEZtB,GAAYmE,SAChBlE,EAAU7J,UAAUK,aACpB8M,EACAN,GAEF1K,EAAAA,GAAU+I,QAAQ,aAIpBxE,EAAmB3C,OAAQ,EAG3BrB,GACF,CAAE,MAAOR,GACPN,QAAQM,MAAM,UAAWA,GACrBA,EAAMJ,UAAYI,EAAMJ,SAASP,MACnCK,QAAQM,MAAM,WAAYA,EAAMJ,SAASP,MACzCY,EAAAA,GAAUD,MAAM,WAAWA,EAAMJ,SAASP,KAAKW,OAAS,WAExDC,EAAAA,GAAUD,MAAM,kBAElBwE,EAAmB3C,OAAQ,CAC7B,CAKF,GACA,EAIErB,EAASA,KACT4b,EAAava,MACf+D,EAAOzF,KAAK,kBAEZyF,EAAOzF,KAAK,CACVf,KAAM,cACNgB,OAAQ,CAAEqL,OAAQhP,GAAKC,MAAMO,KAAK4b,UAEtC,EAGF,MAAO,CACL3X,OACAC,QACAub,aACApd,UACAqd,aACA7b,WACA5C,aACAD,QACA0F,iBACAQ,gBACA+M,gBACAF,aACAG,eACAgL,QACAC,eACAhN,iBACA3L,0BACAC,0BACAO,yBACAC,yBACAmY,2BACAvY,qBACAuN,cACAhN,aACA7D,SACAgE,qBACAK,mBACAI,eACAH,mBACA5B,uBAEJ,GC3oCF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCTO3G,MAAM,6B,IACJA,MAAM,U,IAQNA,MAAM,W,IACJA,MAAM,W,IAXjBJ,IAAA,EAqGeI,MAAM,iB,IArGrBJ,IAAA,EAsGeI,MAAM,iB,IAKPA,MAAM,iB,kYA1GlBV,EAAAA,EAAAA,IAsHM,MAtHNC,GAsHM,EArHJU,EAAAA,EAAAA,IAMM,MANNI,GAMM,EALJJ,EAAAA,EAAAA,IAEM,OAFDD,MAAM,cAAee,QAAKI,EAAA,KAAAA,EAAA,OAAA6C,IAAExE,EAAAyE,QAAAzE,EAAAyE,UAAAD,K,EAC/BlE,EAAAA,EAAAA,IAAiCoE,EAAA,MAJzCjD,SAAAC,EAAAA,EAAAA,KAIiB,IAAc,EAAdpB,EAAAA,EAAAA,IAAcqE,MAJ/B/C,EAAA,I,aAAAb,EAAAA,EAAAA,IAIyC,WACnC,aACAN,EAAAA,EAAAA,IAAa,UAAT,QAAI,mBACRA,EAAAA,EAAAA,IAAW,wBAGbA,EAAAA,EAAAA,IAiCM,MAjCNK,GAiCM,EAhCJL,EAAAA,EAAAA,IAIM,MAJNW,GAIM,EAHJd,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAAiiB,e,CAZ1CxgB,SAAAC,EAAAA,EAAAA,KAaU,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MAbrCjD,SAAAC,EAAAA,EAAAA,KAamB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MAb3BrG,EAAA,I,eAAAb,EAAAA,EAAAA,IAaqC,cAbrCa,EAAA,G,uCAiBM1B,EAAAA,EAAAA,IAyBWkS,EAAA,CAvBR9O,KAAMtD,EAAAiC,MACPqQ,OAAA,GACAC,OAAA,GACA3M,MAAA,oC,CAtBRnE,SAAAC,EAAAA,EAAAA,KAwBQ,IAAmD,EAAnDpB,EAAAA,EAAAA,IAAmDqS,EAAA,CAAlCpN,KAAK,KAAKD,MAAM,KAAKoD,MAAM,QAC5CpI,EAAAA,EAAAA,IAA0DqS,EAAA,CAAzCpN,KAAK,WAAWD,MAAM,KAAKoD,MAAM,SAClDpI,EAAAA,EAAAA,IAAwDqS,EAAA,CAAvCpN,KAAK,QAAQD,MAAM,MAAMoD,MAAM,SAChDpI,EAAAA,EAAAA,IAA2DqS,EAAA,CAA1CpN,KAAK,YAAYD,MAAM,KAAKoD,MAAM,SACnDpI,EAAAA,EAAAA,IAA+DqS,EAAA,CAA9CpN,KAAK,YAAYD,MAAM,KAAK,YAAU,SACvDhF,EAAAA,EAAAA,IAYkBqS,EAAA,CAZDrN,MAAM,KAAKoD,MAAM,MAAM0L,MAAM,S,CACjC3S,SAAOC,EAAAA,EAAAA,KACqDkR,GAD9C,EACvBtS,EAAAA,EAAAA,IAAqEe,EAAA,CAA1DgL,KAAK,QAAS9K,QAAK2B,GAAElD,EAAAkiB,WAAWtP,EAAME,M,CA/B7DrR,SAAAC,EAAAA,EAAAA,KA+BmE,IAAEC,EAAA,MAAAA,EAAA,MA/BrEZ,EAAAA,EAAAA,IA+BmE,UA/BnEa,EAAA,G,mBAgCYtB,EAAAA,EAAAA,IAOgB6hB,EAAA,CANd7a,MAAM,aACL8a,UAAOlf,GAAElD,EAAAqiB,aAAazP,EAAME,M,CAElBwP,WAAS5gB,EAAAA,EAAAA,KAClB,IAAoD,EAApDpB,EAAAA,EAAAA,IAAoDe,EAAA,CAAzCgL,KAAK,QAAQ/K,KAAK,U,CArC7CG,SAAAC,EAAAA,EAAAA,KAqCsD,IAAEC,EAAA,MAAAA,EAAA,MArCxDZ,EAAAA,EAAAA,IAqCsD,UArCtDa,EAAA,OAAAA,EAAA,G,uBAAAA,EAAA,OAAAA,EAAA,G,iBAkBmB5B,EAAAuD,cA4BfjD,EAAAA,EAAAA,IAoEYkI,EAAA,CAlHhB/C,WA+CezF,EAAAuiB,cA/Cf,sBAAA5gB,EAAA,KAAAA,EAAA,GAAAuB,GA+CelD,EAAAuiB,cAAarf,GACrBoE,MAAOtH,EAAAwiB,OAAS,OAAS,OAC1B9Z,MAAM,S,CAyDK+Z,QAAM/gB,EAAAA,EAAAA,KACf,IAKO,EALPjB,EAAAA,EAAAA,IAKO,OALP2G,GAKO,EAJL9G,EAAAA,EAAAA,IAAwDe,EAAA,CAA5CE,QAAKI,EAAA,KAAAA,EAAA,GAAAuB,GAAElD,EAAAuiB,eAAgB,I,CA5G7C9gB,SAAAC,EAAAA,EAAAA,KA4GoD,IAAEC,EAAA,MAAAA,EAAA,MA5GtDZ,EAAAA,EAAAA,IA4GoD,UA5GpDa,EAAA,KA6GUtB,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAAsI,WAAa/E,QAASvD,EAAA0iB,a,CA7GlEjhB,SAAAC,EAAAA,EAAAA,KA6G+E,IAErEC,EAAA,MAAAA,EAAA,MA/GVZ,EAAAA,EAAAA,IA6G+E,YA7G/Ea,EAAA,G,8BAAAH,SAAAC,EAAAA,EAAAA,KAmDM,IAqDU,EArDVpB,EAAAA,EAAAA,IAqDU0E,EAAA,CApDRC,IAAI,WACHC,MAAOlF,EAAAmF,KACPC,MAAOpF,EAAAoF,MACR,cAAY,QACZQ,MAAA,uC,CAxDRnE,SAAAC,EAAAA,EAAAA,KA0DQ,IAEe,EAFfpB,EAAAA,EAAAA,IAEe+E,EAAA,CAFDC,MAAM,KAAKC,KAAK,Y,CA1DtC9D,SAAAC,EAAAA,EAAAA,KA2DU,IAAwD,EAAxDpB,EAAAA,EAAAA,IAAwDyF,EAAA,CA3DlEN,WA2D6BzF,EAAAmF,KAAKmK,SA3DlC,sBAAA3N,EAAA,KAAAA,EAAA,GAAAuB,GA2D6BlD,EAAAmF,KAAKmK,SAAQpM,GAAEyC,YAAY,S,0BA3DxD/D,EAAA,KA8DQtB,EAAAA,EAAAA,IAEe+E,EAAA,CAFDC,MAAM,MAAMC,KAAK,S,CA9DvC9D,SAAAC,EAAAA,EAAAA,KA+DU,IAAsD,EAAtDpB,EAAAA,EAAAA,IAAsDyF,EAAA,CA/DhEN,WA+D6BzF,EAAAmF,KAAKoK,MA/DlC,sBAAA5N,EAAA,KAAAA,EAAA,GAAAuB,GA+D6BlD,EAAAmF,KAAKoK,MAAKrM,GAAEyC,YAAY,U,0BA/DrD/D,EAAA,KAkEQtB,EAAAA,EAAAA,IAOe+E,EAAA,CAPDC,MAAM,KAAKC,KAAK,U,CAlEtC9D,SAAAC,EAAAA,EAAAA,KAmEU,IAKY,EALZpB,EAAAA,EAAAA,IAKYkF,EAAA,CAxEtBC,WAmE8BzF,EAAAmF,KAAKwd,OAnEnC,sBAAAhhB,EAAA,KAAAA,EAAA,GAAAuB,GAmE8BlD,EAAAmF,KAAKwd,OAAMzf,GAAEyC,YAAY,QAAQC,MAAA,gB,CAnE/DnE,SAAAC,EAAAA,EAAAA,KAqEY,IAA0D,CAAzC1B,EAAAqgB,eAAY,WAA7BngB,EAAAA,EAAAA,IAA0D2F,EAAA,CArEtEzF,IAAA,EAqE4C0F,MAAO,EAAGR,MAAM,YArE5DjF,EAAAA,EAAAA,IAAA,QAsEYC,EAAAA,EAAAA,IAAsCuF,EAAA,CAA1BC,MAAO,EAAGR,MAAM,WAC5BhF,EAAAA,EAAAA,IAAqCuF,EAAA,CAAzBC,MAAO,EAAGR,MAAM,YAvExC1D,EAAA,G,qBAAAA,EAAA,IA2EqE,IAAhB5B,EAAAmF,KAAKwd,SAAM,WAAxDziB,EAAAA,EAAAA,IAcemF,EAAA,CAzFvBjF,IAAA,EA2EsBkF,MAAM,KAAKC,KAAK,U,CA3EtC9D,SAAAC,EAAAA,EAAAA,KA4EU,IAYY,EAZZpB,EAAAA,EAAAA,IAYYkF,EAAA,CAxFtBC,WA6EqBzF,EAAAmF,KAAKuK,OA7E1B,sBAAA/N,EAAA,KAAAA,EAAA,GAAAuB,GA6EqBlD,EAAAmF,KAAKuK,OAAMxM,GACpByC,YAAY,QACZC,MAAA,eACCgd,UAAW5iB,EAAAqgB,cAAgBrgB,EAAAwiB,Q,CAhFxC/gB,SAAAC,EAAAA,EAAAA,KAmFc,IAAqB,gBADvB5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MAvFdC,EAAAA,EAAAA,IAmF6B7C,EAAAkC,OAARa,K,WADT7C,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAK2C,EAAKlD,GACVyF,MAAOvC,EAAKM,KACZyC,MAAO/C,EAAKlD,I,sCAtF3B+B,EAAA,G,gCAAAA,EAAA,MAAAvB,EAAAA,EAAAA,IAAA,QA2FQC,EAAAA,EAAAA,IAYe+E,EAAA,CAXbC,MAAM,KACNC,KAAK,Y,CA7Ff9D,SAAAC,EAAAA,EAAAA,KA+FU,IAKE,EALFpB,EAAAA,EAAAA,IAKEyF,EAAA,CApGZN,WAgGqBzF,EAAAmF,KAAKka,SAhG1B,sBAAA1d,EAAA,KAAAA,EAAA,GAAAuB,GAgGqBlD,EAAAmF,KAAKka,SAAQnc,GACtByC,YAAY,QACZrE,KAAK,WACL,oB,uBAEgCtB,EAAAwiB,SAAkB,WACpD1iB,EAAAA,EAAAA,IAAgD,MAAhDmG,GAAkC,eADM,WAAxCnG,EAAAA,EAAAA,IAA0D,MAA1DgF,GAA0C,kBArGpDlD,EAAA,OAAAA,EAAA,G,wBAAAA,EAAA,G,yCAoHInB,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAA2B,SAAxB,qBAAoB,K,CAc7B,QACE4C,KAAM,iBACN8F,WAAY,CACVC,UAAS,MACTE,KAAIA,EAAAA,KAENM,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MACTvG,GAAU0B,EAAAA,EAAAA,KAAI,GACdyd,GAAczd,EAAAA,EAAAA,KAAI,GAClBsd,GAAgBtd,EAAAA,EAAAA,KAAI,GACpBud,GAASvd,EAAAA,EAAAA,KAAI,GACb4d,GAAW5d,EAAAA,EAAAA,IAAI,MACfhD,GAAQgD,EAAAA,EAAAA,IAAI,IACZ/C,GAAQ+C,EAAAA,EAAAA,IAAI,IAGZob,GAAenW,EAAAA,EAAAA,KAAS,IACrBxJ,GAAKC,MAAMC,YAA0C,IAA5BF,GAAKC,MAAMO,KAAKiJ,UAI5C2Y,GAAgB5Y,EAAAA,EAAAA,KAAS,IACtBxJ,GAAKC,MAAMC,WAAaF,GAAKC,MAAMO,KAAK4b,QAAU,OAIrD3X,GAAOiF,EAAAA,EAAAA,IAAS,CACpBvK,GAAI,KACJyP,SAAU,GACVC,MAAO,GACPoT,OAAQ,EACRjT,OAAQ,KACR2P,SAAU,KAINja,EAAQ,CACZkK,SAAU,CACR,CAAE3F,UAAU,EAAMgB,QAAS,QAASC,QAAS,QAC7C,CAAE/D,IAAK,EAAGkc,IAAK,GAAIpY,QAAS,iBAAkBC,QAAS,SAEzD2E,MAAO,CACL,CAAE5F,UAAU,EAAMgB,QAAS,SAAUC,QAAS,QAC9C,CAAEoV,QAAS,gBAAiBrV,QAAS,aAAcC,QAAS,SAE9D+X,OAAQ,CACN,CAAEhZ,UAAU,EAAMgB,QAAS,QAASC,QAAS,WAE/C8E,OAAQ,CACN,CAAE/F,UAAU,EAAMgB,QAAS,QAASC,QAAS,WAE/CyU,SAAU,CACR,CACE1V,SAAU,WAER,OAAQ6Y,EAAO1c,KACjB,EACA6E,QAAS,QACTC,QAAS,QAEX,CAAE/D,IAAK,EAAGkc,IAAK,GAAIpY,QAAS,iBAAkBC,QAAS,UAKrDoY,EAAalY,UACjBvH,EAAQuC,OAAQ,EAChB,IACE,IAAIjC,EAGFA,EAFEwc,EAAava,YAEE6F,GAAY5H,IAAI6H,EAAU7J,UAAUE,aAGpC0J,GAAY5H,IAAI,GAAG6H,EAAU7J,UAAUG,SAAS4gB,EAAchd,eAEjF7D,EAAM6D,MAAQjC,EAASP,IACzB,CAAE,MAAOW,GACPN,QAAQM,MAAM,wBAAyBA,GACvCC,EAAAA,GAAUD,MAAM,WAClB,CAAE,QACAV,EAAQuC,OAAQ,CAClB,GAIIrC,EAAaqH,UACjB,IACE,MAAMjH,QAAiB8H,GAAY5H,IAAI6H,EAAU7J,UAAUG,OAC3DA,EAAM4D,MAAQjC,EAASP,IACzB,CAAE,MAAOW,GACPN,QAAQM,MAAM,wBAAyBA,GACvCC,EAAAA,GAAUD,MAAM,WAClB,GAIIge,EAAgBA,KACpBO,EAAO1c,OAAQ,EACfyC,IACAga,EAAczc,OAAQ,EAGjBua,EAAava,QAChBX,EAAKuK,OAASoT,EAAchd,MAC9B,EAIIoc,EAAcpP,IAClB0P,EAAO1c,OAAQ,EACfX,EAAKtF,GAAKiT,EAAIjT,GACdsF,EAAKmK,SAAWwD,EAAIxD,SACpBnK,EAAKoK,MAAQuD,EAAIvD,MACjBpK,EAAKwd,OAAS7P,EAAI3I,QAClBhF,EAAKuK,OAASoD,EAAIgK,QAClB3X,EAAKka,SAAW,GAChBkD,EAAczc,OAAQ,CAAI,EAItBuc,EAAevX,UACnB,UACQa,GAAY2R,OAAO,GAAG1R,EAAU7J,UAAUE,SAAS6Q,EAAIjT,MAC7DqE,EAAAA,GAAU+I,QAAQ,UAClB+V,GACF,CAAE,MAAO/e,GACPN,QAAQM,MAAM,uBAAwBA,GACtC,IAAIgf,EAAW,SACXhf,EAAMJ,UAAYI,EAAMJ,SAASP,MAAQW,EAAMJ,SAASP,KAAKW,QAC/Dgf,EAAWhf,EAAMJ,SAASP,KAAKW,OAEjCC,EAAAA,GAAUD,MAAMgf,EAClB,GAII1a,EAAYA,KACZsa,EAAS/c,OACX+c,EAAS/c,MAAMiK,cAEjB5K,EAAKtF,GAAK,KACVsF,EAAKmK,SAAW,GAChBnK,EAAKoK,MAAQ,GACbpK,EAAKwd,OAAS,EACdxd,EAAKuK,OAAS,KACdvK,EAAKka,SAAW,EAAE,EAId/W,EAAaA,KACjBua,EAAS/c,MAAMkJ,UAASlE,UACtB,GAAImE,EAAO,CACTyT,EAAY5c,OAAQ,EACpB,IACE,MAAMod,EAAW,CACf5T,SAAUnK,EAAKmK,SACfC,MAAOpK,EAAKoK,MACZoT,OAAQxd,EAAKwd,OACbjT,OAAwB,IAAhBvK,EAAKwd,OAAexd,EAAKuK,OAAS,MAIxCvK,EAAKka,WACP6D,EAAS7D,SAAWla,EAAKka,UAGvBmD,EAAO1c,aAEH6F,GAAYwX,IAAI,GAAGvX,EAAU7J,UAAUE,SAASkD,EAAKtF,KAAMqjB,GACjEhf,EAAAA,GAAU+I,QAAQ,kBAGZtB,GAAYyX,KAAKxX,EAAU7J,UAAUE,MAAOihB,GAClDhf,EAAAA,GAAU+I,QAAQ,WAGpBsV,EAAczc,OAAQ,EACtBkd,GACF,CAAE,MAAO/e,GACPN,QAAQM,MAAM,8BAA+BA,GAC7C,IAAIgf,EAAWT,EAAO1c,MAAQ,SAAW,SACrC7B,EAAMJ,UAAYI,EAAMJ,SAASP,MAAQW,EAAMJ,SAASP,KAAKW,QAC/Dgf,EAAWhf,EAAMJ,SAASP,KAAKW,OAEjCC,EAAAA,GAAUD,MAAMgf,EAClB,CAAE,QACAP,EAAY5c,OAAQ,CACtB,CACF,MACE5B,EAAAA,GAAUkK,QAAQ,SACpB,GACA,EAIE3J,EAASA,KACboF,EAAOwZ,MAAM,EAQf,OALAxY,EAAAA,EAAAA,KAAU,KACRmY,IACAvf,GAAY,IAGP,CACLF,UACAmf,cACAH,gBACAC,SACAK,WACA5gB,QACAC,QACAiD,OACAC,QACAib,eACAyC,gBACAb,gBACAC,aACAG,eACA/Z,aACA7D,SAEJ,GC5VF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,U,UCROjE,MAAM,2B,IAKJA,MAAM,W,IACJA,MAAM,W,IAcJA,MAAM,iB,IASmBA,MAAM,yB,IAoDrBA,MAAM,kB,IAkCZA,MAAM,kB,IAQZA,MAAM,mB,IAEFA,MAAM,e,IAEJA,MAAM,gB,IAhIvBJ,IAAA,EAkKwDI,MAAM,iB,GAlK9D,Y,IAAAJ,IAAA,EAgLqFI,MAAM,e,IAhL3FJ,IAAA,G,IAAAA,IAAA,EA6LuDI,MAAM,iB,GA7L7D,Y,IAAAJ,IAAA,EA2MoFI,MAAM,e,IA3M1FJ,IAAA,G,IAoNqBI,MAAM,qB,IApN3BJ,IAAA,EA0OkCI,MAAM,gB,IA1OxCJ,IAAA,EA+OeI,MAAM,e,koBA9OnBV,EAAAA,EAAAA,IAgQM,MAhQNC,GAgQM,gBA/PJU,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAAwB,UAApB,qBAAe,KAGrBA,EAAAA,EAAAA,IA8OM,MA9ONI,GA8OM,EA7OJJ,EAAAA,EAAAA,IAUM,MAVNK,GAUM,EATJR,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAAsQ,c,CAR1C7O,SAAAC,EAAAA,EAAAA,KASU,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MATrCjD,SAAAC,EAAAA,EAAAA,KASmB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQ2H,MAT3BrG,EAAA,I,aAAAb,EAAAA,EAAAA,IASqC,cATrCa,EAAA,G,gBAWQtB,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAAwQ,oB,CAX1C/O,SAAAC,EAAAA,EAAAA,KAYU,IAA2B,EAA3BpB,EAAAA,EAAAA,IAA2BoE,EAAA,MAZrCjD,SAAAC,EAAAA,EAAAA,KAYmB,IAAQ,EAARpB,EAAAA,EAAAA,IAAQmQ,MAZ3B7O,EAAA,I,aAAAb,EAAAA,EAAAA,IAYqC,cAZrCa,EAAA,G,gBAcQtB,EAAAA,EAAAA,IAEYe,EAAA,CAFAE,QAAOvB,EAAA0Q,gBAAc,CAdzCjP,SAAAC,EAAAA,EAAAA,KAeU,IAA8B,EAA9BpB,EAAAA,EAAAA,IAA8BoE,EAAA,MAfxCjD,SAAAC,EAAAA,EAAAA,KAemB,IAAW,EAAXpB,EAAAA,EAAAA,IAAWqQ,MAf9B/O,EAAA,I,aAAAb,EAAAA,EAAAA,IAewC,YAfxCa,EAAA,G,kBAoBMtB,EAAAA,EAAAA,IAsGU0C,EAAA,CAtGDxC,MAAM,eAAa,CApBlCiB,SAAAC,EAAAA,EAAAA,KAqBQ,IAOM,EAPNjB,EAAAA,EAAAA,IAOM,MAPNW,GAOM,gBANJX,EAAAA,EAAAA,IAAa,UAAT,QAAI,KACRH,EAAAA,EAAAA,IAIYe,EAAA,CAJDC,KAAK,UAAUwP,KAAA,GAAMvP,QAAKI,EAAA,KAAAA,EAAA,GAAAuB,GAAElD,EAAA+Q,iBAAmB/Q,EAAA+Q,kB,CAvBpEtP,SAAAC,EAAAA,EAAAA,KAwBY,IAAmC,EAxB/CX,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAwBehB,EAAA+Q,gBAAkB,KAAO,MAAO,IACnC,GAAgB/Q,EAAA+Q,kB,WAChB7Q,EAAAA,EAAAA,IAAsCwE,EAAA,CA1BlDtE,IAAA,IAAAqB,SAAAC,EAAAA,EAAAA,KA0B4B,IAAY,EAAZpB,EAAAA,EAAAA,IAAY0Q,MA1BxCpP,EAAA,OAyB2C,WAA/B1B,EAAAA,EAAAA,IAAyDwE,EAAA,CAzBrEtE,IAAA,IAAAqB,SAAAC,EAAAA,EAAAA,KAyB6C,IAAc,EAAdpB,EAAAA,EAAAA,IAAc2Q,MAzB3DrP,EAAA,QAAAA,EAAA,O,SA8BQnB,EAAAA,EAAAA,IA2FM,MA3FNqE,GA2FM,EA1FJxE,EAAAA,EAAAA,IAyFU0E,EAAA,CAzFAE,MAAOlF,EAAAkR,WAAY,cAAY,QAAQ1Q,MAAM,e,CA/BjEiB,SAAAC,EAAAA,EAAAA,KAgCY,IA8BS,EA9BTpB,EAAAA,EAAAA,IA8BS6Q,EAAA,CA9BAC,OAAQ,IAAE,CAhC/B3P,SAAAC,EAAAA,EAAAA,KAkCc,IAWS,EAXTpB,EAAAA,EAAAA,IAWS+Q,EAAA,CAXAiS,KAAM,IAAE,CAlC/B7hB,SAAAC,EAAAA,EAAAA,KAmCgB,IASe,EATfpB,EAAAA,EAAAA,IASe+E,EAAA,CATDC,MAAM,QAAM,CAnC1C7D,SAAAC,EAAAA,EAAAA,KAoCkB,IAOY,EAPZpB,EAAAA,EAAAA,IAOYkF,EAAA,CA3C9BC,WAoCsCzF,EAAAkR,WAAWxB,OApCjD,sBAAA/N,EAAA,KAAAA,EAAA,GAAAuB,GAoCsClD,EAAAkR,WAAWxB,OAAMxM,GAAEyC,YAAY,OAAOC,MAAA,eAAoBgM,UAAA,I,CApChGnQ,SAAAC,EAAAA,EAAAA,KAsCsB,IAAqB,gBADvB5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MA1CtBC,EAAAA,EAAAA,IAsCqC7C,EAAAkC,OAARa,K,WADT7C,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAK2C,EAAKlD,GACVyF,MAAOvC,EAAKM,KACZyC,MAAO/C,EAAKlD,I,sCAzCnC+B,EAAA,G,qBAAAA,EAAA,OAAAA,EAAA,KAgDctB,EAAAA,EAAAA,IAaS+Q,EAAA,CAbAiS,KAAM,IAAE,CAhD/B7hB,SAAAC,EAAAA,EAAAA,KAiDgB,IAWe,EAXfpB,EAAAA,EAAAA,IAWe+E,EAAA,CAXDC,MAAM,QAAM,CAjD1C7D,SAAAC,EAAAA,EAAAA,KAkDkB,IASE,EATFpB,EAAAA,EAAAA,IASE4F,EAAA,CA3DpBT,WAmD6BzF,EAAAkR,WAAWS,UAnDxC,sBAAAhQ,EAAA,KAAAA,EAAA,GAAAuB,GAmD6BlD,EAAAkR,WAAWS,UAASzO,GAC7B5B,KAAK,YACL,kBAAgB,IAChB,oBAAkB,OAClB,kBAAgB,OAChB8E,OAAO,aACP,eAAa,aACbR,MAAA,gB,0BA1DpBhE,EAAA,OAAAA,EAAA,OAAAA,EAAA,KAgEYtB,EAAAA,EAAAA,IAkDS6Q,EAAA,CAlDAC,OAAQ,IAAE,CAhE/B3P,SAAAC,EAAAA,EAAAA,KAkEc,IAWS,EAXTpB,EAAAA,EAAAA,IAWS+Q,EAAA,CAXAiS,KAAM,GAAC,CAlE9B7hB,SAAAC,EAAAA,EAAAA,KAmEgB,IASe,EATfpB,EAAAA,EAAAA,IASe+E,EAAA,CATDC,MAAM,QAAM,CAnE1C7D,SAAAC,EAAAA,EAAAA,KAoEkB,IAOY,EAPZpB,EAAAA,EAAAA,IAOYkF,EAAA,CA3E9BC,WAoEsCzF,EAAAkR,WAAWxL,YApEjD,sBAAA/D,EAAA,KAAAA,EAAA,GAAAuB,GAoEsClD,EAAAkR,WAAWxL,YAAWxC,GAAEyC,YAAY,SAASC,MAAA,eAAoBgM,UAAA,I,CApEvGnQ,SAAAC,EAAAA,EAAAA,KAsEsB,IAA0B,gBAD5B5B,EAAAA,EAAAA,IAKE8C,EAAAA,GAAA,MA1EtBC,EAAAA,EAAAA,IAsEqC7C,EAAAmC,YAARb,K,WADTpB,EAAAA,EAAAA,IAKE2F,EAAA,CAHCzF,IAAKkB,EAAKzB,GACVyF,MAAOhE,EAAK+B,KACZyC,MAAOxE,EAAKzB,I,sCAzEnC+B,EAAA,G,qBAAAA,EAAA,OAAAA,EAAA,KAgFctB,EAAAA,EAAAA,IAsBS+Q,EAAA,CAtBAiS,KAAM,GAAC,CAhF9B7hB,SAAAC,EAAAA,EAAAA,KAiFgB,IAoBe,EApBfpB,EAAAA,EAAAA,IAoBe+E,EAAA,CApBDC,MAAM,WAAS,CAjF7C7D,SAAAC,EAAAA,EAAAA,KAkFkB,IAkBM,EAlBNjB,EAAAA,EAAAA,IAkBM,MAlBNwF,GAkBM,EAjBJ3F,EAAAA,EAAAA,IAOEqG,EAAA,CA1FtBlB,WAoF+BzF,EAAAkR,WAAWW,YApF1C,sBAAAlQ,EAAA,KAAAA,EAAA,GAAAuB,GAoF+BlD,EAAAkR,WAAWW,YAAW3O,GAC9B2D,IAAK,EACLC,UAAW,EACXC,KAAM,KACPpB,YAAY,MACZC,MAAA,e,sCAEFnF,EAAAA,EAAAA,IAAsC,QAAhCD,MAAM,mBAAkB,KAAC,KAC/BF,EAAAA,EAAAA,IAOEqG,EAAA,CAnGtBlB,WA6F+BzF,EAAAkR,WAAWY,YA7F1C,sBAAAnQ,EAAA,KAAAA,EAAA,GAAAuB,GA6F+BlD,EAAAkR,WAAWY,YAAW5O,GAC9B2D,IAAK7G,EAAAkR,WAAWW,aAAe,EAC/B/K,UAAW,EACXC,KAAM,KACPpB,YAAY,MACZC,MAAA,e,kCAlGtBhE,EAAA,OAAAA,EAAA,KAyGctB,EAAAA,EAAAA,IAQS+Q,EAAA,CARAiS,KAAM,GAAC,CAzG9B7hB,SAAAC,EAAAA,EAAAA,KA0GgB,IAMe,EANfpB,EAAAA,EAAAA,IAMe+E,EAAA,CANDC,MAAM,QAAM,CA1G1C7D,SAAAC,EAAAA,EAAAA,KA2GkB,IAIE,EAJFpB,EAAAA,EAAAA,IAIEyF,EAAA,CA/GpBN,WA4G6BzF,EAAAkR,WAAWlL,SA5GxC,sBAAArE,EAAA,KAAAA,EAAA,GAAAuB,GA4G6BlD,EAAAkR,WAAWlL,SAAQ9C,GAC5ByC,YAAY,YACZiM,UAAA,I,0BA9GpBhQ,EAAA,OAAAA,EAAA,OAAAA,EAAA,KAoHYnB,EAAAA,EAAAA,IAGM,MAHN2G,GAGM,EAFJ9G,EAAAA,EAAAA,IAA6De,EAAA,CAAlDC,KAAK,UAAWC,QAAOvB,EAAA+R,a,CArHhDtQ,SAAAC,EAAAA,EAAAA,KAqH6D,IAAEC,EAAA,MAAAA,EAAA,MArH/DZ,EAAAA,EAAAA,IAqH6D,UArH7Da,EAAA,G,gBAsHctB,EAAAA,EAAAA,IAA8Ce,EAAA,CAAlCE,QAAOvB,EAAAgS,aAAW,CAtH5CvQ,SAAAC,EAAAA,EAAAA,KAsH8C,IAAEC,EAAA,MAAAA,EAAA,MAtHhDZ,EAAAA,EAAAA,IAsH8C,UAtH9Ca,EAAA,G,oBAAAA,EAAA,G,0BA8BqB5B,EAAA+Q,sBA9BrBnP,EAAA,KA4HMnB,EAAAA,EAAAA,IAuHM,MAvHN4H,GAuHM,EAtHJ/H,EAAAA,EAAAA,IAqHU0C,EAAA,CArHDxC,MAAM,gBAAc,CA7HrCiB,SAAAC,EAAAA,EAAAA,KA8HU,IAOM,EAPNjB,EAAAA,EAAAA,IAOM,MAPNkI,GAOM,gBANJlI,EAAAA,EAAAA,IAAe,UAAX,UAAM,KACVA,EAAAA,EAAAA,IAIM,MAJNwI,GAIM,EAHJ3I,EAAAA,EAAAA,IAEYe,EAAA,CAFDC,KAAK,UAAWC,QAAOvB,EAAA4Q,e,CAjIhDnP,SAAAC,EAAAA,EAAAA,KAkIgB,IAA+B,EAA/BpB,EAAAA,EAAAA,IAA+BoE,EAAA,MAlI/CjD,SAAAC,EAAAA,EAAAA,KAkIyB,IAAY,EAAZpB,EAAAA,EAAAA,IAAYuQ,MAlIrCjP,EAAA,I,eAAAb,EAAAA,EAAAA,IAkI+C,cAlI/Ca,EAAA,G,yCAuIU1B,EAAAA,EAAAA,IAiGWkS,EAAA,CAhGR9O,KAAMtD,EAAAqS,gBACPzM,MAAA,eACA0M,OAAA,GAEAC,OAAA,GACA/R,MAAM,mBACNgS,OAAO,MACNC,SAAQzS,EAAA0S,c,CA/IrBjR,SAAAC,EAAAA,EAAAA,KAiJY,IAA2D,EAA3DpB,EAAAA,EAAAA,IAA2DqS,EAAA,CAA1CpN,KAAK,YAAYD,MAAM,KAAKoD,MAAM,SACnDpI,EAAAA,EAAAA,IAAmEqS,EAAA,CAAlDpN,KAAK,kBAAkBD,MAAM,OAAOoD,MAAM,SAC3DpI,EAAAA,EAAAA,IAAgDqS,EAAA,CAA/BpN,KAAK,WAAWD,MAAM,UACvChF,EAAAA,EAAAA,IAA2EqS,EAAA,CAA1DpN,KAAK,wBAAwBD,MAAM,SAASoD,MAAM,SACnEpI,EAAAA,EAAAA,IAIkBqS,EAAA,CAJDrN,MAAM,QAAQoD,MAAM,M,CACxBjH,SAAOC,EAAAA,EAAAA,KAC+BkR,GADxB,EAtJvC7R,EAAAA,EAAAA,KAAAC,EAAAA,EAAAA,IAuJmBgS,WAAWJ,EAAME,IAAIlM,UAAU4F,QAAQ,IAAD,MAvJzD5K,EAAA,KA0JYtB,EAAAA,EAAAA,IAA+DqS,EAAA,CAA9CpN,KAAK,eAAeD,MAAM,MAAMoD,MAAM,SACvDpI,EAAAA,EAAAA,IAA8DqS,EAAA,CAA7CpN,KAAK,aAAaD,MAAM,OAAOoD,MAAM,SACtDpI,EAAAA,EAAAA,IA0BkBqS,EAAA,CAzBhBrN,MAAM,YACNoD,MAAM,MACNwK,MAAM,U,CAEKzR,SAAOC,EAAAA,EAAAA,KAkBVkR,GAlBiB,CACZA,EAAME,IAAIK,oBAAiB,WAAtCrT,EAAAA,EAAAA,IAiBM,MAjBNmS,GAiBM,gBAfJnS,EAAAA,EAAAA,IAWM8C,EAAAA,GAAA,MA/KxBC,EAAAA,EAAAA,IAqK4C7C,EAAAqT,eAAeT,EAAME,IAAIK,oBArKrE,CAqK4BG,EAAMzD,M,WADhB/P,EAAAA,EAAAA,IAWM,OATHM,IAAKyP,EACNrP,MAAM,4BACLe,QAAK2B,GAAElD,EAAAuT,aAAavT,EAAAqT,eAAeT,EAAME,IAAIK,mBAAoBtD,I,EAElEvP,EAAAA,EAAAA,IAIYkT,EAAA,CAHV5N,MAAA,6BACC6N,IAAG,GAAKzT,EAAA0T,UAAUJ,IACnBK,IAAI,S,mBA7K1BzB,O,MAgL6BlS,EAAAqT,eAAeT,EAAME,IAAIK,mBAAmBxD,OAAS,IAAH,WAA7D7P,EAAAA,EAAAA,IAEM,MAFNqS,IAEMnR,EAAAA,EAAAA,IADDhB,EAAAqT,eAAeT,EAAME,IAAIK,mBAAmBxD,QAAS,KAC1D,KAlLlBtP,EAAAA,EAAAA,IAAA,uBAoLgBP,EAAAA,EAAAA,IAAqB,OApLrCsT,GAoL6B,SApL7BxR,EAAA,KAuLYtB,EAAAA,EAAAA,IA0BkBqS,EAAA,CAzBhBrN,MAAM,YACNoD,MAAM,MACNwK,MAAM,U,CAEKzR,SAAOC,EAAAA,EAAAA,KAkBVkR,GAlBiB,CACZA,EAAME,IAAIiB,mBAAgB,WAArCjU,EAAAA,EAAAA,IAiBM,MAjBN8T,GAiBM,gBAfJ9T,EAAAA,EAAAA,IAWM8C,EAAAA,GAAA,MA1MxBC,EAAAA,EAAAA,IAgM4C7C,EAAAqT,eAAeT,EAAME,IAAIiB,mBAhMrE,CAgM4BT,EAAMzD,M,WADhB/P,EAAAA,EAAAA,IAWM,OATHM,IAAKyP,EACNrP,MAAM,4BACLe,QAAK2B,GAAElD,EAAAuT,aAAavT,EAAAqT,eAAeT,EAAME,IAAIiB,kBAAmBlE,I,EAEjEvP,EAAAA,EAAAA,IAIYkT,EAAA,CAHV5N,MAAA,6BACC6N,IAAG,GAAKzT,EAAA0T,UAAUJ,IACnBK,IAAI,S,mBAxM1BE,O,MA2M6B7T,EAAAqT,eAAeT,EAAME,IAAIiB,kBAAkBpE,OAAS,IAAH,WAA5D7P,EAAAA,EAAAA,IAEM,MAFNgU,IAEM9S,EAAAA,EAAAA,IADDhB,EAAAqT,eAAeT,EAAME,IAAIiB,kBAAkBpE,QAAS,KACzD,KA7MlBtP,EAAAA,EAAAA,IAAA,uBA+MgBP,EAAAA,EAAAA,IAAqB,OA/MrCkU,GA+M6B,SA/M7BpS,EAAA,KAkNYtB,EAAAA,EAAAA,IAqBkBqS,EAAA,CArBDrN,MAAM,KAAKoD,MAAM,KAAK0L,MAAM,S,CAChC3S,SAAOC,EAAAA,EAAAA,KAkBVkR,GAlBiB,EACvBnS,EAAAA,EAAAA,IAiBM,MAjBNwT,GAiBM,EAhBJ3T,EAAAA,EAAAA,IAOYe,EAAA,CANVC,KAAK,UACL+K,KAAK,QACJ9K,QAAK2B,GAAElD,EAAAuU,WAAW3B,EAAME,IAAIjT,IAC7B2U,KAAA,I,CAzNpB/S,SAAAC,EAAAA,EAAAA,KA0NmB,IAEDC,EAAA,MAAAA,EAAA,MA5NlBZ,EAAAA,EAAAA,IA0NmB,YA1NnBa,EAAA,G,mBA6NkBtB,EAAAA,EAAAA,IAOYe,EAAA,CANVC,KAAK,SACL+K,KAAK,QACJ9K,QAAK2B,GAAElD,EAAAyU,cAAc7B,EAAME,KAC5B0B,KAAA,I,CAjOpB/S,SAAAC,EAAAA,EAAAA,KAkOmB,IAEDC,EAAA,MAAAA,EAAA,MApOlBZ,EAAAA,EAAAA,IAkOmB,YAlOnBa,EAAA,G,uBAAAA,EAAA,OAAAA,EAAA,G,4BA2IuB5B,EAAAuD,WA+FFvD,EAAA0U,cAAW,WAAtB5U,EAAAA,EAAAA,IAGM,MAHNoU,GAGM,EAFJ5T,EAAAA,EAAAA,IAA8CoE,EAAA,CAArClE,MAAM,WAAS,CA3OpCiB,SAAAC,EAAAA,EAAAA,KA2OqC,IAAW,EAAXpB,EAAAA,EAAAA,IAAWsU,MA3OhDhT,EAAA,I,eAAAb,EAAAA,EAAAA,IA2O0D,kBA3O1DV,EAAAA,EAAAA,IAAA,OA+O4D,IAAnBL,EAAA6U,QAAQlF,QAAiB3P,EAAAuD,SA/OlElD,EAAAA,EAAAA,IAAA,SA+OyE,WAA/DP,EAAAA,EAAAA,IAEM,MAFNqU,GAEM,EADJ7T,EAAAA,EAAAA,IAAiCyU,EAAA,CAAvBC,YAAY,iBAhPlCpT,EAAA,Q,eAsPInB,EAAAA,EAAAA,IAEM,OAFDD,MAAM,UAAQ,EACjBC,EAAAA,EAAAA,IAA2B,SAAxB,qBAAoB,IAKjBT,EAAAiV,aAAU,WADlB/U,EAAAA,EAAAA,IAKEgV,EAAA,CAhQN9U,IAAA,EA6PO,WAAUJ,EAAAmV,cACV,gBAAenV,EAAAoV,aACfC,QAAOrV,EAAAsV,a,iDA/PdjV,EAAAA,EAAAA,IAAA,Q,CAkRA,MAAMgT,GAAkBC,IACtB,IAAKA,EAAM,MAAO,GAElB,IAEE,OAAIA,EAAK0C,WAAW,MAAQ1C,EAAK+H,SAAS,KACjCC,KAAKC,MAAMjI,GAGb,CAACA,EACV,CAAE,MAAOrP,GAGP,OAFAN,QAAQM,MAAM,YAAaA,GAEpB,CAACqP,EACV,GAIIiQ,GAAkBA,CAAC1H,EAAQva,KAC/B,IAAKua,EAAO2H,OAAQ,MAAO,GAE3B,IACE,MAAMA,EAASlI,KAAKC,MAAMM,EAAO2H,QACjC,OAAI7H,MAAMC,QAAQ4H,GACTA,EAAOhV,QAAOiV,GAASA,EAAMniB,OAASA,IAExC,EACT,CAAE,MAAO2C,GAEP,OADAN,QAAQM,MAAM,cAAeA,GACtB,EACT,GAGF,QACEZ,KAAM,mBACN8F,WAAY,CACVG,KAAI,MACJwR,QAAO,MACPC,KAAI,MACJC,UAAS,MACTC,QAAO,MACPC,SAAQ,MACRC,cAAa,MACbC,QAAOA,EAAAA,KAETxR,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MACT+K,GAAU5P,EAAAA,EAAAA,IAAI,IACd1B,GAAU0B,EAAAA,EAAAA,KAAI,GACd/C,GAAQ+C,EAAAA,EAAAA,IAAI,IACZ9C,GAAa8C,EAAAA,EAAAA,IAAI,IACjB8L,GAAkB9L,EAAAA,EAAAA,KAAI,GAGtByO,EAAU9H,EAAU9J,QAGpBmT,GAAahQ,EAAAA,EAAAA,KAAI,GACjBkQ,GAAgBlQ,EAAAA,EAAAA,IAAI,IACpBmQ,GAAenQ,EAAAA,EAAAA,IAAI,GAGnBuW,GAAOvW,EAAAA,EAAAA,IAAI,GACXwW,GAAWxW,EAAAA,EAAAA,IAAI,IACfyW,GAAUzW,EAAAA,EAAAA,KAAI,GACdyP,GAAczP,EAAAA,EAAAA,KAAI,GAGlBiM,GAAa9G,EAAAA,EAAAA,IAAS,CAC1BsF,OAAQ,KACRiC,UAAW,KACXjM,YAAa,KACbmM,YAAa,KACbC,YAAa,KACb9L,SAAU,KAINqM,GAAkBnI,EAAAA,EAAAA,KAAS,IACxB2K,EAAQ/O,MAAM0I,QAAOqN,IAE1B,GAAI3K,EAAWxB,QAAUmM,EAAOiB,UAAY5L,EAAWxB,OACrD,OAAO,EAIT,GAAIwB,EAAWxL,aAAemW,EAAOC,gBAAkB5K,EAAWxL,YAChE,OAAO,EAIT,GAA+B,OAA3BwL,EAAWW,aAAwBmB,WAAW6I,EAAOjV,UAAYsK,EAAWW,YAC9E,OAAO,EAET,GAA+B,OAA3BX,EAAWY,aAAwBkB,WAAW6I,EAAOjV,UAAYsK,EAAWY,YAC9E,OAAO,EAIT,GAAIZ,EAAWlL,WAAa6V,EAAO7V,SAASkT,cAAc/M,SAAS+E,EAAWlL,SAASkT,eACrF,OAAO,EAIT,GAAIhI,EAAWS,WAA6C,IAAhCT,EAAWS,UAAUhC,OAAc,CAC7D,MAAMoM,EAAY,IAAI1R,KAAK6G,EAAWS,UAAU,IAE1CqK,EAAU,IAAI3R,KAAK6G,EAAWS,UAAU,IAI9C,GAHAqK,EAAQC,SAAS,GAAI,GAAI,GAAI,MAGzBJ,EAAO9I,sBAQT,OAAO,EARyB,CAEhC,MAAMmJ,EAAarJ,EAAuBgJ,EAAO9I,uBACjD,GAAImJ,EAAaH,GAAaG,EAAaF,EACzC,OAAO,CAEX,CAIF,CAEA,OAAO,CAAI,MAKTnJ,EAA0B6Q,IAG9B,MAAMC,EAAaD,EAAkBtW,QAAQ,cAAe,IAC5D,OAAO,IAAI/C,KAAKsZ,EAAW,GAG7B9Y,EAAAA,EAAAA,KAAUC,UAER,IAAKpK,GAAKC,MAAMC,YAA0C,IAA5BF,GAAKC,MAAMO,KAAKiJ,QAG5C,OAFAjG,EAAAA,GAAUD,MAAM,aAChB4F,EAAOzF,KAAK,gBAIRkI,QAAQsX,IAAI,CAChBngB,IACAgI,IACAkR,KACA,IAIJ,MAAMlZ,EAAaqH,UACjB,IACE,MAAMjH,QAAiBC,EAAAA,EAAMC,IAAI6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUG,QACtEA,EAAM4D,MAAQjC,EAASP,IACzB,CAAE,MAAOW,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,WAClB,GAIIwH,EAAkBX,UACtB,IACE,MAAMjH,QAAiBC,EAAAA,EAAMC,IAAI6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUI,aACtEA,EAAW2D,MAAQjC,EAASP,IAC9B,CAAE,MAAOW,GACPN,QAAQM,MAAM,cAAeA,GAC7BC,EAAAA,GAAUD,MAAM,aAClB,GAGI0Y,EAAe7R,MAAOgU,GAAa,KAClCA,EAKHpK,EAAY5O,OAAQ,GAJpBvC,EAAQuC,OAAQ,EAChB0V,EAAK1V,MAAQ,EACb+O,EAAQ/O,MAAQ,IAKlB,IACE,MAAMzB,EAAS,CACbmX,KAAMA,EAAK1V,MACX2V,SAAUA,EAAS3V,MACnBJ,YAAawL,EAAWxL,YACxBmM,YAAaX,EAAWW,YACxBC,YAAaZ,EAAWY,YACxB9L,SAAUkL,EAAWlL,UAInBkL,EAAWS,WAA6C,IAAhCT,EAAWS,UAAUhC,SAC/CtL,EAAOsN,UAAY2J,KAAK6C,UAAUjN,EAAWS,YAG/C,MAAM9N,QAAiBC,EAAAA,EAAMC,IAC3B,GAAG6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUK,sBAAsB1B,GAAKC,MAAMO,KAAKrB,KAC9E,CAAEwE,WAIEwf,EAAmBhgB,EAASP,KAAKuR,QAAQwC,KAAIwE,IAAK,IACnDA,EACH5I,WAAY6Q,EAAejI,EAAO5I,YAClCF,sBAAuB+Q,EAAejI,EAAO9I,2BAI7C8B,EAAQ/O,MADNgZ,EACc,IAAIjK,EAAQ/O,SAAU+d,GAEtBA,EAGlBnI,EAAQ5V,MAAQjC,EAASP,KAAKoY,QAC1BA,EAAQ5V,OACV0V,EAAK1V,OAET,CAAE,MAAO7B,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,WAClB,CAAE,QACAV,EAAQuC,OAAQ,EAChB4O,EAAY5O,OAAQ,CACtB,GAGIge,EAAkB3H,IACtB,IAAKA,EAAa,MAAO,GACzB,MAAMC,EAAO,IAAI/R,KAAK8R,GACtB,OAAOC,EAAK2H,eAAe,QAAS,CAClCC,KAAM,UACNC,MAAO,UACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,QAAQ,GACR,EAGE3T,EAAiBA,KACrBiM,GAAc,EAGVrM,EAAeA,KACa,IAA5B5P,GAAKC,MAAMO,KAAKiJ,QAClBN,EAAOzF,KAAK,eAEZyF,EAAOzF,KAAK,SAAS1D,GAAKC,MAAMO,KAAK4b,UACvC,EAGItM,EAAqBA,KACzB3G,EAAOzF,KAAK,mBAAmB,EAG3BmQ,EAAcsI,IAClBhT,EAAOzF,KAAK,WAAWyY,IAAW,EAI9B9K,EAAcjH,gBACZ6R,IACNzY,EAAAA,GAAU+I,QAAQ,QAAQ,EAItB+E,EAAclH,UAClBoG,EAAWxB,OAAS,KACpBwB,EAAWS,UAAY,KACvBT,EAAWxL,YAAc,KACzBwL,EAAWW,YAAc,KACzBX,EAAWY,YAAc,KACzBZ,EAAWlL,SAAW,SAChB2W,IACNzY,EAAAA,GAAUsZ,KAAK,UAAU,EAIrB5M,EAAgB9F,UACpB,UAEQmS,GAAAA,EAAaC,QACjB,UACA,OACA,CACEC,kBAAmB,QACnBC,iBAAkB,SAClBK,2BAA2B,EAC3Bnc,KAAM,SAER+b,MAAKvS,gBAEC4S,GAAkB,IACvBH,OAAM9V,IACQ,WAAXA,GAEFkW,GACF,GAEJ,CAAE,MAAO1Z,GACPN,QAAQM,MAAM,YAAaA,GAC3BC,EAAAA,GAAUD,MAAM,UAAYA,EAAM0G,SAAW,QAC/C,GAII+S,EAAmB5S,UACvB,KAEE5G,EAAAA,EAAAA,IAAU,CACRyG,QAAS,0BACTrJ,KAAM,OACNsc,SAAU,MAIZ,MAAMC,EAAkBC,GAAAA,GAAUC,QAAQ,CACxCC,MAAM,EACNxJ,KAAM,gBACNyJ,WAAY,uBAGd1a,EAAQuC,OAAQ,EAGhB,MAAMoY,EAAc,CAClBxY,YAAawL,EAAWxL,YAAcwL,EAAWxL,iBAAc8E,EAC/DqH,YAAaX,EAAWW,YAAcX,EAAWW,iBAAcrH,EAC/DsH,YAAaZ,EAAWY,YAAcZ,EAAWY,iBAActH,EAC/DxE,SAAUkL,EAAWlL,eAAYwE,EACjCmH,UAAWT,EAAWS,UAAY2J,KAAK6C,UAAUjN,EAAWS,gBAAanH,EACzEkF,OAAQwB,EAAWxB,OAASwB,EAAWxB,YAASlF,GAGlD7G,QAAQC,IAAI,aAAcsa,GAG1B,MAAM,KAAE5a,SAAeQ,EAAAA,EAAMC,IAC3B,GAAG6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUS,uBAAuB9B,GAAKC,MAAMO,KAAKrB,KAC/E,CAAEwE,OAAQ6Z,IAKZ,GAFAva,QAAQC,IAAI,UAAUN,EAAKqM,kBAEP,IAAhBrM,EAAKqM,OAIP,OAHAkO,EAAgBO,QAChBla,EAAAA,GAAUkK,QAAQ,qBAClB7K,EAAQuC,OAAQ,GAKlB+X,EAAgBQ,QAAQ,QAAQ/a,EAAKqM,iBAGrC,MAAM2O,EAAahb,EAAK+T,KAAIwE,IAE1B,MAAM0C,EAAelL,GAAewI,EAAO1I,mBACrCqL,EAAcnL,GAAewI,EAAO9H,kBAE1C,MAAO,CACL,KAAM8H,EAAO1a,UACb,OAAQ0a,EAAO4C,gBACf,OAAQ5C,EAAO7V,SACf,SAAU6V,EAAOjV,SACjB,SAAUkd,EAAejI,EAAO9I,uBAChC,MAAO8I,EAAOpM,cAAgB,KAC9B,QAAS8O,EAAa5O,OAAS,EAAI4O,EAAa,GAAK,GACrD,QAASC,EAAY7O,OAAS,EAAI6O,EAAY,GAAK,GACpD,IAIGzZ,EAAWmM,EAAWxB,OACxBxN,EAAM4D,MAAM+F,MAAKC,GAAKA,EAAEjM,KAAOqR,EAAWxB,UAASrM,MAAQ,OAC3D,OACE8J,EAAW,UAAUpI,IAGrBuf,EAAgB,CACpB,CAAE9P,KAAM,KAAM+C,MAAO,MACrB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,MAAO+C,MAAO,OACtB,CAAE/C,KAAM,QAAS+C,MAAO,QAASrL,SAAS,GAC1C,CAAEsI,KAAM,QAAS+C,MAAO,QAASrL,SAAS,IAItCwH,EAAUmC,OAAO7P,SAAS8P,OAG1BW,EAAaA,CAACiI,EAAS5P,KAC3B,MAAM6P,EAAUlR,KAAKC,MAAOgR,EAAU5P,EAAS,KAC/C+O,EAAgBQ,QAAQ,QAAQM,OAAaD,KAAW5P,KAAS,EAI7D5B,QAAesJ,GAAwB8H,EAAYnR,EAAUmX,EAAe5Q,EAAS+C,GAG3FoH,EAAgBO,QAEZlR,EACFhJ,EAAAA,GAAU+I,QAAQ,QAElB/I,EAAAA,GAAUD,MAAM,WAEpB,CAAE,MAAOA,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,UAAYA,EAAM0G,SAAW,QAC/C,CAAE,QACApH,EAAQuC,OAAQ,EAEhBgY,GAAAA,GAAUC,UAAUK,OACtB,GAIIT,EAAsB7S,UAC1B,IAEE,MAAM+S,EAAkBC,GAAAA,GAAUC,QAAQ,CACxCC,MAAM,EACNxJ,KAAM,gBACNyJ,WAAY,uBAGd1a,EAAQuC,OAAQ,EAGhB,MAAMoY,EAAc,CAClBxY,YAAawL,EAAWxL,YAAcwL,EAAWxL,iBAAc8E,EAC/DqH,YAAaX,EAAWW,YAAcX,EAAWW,iBAAcrH,EAC/DsH,YAAaZ,EAAWY,YAAcZ,EAAWY,iBAActH,EAC/DxE,SAAUkL,EAAWlL,eAAYwE,EACjCmH,UAAWT,EAAWS,UAAY2J,KAAK6C,UAAUjN,EAAWS,gBAAanH,EACzEkF,OAAQwB,EAAWxB,OAASwB,EAAWxB,YAASlF,IAI5C,KAAElH,SAAeQ,EAAAA,EAAMC,IAC3B,GAAG6H,EAAUnJ,OAAOmJ,EAAU7J,UAAUS,uBAAuB9B,GAAKC,MAAMO,KAAKrB,KAC/E,CAAEwE,OAAQ6Z,IAGZ,GAAoB,IAAhB5a,EAAKqM,OAIP,OAHAkO,EAAgBO,QAChBla,EAAAA,GAAUkK,QAAQ,qBAClB7K,EAAQuC,OAAQ,GAKlB+X,EAAgBQ,QAAQ,QAAQ/a,EAAKqM,iBAGrC,MAAM2O,EAAahb,EAAK+T,KAAIwE,IAAK,CAC/B,KAAMA,EAAO1a,UACb,OAAQ0a,EAAO4C,gBACf,OAAQ5C,EAAO7V,SACf,SAAU6V,EAAOjV,SACjB,SAAUkd,EAAejI,EAAO9I,uBAChC,MAAO8I,EAAOpM,cAAgB,KAC9B,QAASoM,EAAO1I,kBAAoB,IAAM,IAC1C,QAAS0I,EAAO9H,iBAAmB,IAAM,QAIrChP,EAAWmM,EAAWxB,OACxBxN,EAAM4D,MAAM+F,MAAKC,GAAKA,EAAEjM,KAAOqR,EAAWxB,UAASrM,MAAQ,OAC3D,OACE8J,EAAW,UAAUpI,IAGrBuf,EAAgB,CACpB,CAAE9P,KAAM,KAAM+C,MAAO,MACrB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,OAAQ+C,MAAO,QACvB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,SAAU+C,MAAO,UACzB,CAAE/C,KAAM,MAAO+C,MAAO,OACtB,CAAE/C,KAAM,QAAS+C,MAAO,SACxB,CAAE/C,KAAM,QAAS+C,MAAO,UAIpBrK,QAAegN,GAAcoE,EAAYnR,EAAUmX,GAGzDzG,EAAgBO,QAEZlR,EACFhJ,EAAAA,GAAU+I,QAAQ,QAElB/I,EAAAA,GAAUD,MAAM,WAEpB,CAAE,MAAOA,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,UAAYA,EAAM0G,SAAW,QAC/C,CAAE,QACApH,EAAQuC,OAAQ,EAEhBgY,GAAAA,GAAUC,UAAUK,OACtB,GAII3J,EAAiBoH,IACrBoB,GAAAA,EAAaC,QACX,oBACA,KACA,CACEC,kBAAmB,KACnBC,iBAAkB,KAClB9b,KAAM,YAGP+b,MAAKvS,UACJ,UACQhH,EAAAA,EAAMwZ,OAAO,GAAG1R,EAAUnJ,OAAOmJ,EAAU7J,UAAUK,iBAAiByZ,EAAOhc,MACnFqE,EAAAA,GAAU+I,QAAQ,cACZ0P,GACR,CAAE,MAAO1Y,GACPN,QAAQM,MAAM,UAAWA,GACzBC,EAAAA,GAAUD,MAAM,SAClB,KAEDsZ,OAAM,KACLrZ,EAAAA,GAAUsZ,KAAK,QAAQ,GACvB,EAIAjK,EAAeA,CAACqL,EAAO/O,KAE3B,MAAMgP,EAAalD,MAAMC,QAAQgD,GAASA,EAAQ,CAACA,GACnDzJ,EAAcrP,MAAQ+Y,EAAWxH,KAAI/D,GAAQ,GAAGI,IAAUJ,MAC1D8B,EAAatP,MAAQ+J,GAAS,EAC9BoF,EAAWnP,OAAQ,CAAI,EAInBwP,EAAcA,KAClBL,EAAWnP,OAAQ,CAAK,EAIpB4M,EAAe5H,UACnB,MAAMyZ,EAAUxF,EAAE9O,OAGhBsU,GACAA,EAAQvF,eACPtK,EAAY5O,OACb4V,EAAQ5V,OACRye,EAAQvF,aAAeuF,EAAQtF,UAAYsF,EAAQrF,aAAe,WAE5DvC,GAAa,EACrB,EAGF,MAAO,CACL9H,UACAxC,kBACA9O,UACArB,QACAC,aACA4O,kBACAG,aACAa,cACAC,cACApB,gBACAyC,eAAc,GACdkQ,mBACA7S,iBACAJ,eACAE,qBACA+D,aACAE,gBAEAQ,aACAE,gBACAC,eACA7B,eACA+B,cACA5B,UACA8H,OACAC,WACAC,UACAhH,cACAhC,eAEJ,GC91BF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,IAAQ,CAAC,YAAY,qBAEzF,UCAA,MAAM8R,GAAS,CACb,CACElR,KAAM,SACNjQ,KAAM,QACNohB,UAAWC,GACXC,KAAM,CAAEC,cAAc,IAExB,CACEtR,KAAM,mBACNjQ,KAAM,iBACNohB,UAAWI,GACXF,KAAM,CAAEC,cAAc,EAAME,iBAAiB,IAE/C,CACExR,KAAM,IACNjQ,KAAM,gBACNohB,UAAWM,EACXJ,KAAM,CAAEC,cAAc,EAAMI,oBAAoB,IAElD,CACE1R,KAAM,iBACNjQ,KAAM,eACNohB,UAAWQ,GACXN,KAAM,CAAEC,cAAc,EAAMI,oBAAoB,IAElD,CACE1R,KAAM,cACNjQ,KAAM,aACNohB,UAAWS,GACX1b,MAAO,CAAE3J,GAAI,MACb8kB,KAAM,CAAEC,cAAc,IAExB,CACEtR,KAAM,cACNjQ,KAAM,aACNohB,UAAWS,GACX1b,OAAO,EACPmb,KAAM,CAAEC,cAAc,IAExB,CACEtR,KAAM,YACNjQ,KAAM,YACNohB,UAAWU,EACX3b,OAAO,EACPmb,KAAM,CAAEC,cAAc,IAExB,CACEtR,KAAM,mBACNjQ,KAAM,cACNohB,UAAWW,GACX5b,OAAO,EACPmb,KAAM,CAAEC,cAAc,KAIpB/a,IAASwb,EAAAA,EAAAA,IAAa,CAC1BC,SAASC,EAAAA,EAAAA,IAAiBC,KAC1BhB,YAIF3a,GAAO4b,YAAW,CAACC,EAAIC,EAAMC,KAE3B,MAAMhB,EAAec,EAAGG,QAAQlX,MAAKkN,GAAUA,EAAO8I,KAAKC,eACrDI,EAAqBU,EAAGG,QAAQlX,MAAKkN,GAAUA,EAAO8I,KAAKK,qBAC3DF,EAAkBY,EAAGG,QAAQlX,MAAKkN,GAAUA,EAAO8I,KAAKG,kBAG9D,IAAIF,GAAiBlkB,GAAKC,MAAMC,WAMhC,GAAIokB,GAAsBtkB,GAAKC,MAAMC,YAA0C,IAA5BF,GAAKC,MAAMO,KAAKiJ,QAEjEyb,EAAK,CAAEviB,KAAM,YAAagB,OAAQ,CAAExE,GAAIa,GAAKC,MAAMO,KAAK4b,gBAK1D,GAAIgI,GAAmBpkB,GAAKC,MAAMC,YAA0C,IAA5BF,GAAKC,MAAMO,KAAKiJ,QAE9Dyb,EAAK,CAAEviB,KAAM,YAAagB,OAAQ,CAAExE,GAAIa,GAAKC,MAAMO,KAAK4b,eAF1D,CAOA,GAAgB,UAAZ4I,EAAGriB,OAAoB3C,GAAKC,MAAMC,WAYtC,MAAgB,MAAZ8kB,EAAGpS,MAAgB5S,GAAKC,MAAMC,WACA,IAA5BF,GAAKC,MAAMO,KAAKiJ,aAClByb,EAAK,CAAEviB,KAAM,iBAEwB,IAA5B3C,GAAKC,MAAMO,KAAKiJ,aACzByb,EAAK,CAAEviB,KAAM,cAAegB,OAAQ,CAAEqL,OAAQhP,GAAKC,MAAMO,KAAK4b,gBAG9D8I,EAAK,CAAEviB,KAAM,YAAagB,OAAQ,CAAExE,GAAIa,GAAKC,MAAMO,KAAK4b,gBAM5C,cAAZ4I,EAAGriB,MAAwB3C,GAAKC,MAAMC,YACV,IAA5BF,GAAKC,MAAMO,KAAKiJ,SAChBzJ,GAAKC,MAAMO,KAAK4b,UAAY/Q,SAAS2Z,EAAGrhB,OAAOxE,IAEjD+lB,EAAK,CAAEviB,KAAM,YAAagB,OAAQ,CAAExE,GAAIa,GAAKC,MAAMO,KAAK4b,WAK1D8I,KAlCkC,IAA5BllB,GAAKC,MAAMO,KAAKiJ,QAClByb,EAAK,CAAEviB,KAAM,iBACwB,IAA5B3C,GAAKC,MAAMO,KAAKiJ,QACzByb,EAAK,CAAEviB,KAAM,cAAegB,OAAQ,CAAEqL,OAAQhP,GAAKC,MAAMO,KAAK4b,WAE9D8I,EAAK,CAAEviB,KAAM,YAAagB,OAAQ,CAAExE,GAAIa,GAAKC,MAAMO,KAAK4b,UAT5D,MAhBE8I,EAAK,CAAEviB,KAAM,SAsDT,IAGR,UCjIA,MAAMyiB,GAAgBhiB,EAAAA,EAAMiiB,OAAO,CACjCjkB,QAAS8J,EAAU9J,QACnBkkB,QAAS,IACT9P,QAAS,CACP,eAAgB,oBAElB+P,iBAAkB,SAClBC,cAAe,WAIjBJ,GAAcK,aAAaC,QAAQC,KACjCC,IAEE,MAAMC,EAAQC,aAAaC,QAAQ,UAAYC,eAAeD,QAAQ,SAItE,OAHIF,IACFD,EAAOpQ,QAAQyQ,cAAgB,UAAUJ,KAEpCD,CAAM,IAEfriB,IACEN,QAAQM,MAAM,iBAAkBA,GACzBqI,QAAQsa,OAAO3iB,MAK1B6hB,GAAcK,aAAatiB,SAASwiB,KAClCxiB,GACSA,IAETI,IACE,GAAIA,EAAMJ,SACR,OAAQI,EAAMJ,SAASmF,QACrB,KAAK,IAEH,GAAI/E,EAAMqiB,OAAOjY,IAAIlC,SAAS,cAE5B,OAAOG,QAAQsa,OAAO3iB,GAGtBvD,GAAKmmB,SACL3iB,EAAAA,GAAUD,MAAM,eAChB4F,GAAOzF,KAAK,UAEd,MACF,KAAK,IACHF,EAAAA,GAAUD,MAAM,aAChB,MACF,KAAK,IACHC,EAAAA,GAAUD,MAAM,YAChB,MACF,KAAK,IACHC,EAAAA,GAAUD,MAAM,eAChB,MACF,QACEC,EAAAA,GAAUD,MAAMA,EAAMJ,SAASP,MAAMW,OAAS,aAEzCA,EAAMmiB,QACfliB,EAAAA,GAAUD,MAAM,gBAEhBC,EAAAA,GAAUD,MAAM,UAElB,OAAOqI,QAAQsa,OAAO3iB,EAAM,IAKhC,MAAM0H,GAAc,CAElB5H,GAAAA,CAAIrB,EAAU2B,EAAS,CAAC,GACtB,OAAOyhB,GAAc/hB,IAAIrB,EAAU,CAAE2B,UACvC,EAGA+e,IAAAA,CAAK1gB,EAAUY,EAAO,CAAC,GACrB,OAAOwiB,GAAc1C,KAAK1gB,EAAUY,EACtC,EAGAwM,QAAAA,CAASpN,EAAUwM,EAAU4X,GAC3B,MAAMR,EAAS,CACbpQ,QAAS,CACP,eAAgB,uBAElB8P,QAAS,IACTC,iBAAkB,SAClBC,cAAe,UAQjB,MAJgC,oBAArBY,IACTR,EAAOQ,iBAAmBA,GAGrBhB,GAAc1C,KAAK1gB,EAAUwM,EAAUoX,EAChD,EAGAnD,GAAAA,CAAIzgB,EAAUY,EAAO,CAAC,GACpB,OAAOwiB,GAAc3C,IAAIzgB,EAAUY,EACrC,EAGA0e,OAAAA,CAAQtf,EAAUwM,EAAU4X,GAC1B,MAAMR,EAAS,CACbpQ,QAAS,CACP,eAAgB,uBAElB8P,QAAS,IACTC,iBAAkB,SAClBC,cAAe,UAQjB,MAJgC,oBAArBY,IACTR,EAAOQ,iBAAmBA,GAGrBhB,GAAc3C,IAAIzgB,EAAUwM,EAAUoX,EAC/C,EAGAhJ,OAAO5a,GACL,OAAOojB,GAAcxI,OAAO5a,EAC9B,EAGAqkB,SAAUjB,GAAciB,UAG1B,UCrIA,MAAMC,GAAe,CACnB9lB,KAAM,KACNqlB,MAAO,KACP3lB,YAAY,EACZ2C,SAAS,EACTU,MAAO,MAIHtD,IAAQyJ,EAAAA,EAAAA,IAAS,IAClB4c,KAICC,GAAOA,KACX,MAAMC,EAAYV,aAAaC,QAAQ,QACjCU,EAAaX,aAAaC,QAAQ,SACxC,GAAIS,GAAaC,EACf,IACE,MAAMjmB,EAAOoa,KAAKC,MAAM2L,GACxBvmB,GAAMO,KAAOA,EACbP,GAAM4lB,MAAQY,EACdxmB,GAAMC,YAAa,EAEf+K,GAAYob,UAAYpb,GAAYob,SAAS7Q,UAC/CvK,GAAYob,SAAS7Q,QAAQkR,OAAO,iBAAmB,UAAUD,IAErE,CAAE,MAAOpI,GACPpb,QAAQM,MAAM,iCAAkC8a,GAChDyH,aAAaa,WAAW,QACxBb,aAAaa,WAAW,QAC1B,CACF,EAIIrlB,GAAQ8I,MAAOyE,EAAO8P,EAAUO,GAAa,EAAOL,EAAW,KAEnE5e,GAAM4C,SAAU,EAChB5C,GAAMsD,MAAQ,KAEdN,QAAQC,IAAI,uBAAwB2L,EAAO,QAASgQ,GAEpD,IAEE,MAAM+H,EAAW,CACf/X,QACAqQ,aACAL,YAIe,OAAbF,QAAkC7U,IAAb6U,GAAuC,KAAbA,GACjDiI,EAASjI,SAAWA,EACpB1b,QAAQC,IAAI,sBAEZD,QAAQC,IAAI,sBAGdD,QAAQC,IAAI,aAAc0jB,GAC1B,MAAMzjB,QAAiB8H,GAAYyX,KAAKxX,EAAU7J,UAAUC,MAAOslB,GACnE3jB,QAAQC,IAAI,YAAaC,EAASP,MAElC,MAAM,MAAEijB,KAAUrlB,GAAS2C,EAASP,KAoBpC,OAnBA3C,GAAMO,KAAOA,EACbP,GAAM4lB,MAAQA,EACd5lB,GAAMC,YAAa,EAGf+K,GAAYob,UAAYpb,GAAYob,SAAS7Q,UAC/CvK,GAAYob,SAAS7Q,QAAQkR,OAAO,iBAAmB,UAAUb,KAI/D3G,GACF4G,aAAae,QAAQ,OAAQjM,KAAK6C,UAAUjd,IAC5CslB,aAAae,QAAQ,QAAShB,KAG9BG,eAAea,QAAQ,OAAQjM,KAAK6C,UAAUjd,IAC9CwlB,eAAea,QAAQ,QAAShB,IAG3B,CAAEtZ,SAAS,EAAM/L,OAC1B,CAAE,MAAO+C,GAIP,OAFAtD,GAAMsD,MAAQA,EAAMJ,UAAUP,MAAMW,OAAS,eAC7CN,QAAQM,MAAM,eAAgBA,GACvB,CAAEgJ,SAAS,EAAOhJ,MAAOtD,GAAMsD,MACxC,CAAE,QACAtD,GAAM4C,SAAU,CAClB,GAIIsjB,GAASA,KACblmB,GAAMO,KAAO,KACbP,GAAM4lB,MAAQ,KACd5lB,GAAMC,YAAa,EACf+K,GAAYob,UAAYpb,GAAYob,SAAS7Q,gBACxCvK,GAAYob,SAAS7Q,QAAQkR,OAAO,iBAE7CZ,aAAaa,WAAW,QACxBb,aAAaa,WAAW,SACxBX,eAAeW,WAAW,QAC1BX,eAAeW,WAAW,QAAQ,EAI9B9iB,GAAUA,IACP5D,GAAMC,YAAcD,GAAMO,MAA+B,IAAvBP,GAAMO,KAAKiJ,QAIhDoG,GAAcA,IACX5P,GAAMC,YAAcD,GAAMO,MAA+B,IAAvBP,GAAMO,KAAKiJ,QAIhD6S,GAAYA,IACTrc,GAAMO,KAAOP,GAAMO,KAAKrB,GAAK,KAIhC+c,GAAYA,IACTjc,GAAMO,KAAOP,GAAMO,KAAK4b,QAAU,KAI3CmK,KAEA,QACEtmB,SACAqB,SACA6kB,UACAtiB,WACAgM,eACAyM,aACAJ,cnBrHF,IACEvZ,KAAM,YACNuG,KAAAA,GACE,MAAMC,GAASC,EAAAA,EAAAA,MAGT7I,GAAWiJ,EAAAA,EAAAA,KAAS,IACnBxJ,GAAKC,MAAMC,WACTF,GAAKC,MAAMO,KAAKoO,UAAY5O,GAAKC,MAAMO,KAAKqO,MADhB,KAK/B/N,EAAeA,KACnBd,GAAKmmB,SACL3iB,EAAAA,GAAU+I,QAAQ,SAClBpD,EAAOzF,KAAK,SAAS,EAGvB,MAAO,CACL1D,KAAI,GACJO,WACAO,eAEJ,GoB1CF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,UrBGA,IACE2H,WAAY,CACVqe,UAASA,IAEX5d,KAAAA,GACE,MAAM6W,GAAQC,EAAAA,EAAAA,MAGRzgB,GAAaiK,EAAAA,EAAAA,KAAS,IACJ,WAAfuW,EAAMnN,OAGf,MAAO,CACLrT,aAEJ,GsBpBF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAASwnB,KAEpE,U,gCCAA,MAAMC,IAAMC,EAAAA,EAAAA,IAAUC,IAEtBF,GAAIrB,IAAIxc,IACR6d,GAAIrB,IAAIwB,GAAAA,EAAa,CACnBC,OAAQC,GAAAA,IAGVL,GAAIM,MAAM,O,GCfNC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB3d,IAAjB4d,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBO,EAAIF,E,WCzBxB,IAAIG,EAAW,GACfR,EAAoBS,EAAI,SAASzb,EAAQ0b,EAAUC,EAAIC,GACtD,IAAGF,EAAH,CAMA,IAAIG,EAAeC,IACnB,IAASC,EAAI,EAAGA,EAAIP,EAAS/Y,OAAQsZ,IAAK,CACrCL,EAAWF,EAASO,GAAG,GACvBJ,EAAKH,EAASO,GAAG,GACjBH,EAAWJ,EAASO,GAAG,GAE3B,IAJA,IAGIC,GAAY,EACPC,EAAI,EAAGA,EAAIP,EAASjZ,OAAQwZ,MACpB,EAAXL,GAAsBC,GAAgBD,IAAatT,OAAOC,KAAKyS,EAAoBS,GAAGS,OAAM,SAAShpB,GAAO,OAAO8nB,EAAoBS,EAAEvoB,GAAKwoB,EAASO,GAAK,IAChKP,EAASS,OAAOF,IAAK,IAErBD,GAAY,EACTJ,EAAWC,IAAcA,EAAeD,IAG7C,GAAGI,EAAW,CACbR,EAASW,OAAOJ,IAAK,GACrB,IAAIK,EAAIT,SACEre,IAAN8e,IAAiBpc,EAASoc,EAC/B,CACD,CACA,OAAOpc,CArBP,CAJC4b,EAAWA,GAAY,EACvB,IAAI,IAAIG,EAAIP,EAAS/Y,OAAQsZ,EAAI,GAAKP,EAASO,EAAI,GAAG,GAAKH,EAAUG,IAAKP,EAASO,GAAKP,EAASO,EAAI,GACrGP,EAASO,GAAK,CAACL,EAAUC,EAAIC,EAwB/B,C,eC5BAZ,EAAoBqB,EAAI,SAASjB,GAChC,IAAIkB,EAASlB,GAAUA,EAAOmB,WAC7B,WAAa,OAAOnB,EAAO,UAAY,EACvC,WAAa,OAAOA,CAAQ,EAE7B,OADAJ,EAAoBwB,EAAEF,EAAQ,CAAErP,EAAGqP,IAC5BA,CACR,C,eCNAtB,EAAoBwB,EAAI,SAASrB,EAASsB,GACzC,IAAI,IAAIvpB,KAAOupB,EACXzB,EAAoB0B,EAAED,EAAYvpB,KAAS8nB,EAAoB0B,EAAEvB,EAASjoB,IAC5EoV,OAAOqU,eAAexB,EAASjoB,EAAK,CAAE0pB,YAAY,EAAM/lB,IAAK4lB,EAAWvpB,IAG3E,C,eCPA8nB,EAAoB6B,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAOrnB,MAAQ,IAAIsnB,SAAS,cAAb,EAChB,CAAE,MAAOlL,GACR,GAAsB,kBAAXlJ,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,eCAxBqS,EAAoB0B,EAAI,SAASM,EAAK3kB,GAAQ,OAAOiQ,OAAO2U,UAAUC,eAAe5B,KAAK0B,EAAK3kB,EAAO,C,eCCtG2iB,EAAoBoB,EAAI,SAASjB,GACX,qBAAXgC,QAA0BA,OAAOC,aAC1C9U,OAAOqU,eAAexB,EAASgC,OAAOC,YAAa,CAAExkB,MAAO,WAE7D0P,OAAOqU,eAAexB,EAAS,aAAc,CAAEviB,OAAO,GACvD,C,eCDA,IAAIykB,EAAkB,CACrB,IAAK,GAaNrC,EAAoBS,EAAEQ,EAAI,SAASqB,GAAW,OAAoC,IAA7BD,EAAgBC,EAAgB,EAGrF,IAAIC,EAAuB,SAASC,EAA4BpnB,GAC/D,IAKI6kB,EAAUqC,EALV5B,EAAWtlB,EAAK,GAChBqnB,EAAcrnB,EAAK,GACnBsnB,EAAUtnB,EAAK,GAGI2lB,EAAI,EAC3B,GAAGL,EAASja,MAAK,SAAS9O,GAAM,OAA+B,IAAxB0qB,EAAgB1qB,EAAW,IAAI,CACrE,IAAIsoB,KAAYwC,EACZzC,EAAoB0B,EAAEe,EAAaxC,KACrCD,EAAoBO,EAAEN,GAAYwC,EAAYxC,IAGhD,GAAGyC,EAAS,IAAI1d,EAAS0d,EAAQ1C,EAClC,CAEA,IADGwC,GAA4BA,EAA2BpnB,GACrD2lB,EAAIL,EAASjZ,OAAQsZ,IACzBuB,EAAU5B,EAASK,GAChBf,EAAoB0B,EAAEW,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOtC,EAAoBS,EAAEzb,EAC9B,EAEI2d,EAAqBC,KAAK,mDAAqDA,KAAK,oDAAsD,GAC9ID,EAAmBjb,QAAQ6a,EAAqBM,KAAK,KAAM,IAC3DF,EAAmBzmB,KAAOqmB,EAAqBM,KAAK,KAAMF,EAAmBzmB,KAAK2mB,KAAKF,G,IC/CvF,IAAIG,EAAsB9C,EAAoBS,OAAEne,EAAW,CAAC,MAAM,WAAa,OAAO0d,EAAoB,KAAO,IACjH8C,EAAsB9C,EAAoBS,EAAEqC,E","sources":["webpack://hazardous-waste-management-frontend/./src/App.vue","webpack://hazardous-waste-management-frontend/./src/components/AppHeader.vue","webpack://hazardous-waste-management-frontend/./src/config/api.js","webpack://hazardous-waste-management-frontend/./src/views/UnitSelection.vue","webpack://hazardous-waste-management-frontend/./src/views/UnitSelection.vue?83cf","webpack://hazardous-waste-management-frontend/./src/views/WasteForm.vue","webpack://hazardous-waste-management-frontend/./src/views/WasteForm.vue?56c2","webpack://hazardous-waste-management-frontend/./src/views/RecordsList.vue","webpack://hazardous-waste-management-frontend/./src/utils/exportUtils.js","webpack://hazardous-waste-management-frontend/./src/views/RecordsList.vue?c4c8","webpack://hazardous-waste-management-frontend/./src/views/Login.vue","webpack://hazardous-waste-management-frontend/./src/views/Login.vue?240b","webpack://hazardous-waste-management-frontend/./src/views/EditRecord.vue","webpack://hazardous-waste-management-frontend/./src/views/EditRecord.vue?7d9b","webpack://hazardous-waste-management-frontend/./src/views/UserManagement.vue","webpack://hazardous-waste-management-frontend/./src/views/UserManagement.vue?8bda","webpack://hazardous-waste-management-frontend/./src/views/AdminRecords.vue","webpack://hazardous-waste-management-frontend/./src/views/AdminRecords.vue?960a","webpack://hazardous-waste-management-frontend/./src/router/index.js","webpack://hazardous-waste-management-frontend/./src/config/httpService.js","webpack://hazardous-waste-management-frontend/./src/store/auth.js","webpack://hazardous-waste-management-frontend/./src/components/AppHeader.vue?1f6a","webpack://hazardous-waste-management-frontend/./src/App.vue?7ccd","webpack://hazardous-waste-management-frontend/./src/main.js","webpack://hazardous-waste-management-frontend/webpack/bootstrap","webpack://hazardous-waste-management-frontend/webpack/runtime/chunk loaded","webpack://hazardous-waste-management-frontend/webpack/runtime/compat get default export","webpack://hazardous-waste-management-frontend/webpack/runtime/define property getters","webpack://hazardous-waste-management-frontend/webpack/runtime/global","webpack://hazardous-waste-management-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://hazardous-waste-management-frontend/webpack/runtime/make namespace object","webpack://hazardous-waste-management-frontend/webpack/runtime/jsonp chunk loading","webpack://hazardous-waste-management-frontend/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <app-header v-if=\"showHeader\" />\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport AppHeader from './components/AppHeader.vue';\r\n\r\nexport default {\r\n  components: {\r\n    AppHeader\r\n  },\r\n  setup() {\r\n    const route = useRoute();\r\n    \r\n    // 仅在非登录页面显示头部\r\n    const showHeader = computed(() => {\r\n      return route.path !== '/login';\r\n    });\r\n    \r\n    return {\r\n      showHeader\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\nhtml, body {\r\n  margin: 0;\r\n  padding: 0;\r\n  height: 100%;\r\n  font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\r\n}\r\n\r\n#app {\r\n  min-height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"app-header\">\r\n    <div class=\"header-title\">\r\n      <h1>危险废物管理系统</h1>\r\n    </div>\r\n    <div class=\"user-info\" v-if=\"auth.state.isLoggedIn\">\r\n      <span class=\"welcome-text\">\r\n        欢迎,\r\n        <strong>{{ userName }}</strong>\r\n        <span v-if=\"auth.state.user.unit_name\" class=\"unit-tag\">\r\n          {{ auth.state.user.unit_name }}\r\n        </span>\r\n      </span>\r\n      <el-button type=\"text\" class=\"logout-button\" @click=\"handleLogout\">\r\n        退出登录\r\n      </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'AppHeader',\r\n  setup() {\r\n    const router = useRouter();\r\n    \r\n    // 获取用户名，优先显示用户名，如果没有则显示手机号\r\n    const userName = computed(() => {\r\n      if (!auth.state.isLoggedIn) return '';\r\n      return auth.state.user.username || auth.state.user.phone;\r\n    });\r\n    \r\n    // 处理退出登录\r\n    const handleLogout = () => {\r\n      auth.logout();\r\n      ElMessage.success('已退出登录');\r\n      router.push('/login');\r\n    };\r\n    \r\n    return {\r\n      auth,\r\n      userName,\r\n      handleLogout\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 0 20px;\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.header-title h1 {\r\n  margin: 0;\r\n  font-size: 20px;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.welcome-text {\r\n  font-size: 14px;\r\n}\r\n\r\n.role-tag, .unit-tag {\r\n  font-size: 12px;\r\n  margin-left: 5px;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.logout-button {\r\n  color: white;\r\n  font-weight: bold;\r\n  margin-left: 15px;\r\n}\r\n\r\n.logout-button:hover {\r\n  color: #f0f0f0;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.el-dropdown-link {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  color: white;\r\n}\r\n\r\n/* 移动端适配 */\r\n@media screen and (max-width: 768px) {\r\n  .app-header {\r\n    padding: 0 10px;\r\n    height: 50px;\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .header-title h1 {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .user-info {\r\n    gap: 10px;\r\n  }\r\n  \r\n  .welcome-text {\r\n    font-size: 12px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    align-items: center;\r\n  }\r\n  \r\n  .role-tag, .unit-tag {\r\n    font-size: 10px;\r\n    margin-left: 3px;\r\n    padding: 1px 4px;\r\n  }\r\n  \r\n  .logout-button {\r\n    margin-left: 5px;\r\n    padding: 4px 8px;\r\n  }\r\n}\r\n\r\n/* 小屏幕手机适配 */\r\n@media screen and (max-width: 480px) {\r\n  .app-header {\r\n    flex-direction: column;\r\n    height: auto;\r\n    padding: 10px;\r\n  }\r\n  \r\n  .header-title {\r\n    margin-bottom: 5px;\r\n  }\r\n  \r\n  .user-info {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .unit-tag {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n","// API 配置文件\r\n\r\n// 设置 API 基础 URL\r\n// 使用相对路径，这样会请求当前域名下的 API\r\n// 当通过Nginx代理访问时，这样可以确保请求正确路由\r\nconst API_BASE_URL = '';\r\n\r\nexport default {\r\n  baseURL: API_BASE_URL,\r\n  \r\n  // API 路径\r\n  endpoints: {\r\n    login: '/api/login',\r\n    users: '/api/users',\r\n    units: '/api/units',\r\n    wasteTypes: '/api/waste-types',\r\n    wasteRecords: '/api/waste-records',\r\n    wasteRecordsByUnit: '/api/waste-records',\r\n    wasteRecordDetail: '/api/waste-records/detail',\r\n    wasteRecordsByUser: '/api/waste-records/user',\r\n    exportWasteRecords: '/api/waste-records/export/user',\r\n  },\r\n  \r\n  // 获取完整 API URL\r\n  getUrl(endpoint) {\r\n    return `${this.baseURL}${endpoint}`;\r\n  }\r\n};\r\n","<template>\r\n  <div class=\"unit-selection-container\">\r\n    <div class=\"header\">\r\n      <h1>危险废物管理系统</h1>\r\n    </div>\r\n    <div class=\"content\">\r\n      <h2>请选择您的单位</h2>\r\n      <div class=\"units-grid\">\r\n        <el-card\r\n          v-for=\"unit in units\"\r\n          :key=\"unit.id\"\r\n          class=\"unit-card\"\r\n          shadow=\"hover\"\r\n          @click=\"selectUnit(unit)\"\r\n        >\r\n          <div class=\"unit-name\">{{ unit.name }}</div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\nimport api from '../config/api';\r\n\r\nexport default {\r\n  name: 'UnitSelection',\r\n  data() {\r\n    return {\r\n      units: [],\r\n      loading: false\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchUnits();\r\n  },\r\n  methods: {\r\n    async fetchUnits() {\r\n      this.loading = true;\r\n      try {\r\n        console.log('正在获取单位列表...');\r\n        const response = await axios.get(api.getUrl(api.endpoints.units));\r\n        console.log('获取单位列表成功:', response.data);\r\n        this.units = response.data;\r\n      } catch (error) {\r\n        console.error('获取单位列表失败:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    selectUnit(unit) {\r\n      this.$router.push({ name: 'WasteForm', params: { id: unit.id } });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.unit-selection-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  color: #333;\r\n}\r\n\r\n.units-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.unit-card {\r\n  height: 100px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.unit-card:hover {\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.unit-name {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n</style>\r\n","import { render } from \"./UnitSelection.vue?vue&type=template&id=a706bc72&scoped=true\"\nimport script from \"./UnitSelection.vue?vue&type=script&lang=js\"\nexport * from \"./UnitSelection.vue?vue&type=script&lang=js\"\n\nimport \"./UnitSelection.vue?vue&type=style&index=0&id=a706bc72&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a706bc72\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"waste-form-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\" v-if=\"isAdmin\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <div v-else></div>\r\n      <h1>危险废物填报</h1>\r\n      <div class=\"view-records\" @click=\"viewRecords\">\r\n        查看记录 <el-icon><document /></el-icon>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"unit-info\">\r\n        <h2>{{ unitName }}</h2>\r\n      </div>\r\n\r\n      <el-form \r\n        ref=\"wasteForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-position=\"top\"\r\n        class=\"waste-form\"\r\n      >\r\n        <el-form-item label=\"废物类型\" prop=\"wasteTypeId\">\r\n          <el-select v-model=\"form.wasteTypeId\" placeholder=\"请选择废物类型\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"type in wasteTypes\" \r\n              :key=\"type.id\" \r\n              :label=\"type.name\" \r\n              :value=\"type.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"产生地点\" prop=\"location\">\r\n          <el-input v-model=\"form.location\" placeholder=\"请输入废物产生地点\" />\r\n        </el-form-item>\r\n\r\n        <div class=\"form-row\">\r\n          <el-form-item label=\"收集日期\" class=\"date-item\">\r\n            <el-date-picker\r\n              v-model=\"form.collectionDate\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              format=\"YYYY-MM-DD\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              style=\"width: 100%\"\r\n              :editable=\"false\"\r\n              popper-class=\"date-picker-popup\"\r\n              :teleported=\"false\"\r\n            />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"收集时间\" class=\"time-item\">\r\n            <el-time-picker\r\n              v-model=\"form.collectionTime\"\r\n              format=\"HH:mm\"\r\n              placeholder=\"选择时间\"\r\n              value-format=\"HH:mm\"\r\n              style=\"width: 100%\"\r\n              :editable=\"false\"\r\n              popper-class=\"time-picker-popup\"\r\n              :teleported=\"false\"\r\n            >\r\n              <template #prefix>\r\n                <el-icon><clock /></el-icon>\r\n              </template>\r\n            </el-time-picker>\r\n          </el-form-item>\r\n        </div>\r\n\r\n        <el-form-item label=\"收集数量(吨)\" prop=\"quantity\">\r\n          <el-input-number\r\n            v-model=\"form.quantity\"\r\n            :min=\"0\"\r\n            :precision=\"3\"\r\n            :step=\"0.001\"\r\n            style=\"width: 100%\"\r\n            @focus=\"selectAllText($event)\"\r\n            :input-props=\"{\r\n              inputmode: 'decimal',\r\n              pattern: '[0-9]*[.,]?[0-9]*'\r\n            }\"\r\n            :controls=\"false\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集前）\" prop=\"photo_before\">\r\n          <div class=\"photo-tip\">请上传废物收集前的现场照片（最多5张）</div>\r\n          <div class=\"upload-warning\" v-if=\"showLargeFileWarning\">\r\n            <el-alert\r\n              title=\"上传大文件可能会导致处理时间较长，请耐心等待\"\r\n              type=\"warning\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n          </div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoBeforeChange\"\r\n            :on-remove=\"handlePhotoBeforeRemove\"\r\n            :file-list=\"fileListBefore\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集后）\" prop=\"photo_after\">\r\n          <div class=\"photo-tip\">请上传废物收集后的现场照片（最多5张）</div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoAfterChange\"\r\n            :on-remove=\"handlePhotoAfterRemove\"\r\n            :file-list=\"fileListAfter\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <div class=\"form-actions\">\r\n          <el-button type=\"primary\" class=\"submit-btn\" @click=\"submitForm\" :loading=\"loading\">提交</el-button>\r\n          <el-button class=\"reset-btn\" @click=\"resetForm\">重置</el-button>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 上传进度条对话框 -->\r\n    <el-dialog\r\n      v-model=\"showUploadProgress\"\r\n      title=\"正在上传文件\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <div class=\"upload-progress\">\r\n        <p>正在上传文件，请勿关闭页面...</p>\r\n        <el-progress \r\n          :percentage=\"uploadPercentage\" \r\n          :format=\"percentageFormat\"\r\n          :status=\"uploadPercentage === 100 ? 'success' : ''\"\r\n        ></el-progress>\r\n        <p class=\"upload-status\">{{ uploadStatus }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed, onBeforeUnmount } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Document, Plus, Clock } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\nimport Compressor from 'compressorjs';\r\n\r\nexport default {\r\n  name: 'WasteForm',\r\n  components: {\r\n    ArrowLeft,\r\n    Document,\r\n    Plus,\r\n    Clock\r\n  },\r\n  props: {\r\n    id: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  setup(props) {\r\n    const router = useRouter();\r\n    const wasteForm = ref(null);\r\n    const loading = ref(false);\r\n    const unitName = ref('');\r\n    const wasteTypes = ref([]);\r\n    const photoFilesBefore = ref([]);\r\n    const photoFilesAfter = ref([]);\r\n    const fileListBefore = ref([]);\r\n    const fileListAfter = ref([]);\r\n    const showUploadProgress = ref(false);\r\n    const uploadPercentage = ref(0);\r\n    const uploadStatus = ref('准备上传...');\r\n    const showLargeFileWarning = ref(false);\r\n    \r\n    // 检查用户是否为超级管理员\r\n    const isAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n\r\n    // 初始化表单，将日期和时间分开\r\n    const form = reactive({\r\n      wasteTypeId: '',\r\n      location: '',\r\n      collectionDate: new Date().toISOString().slice(0, 10), // 默认为当天\r\n      collectionTime: '08:00',\r\n      quantity: undefined,\r\n      photo_before: [],\r\n      photo_after: []\r\n    });\r\n\r\n    const rules = {\r\n      wasteTypeId: [\r\n        { required: true, message: '请选择废物类型', trigger: 'change' }\r\n      ],\r\n      location: [\r\n        { required: true, message: '请输入废物产生地点', trigger: 'blur' }\r\n      ],\r\n      collectionDate: [\r\n        { required: false }\r\n      ],\r\n      collectionTime: [\r\n        { required: false }\r\n      ],\r\n      quantity: [\r\n        { required: true, message: '请输入收集数量', trigger: 'change' }\r\n      ]\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // 设置viewport meta标签\r\n      const viewportMeta = document.createElement('meta');\r\n      viewportMeta.setAttribute('name', 'viewport');\r\n      viewportMeta.setAttribute('content', 'width=device-width,initial-scale=1.0,user-scalable=no,maximum-scale=1');\r\n      document.head.appendChild(viewportMeta);\r\n\r\n      // 保存原始的viewport meta标签（如果存在）\r\n      const originalViewport = document.querySelector('meta[name=\"viewport\"]');\r\n      if (originalViewport && originalViewport !== viewportMeta) {\r\n        originalViewport.remove();\r\n      }\r\n\r\n      await fetchUnitName();\r\n      await fetchWasteTypes();\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      // 移除我们添加的viewport meta标签\r\n      const viewportMeta = document.querySelector('meta[name=\"viewport\"]');\r\n      if (viewportMeta) {\r\n        viewportMeta.remove();\r\n      }\r\n\r\n      // 恢复原始的viewport设置\r\n      const originalViewport = document.createElement('meta');\r\n      originalViewport.setAttribute('name', 'viewport');\r\n      originalViewport.setAttribute('content', 'width=device-width,initial-scale=1.0');\r\n      document.head.appendChild(originalViewport);\r\n    });\r\n\r\n    const fetchUnitName = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        const unit = response.data.find(u => u.id === parseInt(props.id));\r\n        if (unit) {\r\n          unitName.value = unit.name;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching unit name:', error);\r\n        ElMessage.error('获取单位信息失败');\r\n      }\r\n    };\r\n\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching waste types:', error);\r\n        ElMessage.error('获取废物类型失败');\r\n      }\r\n    };\r\n\r\n    // 处理上传前的文件处理\r\n    const handleBeforeUpload = (file) => {\r\n      // 检查文件类型是否为图片\r\n      const acceptedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];\r\n      const isImage = acceptedTypes.includes(file.type);\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!');\r\n        return false;\r\n      }\r\n\r\n      // 检查文件大小（50MB = 50 * 1024 * 1024 bytes）\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        ElMessage.error('图片大小不能超过50MB!');\r\n        return false;\r\n      }\r\n      \r\n      // 返回一个Promise\r\n      return new Promise((resolve) => {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        console.log('开始处理图片:', file.name, '类型:', file.type, '大小:', (file.size / 1024).toFixed(2), 'KB');\r\n        \r\n        // 使用Compressor直接处理图片\r\n        new Compressor(file, {\r\n          quality: 0.6,           // 中等压缩 (0-1)\r\n          maxWidth: 1920,         // 最大宽度\r\n          maxHeight: 1920,        // 最大高度\r\n          mimeType: 'image/jpeg', // 强制转换为JPEG\r\n          convertSize: 0,         // 所有图片都转换格式\r\n          // 报告进度\r\n          beforeDraw() {\r\n            uploadPercentage.value = 30;\r\n            uploadStatus.value = '正在处理图片...';\r\n            console.log('图片处理中...');\r\n          },\r\n          // 报告进度\r\n          drew() {\r\n            uploadPercentage.value = 60;\r\n            uploadStatus.value = '正在压缩图片...';\r\n            console.log('图片绘制完成');\r\n          },\r\n          success(result) {\r\n            // 创建新的文件名（确保扩展名为.jpg）\r\n            const fileName = file.name.replace(/\\.[^/.]+$/, \"\") + '.jpg';\r\n            \r\n            // 创建新的File对象\r\n            const processedFile = new File([result], fileName, {\r\n              type: 'image/jpeg',\r\n              lastModified: new Date().getTime()\r\n            });\r\n            \r\n            // 输出处理结果日志\r\n            console.log('图片处理完成:');\r\n            console.log('- 原始大小:', (file.size / 1024).toFixed(2), 'KB');\r\n            console.log('- 处理后大小:', (processedFile.size / 1024).toFixed(2), 'KB');\r\n            console.log('- 压缩率:', Math.round((1 - processedFile.size / file.size) * 100), '%');\r\n            console.log('- 处理后文件类型:', processedFile.type);\r\n            console.log('- 处理后文件名:', processedFile.name);\r\n            \r\n            // 处理完成\r\n            uploadStatus.value = '图片处理完成';\r\n            uploadPercentage.value = 100;\r\n            \r\n            // 延迟关闭进度条\r\n            setTimeout(() => {\r\n              showUploadProgress.value = false;\r\n            }, 500);\r\n            \r\n            // 解析Promise，返回处理后的文件\r\n            resolve(processedFile);\r\n          },\r\n          error(err) {\r\n            console.error('图片压缩失败:', err);\r\n            // 如果处理失败，返回原始文件\r\n            uploadStatus.value = '处理失败，使用原始图片';\r\n            uploadPercentage.value = 100;\r\n            \r\n            // 延迟关闭进度条\r\n            setTimeout(() => {\r\n              showUploadProgress.value = false;\r\n            }, 500);\r\n            \r\n            resolve(file);\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n    // 处理收集前照片变更\r\n    const handlePhotoBeforeChange = async (file, fileList) => {\r\n      // 更新文件列表（暂时）\r\n      console.log('收集前照片变更:', file);\r\n      \r\n      // 如果文件已经处理过，直接返回\r\n      if (file.processed) {\r\n        console.log('文件已处理过，跳过压缩:', file.name);\r\n        fileListBefore.value = fileList;\r\n        return;\r\n      }\r\n      \r\n      // 如果是新上传的文件，需要先处理\r\n      if (file.raw && file.status === 'ready') {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        console.log('开始处理收集前照片:', file.name, '类型:', file.raw.type, '大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n        \r\n        try {\r\n          // 使用Compressor直接处理图片\r\n          const processedFile = await new Promise((resolve) => {\r\n            new Compressor(file.raw, {\r\n              quality: 0.6,           // 中等压缩 (0-1)\r\n              maxWidth: 1920,         // 最大宽度\r\n              maxHeight: 1920,        // 最大高度\r\n              mimeType: 'image/jpeg', // 强制转换为JPEG\r\n              convertSize: 0,         // 所有图片都转换格式\r\n              // 报告进度\r\n              beforeDraw() {\r\n                uploadPercentage.value = 30;\r\n                uploadStatus.value = '正在处理图片...';\r\n                console.log('图片处理中...');\r\n              },\r\n              // 报告进度\r\n              drew() {\r\n                uploadPercentage.value = 60;\r\n                uploadStatus.value = '正在压缩图片...';\r\n                console.log('图片绘制完成');\r\n              },\r\n              success(result) {\r\n                // 创建新的文件名（确保扩展名为.jpg）\r\n                const fileName = file.raw.name.replace(/\\.[^/.]+$/, \"\") + '.jpg';\r\n                \r\n                // 创建新的File对象\r\n                const processedFile = new File([result], fileName, {\r\n                  type: 'image/jpeg',\r\n                  lastModified: new Date().getTime()\r\n                });\r\n                \r\n                // 输出处理结果日志\r\n                console.log('图片处理完成:');\r\n                console.log('- 原始大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 处理后大小:', (processedFile.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 压缩率:', Math.round((1 - processedFile.size / file.raw.size) * 100), '%');\r\n                console.log('- 处理后文件类型:', processedFile.type);\r\n                console.log('- 处理后文件名:', processedFile.name);\r\n                \r\n                // 处理完成\r\n                uploadStatus.value = '图片处理完成';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(processedFile);\r\n              },\r\n              error(err) {\r\n                console.error('图片压缩失败:', err);\r\n                // 如果处理失败，返回原始文件\r\n                uploadStatus.value = '处理失败，使用原始图片';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(file.raw);\r\n              }\r\n            });\r\n          });\r\n          \r\n          // 替换原始文件\r\n          console.log('替换原始文件为处理后的文件:', processedFile.name);\r\n          \r\n          // 标记文件为已处理\r\n          file.processed = true;\r\n          file.raw = processedFile;\r\n          \r\n          // 将处理后的文件添加到photoFilesBefore\r\n          const existingIndex = photoFilesBefore.value.findIndex(f => f.uid === file.uid || f.name === file.name);\r\n          if (existingIndex >= 0) {\r\n            // 替换现有文件\r\n            photoFilesBefore.value[existingIndex] = processedFile;\r\n          } else {\r\n            // 添加新文件\r\n            photoFilesBefore.value.push(processedFile);\r\n          }\r\n          \r\n          // 延迟关闭进度条\r\n          setTimeout(() => {\r\n            showUploadProgress.value = false;\r\n          }, 500);\r\n          \r\n        } catch (error) {\r\n          console.error('处理图片时出错:', error);\r\n          ElMessage.warning('图片处理失败，将使用原始图片');\r\n          \r\n          // 添加原始文件\r\n          const existingIndex = photoFilesBefore.value.findIndex(f => f.uid === file.uid || f.name === file.name);\r\n          if (existingIndex >= 0) {\r\n            // 替换现有文件\r\n            photoFilesBefore.value[existingIndex] = file.raw;\r\n          } else {\r\n            // 添加新文件\r\n            photoFilesBefore.value.push(file.raw);\r\n          }\r\n          \r\n          showUploadProgress.value = false;\r\n        }\r\n      } else if (!file.raw && file.url) {\r\n        // 如果是已有的文件（有URL），不需要处理\r\n        console.log('已有文件，不需要处理:', file.name);\r\n      }\r\n      \r\n      // 更新文件列表\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const allFiles = [...photoFilesBefore.value, ...photoFilesAfter.value];\r\n      showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n      \r\n      console.log('更新后的photoFilesBefore:', photoFilesBefore.value);\r\n    };\r\n\r\n    // 处理收集前照片移除\r\n    const handlePhotoBeforeRemove = (file, fileList) => {\r\n      console.log('收集前照片移除:', file);\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 从photoFilesBefore中移除被删除的文件\r\n      if (file.raw) {\r\n        photoFilesBefore.value = photoFilesBefore.value.filter(f => \r\n          f.name !== file.raw.name\r\n        );\r\n      } else {\r\n        // 如果没有raw属性，可能是已经处理过的文件，使用uid或name来匹配\r\n        photoFilesBefore.value = photoFilesBefore.value.filter(f => \r\n          f.uid !== file.uid && f.name !== file.name\r\n        );\r\n      }\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...photoFilesBefore.value, ...photoFilesAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      console.log('更新后的photoFilesBefore:', photoFilesBefore.value);\r\n    };\r\n\r\n    // 处理收集后照片变更\r\n    const handlePhotoAfterChange = async (file, fileList) => {\r\n      // 更新文件列表（暂时）\r\n      console.log('收集后照片变更:', file);\r\n      \r\n      // 如果文件已经处理过，直接返回\r\n      if (file.processed) {\r\n        console.log('文件已处理过，跳过压缩:', file.name);\r\n        fileListAfter.value = fileList;\r\n        return;\r\n      }\r\n      \r\n      // 如果是新上传的文件，需要先处理\r\n      if (file.raw && file.status === 'ready') {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        console.log('开始处理收集后照片:', file.name, '类型:', file.raw.type, '大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n        \r\n        try {\r\n          // 使用Compressor直接处理图片\r\n          const processedFile = await new Promise((resolve) => {\r\n            new Compressor(file.raw, {\r\n              quality: 0.6,           // 中等压缩 (0-1)\r\n              maxWidth: 1920,         // 最大宽度\r\n              maxHeight: 1920,        // 最大高度\r\n              mimeType: 'image/jpeg', // 强制转换为JPEG\r\n              convertSize: 0,         // 所有图片都转换格式\r\n              // 报告进度\r\n              beforeDraw() {\r\n                uploadPercentage.value = 30;\r\n                uploadStatus.value = '正在处理图片...';\r\n                console.log('图片处理中...');\r\n              },\r\n              // 报告进度\r\n              drew() {\r\n                uploadPercentage.value = 60;\r\n                uploadStatus.value = '正在压缩图片...';\r\n                console.log('图片绘制完成');\r\n              },\r\n              success(result) {\r\n                // 创建新的文件名（确保扩展名为.jpg）\r\n                const fileName = file.raw.name.replace(/\\.[^/.]+$/, \"\") + '.jpg';\r\n                \r\n                // 创建新的File对象\r\n                const processedFile = new File([result], fileName, {\r\n                  type: 'image/jpeg',\r\n                  lastModified: new Date().getTime()\r\n                });\r\n                \r\n                // 输出处理结果日志\r\n                console.log('图片处理完成:');\r\n                console.log('- 原始大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 处理后大小:', (processedFile.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 压缩率:', Math.round((1 - processedFile.size / file.raw.size) * 100), '%');\r\n                console.log('- 处理后文件类型:', processedFile.type);\r\n                console.log('- 处理后文件名:', processedFile.name);\r\n                \r\n                // 处理完成\r\n                uploadStatus.value = '图片处理完成';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(processedFile);\r\n              },\r\n              error(err) {\r\n                console.error('图片压缩失败:', err);\r\n                // 如果处理失败，返回原始文件\r\n                uploadStatus.value = '处理失败，使用原始图片';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(file.raw);\r\n              }\r\n            });\r\n          });\r\n          \r\n          // 替换原始文件\r\n          console.log('替换原始文件为处理后的文件:', processedFile.name);\r\n          \r\n          // 标记文件为已处理\r\n          file.processed = true;\r\n          file.raw = processedFile;\r\n          \r\n          // 将处理后的文件添加到photoFilesAfter\r\n          const existingIndex = photoFilesAfter.value.findIndex(f => f.uid === file.uid || f.name === file.name);\r\n          if (existingIndex >= 0) {\r\n            // 替换现有文件\r\n            photoFilesAfter.value[existingIndex] = processedFile;\r\n          } else {\r\n            // 添加新文件\r\n            photoFilesAfter.value.push(processedFile);\r\n          }\r\n          \r\n          // 延迟关闭进度条\r\n          setTimeout(() => {\r\n            showUploadProgress.value = false;\r\n          }, 500);\r\n          \r\n        } catch (error) {\r\n          console.error('处理图片时出错:', error);\r\n          ElMessage.warning('图片处理失败，将使用原始图片');\r\n          \r\n          // 添加原始文件\r\n          const existingIndex = photoFilesAfter.value.findIndex(f => f.uid === file.uid || f.name === file.name);\r\n          if (existingIndex >= 0) {\r\n            // 替换现有文件\r\n            photoFilesAfter.value[existingIndex] = file.raw;\r\n          } else {\r\n            // 添加新文件\r\n            photoFilesAfter.value.push(file.raw);\r\n          }\r\n          \r\n          showUploadProgress.value = false;\r\n        }\r\n      } else if (!file.raw && file.url) {\r\n        // 如果是已有的文件（有URL），不需要处理\r\n        console.log('已有文件，不需要处理:', file.name);\r\n      }\r\n      \r\n      // 更新文件列表\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const allFiles = [...photoFilesBefore.value, ...photoFilesAfter.value];\r\n      showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n      \r\n      console.log('更新后的photoFilesAfter:', photoFilesAfter.value);\r\n    };\r\n\r\n    // 处理收集后照片移除\r\n    const handlePhotoAfterRemove = (file, fileList) => {\r\n      console.log('收集后照片移除:', file);\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 从photoFilesAfter中移除被删除的文件\r\n      if (file.raw) {\r\n        photoFilesAfter.value = photoFilesAfter.value.filter(f => \r\n          f.name !== file.raw.name\r\n        );\r\n      } else {\r\n        // 如果没有raw属性，可能是已经处理过的文件，使用uid或name来匹配\r\n        photoFilesAfter.value = photoFilesAfter.value.filter(f => \r\n          f.uid !== file.uid && f.name !== file.name\r\n        );\r\n      }\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...photoFilesBefore.value, ...photoFilesAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      console.log('更新后的photoFilesAfter:', photoFilesAfter.value);\r\n    };\r\n\r\n    // 检查是否有大文件\r\n    const checkForLargeFiles = (files) => {\r\n      const largeFileThreshold = 5 * 1024 * 1024; // 5MB\r\n      return files.some(file => file.size > largeFileThreshold);\r\n    };\r\n\r\n    // 处理上传进度\r\n    const handleUploadProgress = (progressEvent) => {\r\n      if (progressEvent.total) {\r\n        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        uploadPercentage.value = percentage;\r\n        \r\n        if (percentage < 33) {\r\n          uploadStatus.value = '正在上传文件...';\r\n        } else if (percentage < 66) {\r\n          uploadStatus.value = '正在处理文件...';\r\n        } else if (percentage < 100) {\r\n          uploadStatus.value = '即将完成...';\r\n        } else {\r\n          uploadStatus.value = '上传完成，正在保存...';\r\n        }\r\n      }\r\n    };\r\n\r\n    // 格式化百分比显示\r\n    const percentageFormat = (percentage) => {\r\n      return percentage === 100 ? '完成' : `${percentage}%`;\r\n    };\r\n\r\n    const submitForm = () => {\r\n      wasteForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          loading.value = true;\r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('unitId', props.id);\r\n            formData.append('wasteTypeId', form.wasteTypeId);\r\n            formData.append('location', form.location);\r\n            \r\n            // 组合日期和时间，如果有的话\r\n            if (form.collectionDate && form.collectionTime) {\r\n              formData.append('collectionDate', form.collectionDate);\r\n              formData.append('collectionTime', form.collectionTime);\r\n            }\r\n            formData.append('quantity', form.quantity);\r\n            \r\n            // 添加创建者ID（如果用户已登录）\r\n            if (auth.state.isLoggedIn && auth.state.user) {\r\n              formData.append('creator_id', auth.state.user.id);\r\n              // 添加创建者名称，优先使用username，如果没有则使用phone\r\n              const creatorName = auth.state.user.username || auth.state.user.phone || '未知';\r\n              formData.append('creator_name', creatorName);\r\n              console.log('添加用户信息:', {\r\n                creator_id: auth.state.user.id,\r\n                creator_name: creatorName,\r\n                user: auth.state.user\r\n              });\r\n            } else {\r\n              console.log('用户未登录或用户信息不完整');\r\n            }\r\n            \r\n            console.log('提交表单数据:', {\r\n              unitId: props.id,\r\n              wasteTypeId: form.wasteTypeId,\r\n              location: form.location,\r\n              quantity: form.quantity,\r\n              photo_before: photoFilesBefore.value ? photoFilesBefore.value.length : 0,\r\n              photo_after: photoFilesAfter.value ? photoFilesAfter.value.length : 0\r\n            });\r\n            \r\n            // 添加收集前照片\r\n            if (photoFilesBefore.value && photoFilesBefore.value.length > 0) {\r\n              console.log('添加收集前照片数量:', photoFilesBefore.value.length);\r\n              photoFilesBefore.value.forEach((file, index) => {\r\n                if (file) {\r\n                  console.log(`收集前照片 ${index+1}:`, file.name);\r\n                  formData.append('photo_before', file);\r\n                }\r\n              });\r\n            }\r\n            \r\n            // 添加收集后照片\r\n            if (photoFilesAfter.value && photoFilesAfter.value.length > 0) {\r\n              console.log('添加收集后照片数量:', photoFilesAfter.value.length);\r\n              photoFilesAfter.value.forEach((file, index) => {\r\n                if (file) {\r\n                  console.log(`收集后照片 ${index+1}:`, file.name);\r\n                  formData.append('photo_after', file);\r\n                }\r\n              });\r\n            }\r\n\r\n            // 检查是否有大文件需要显示警告\r\n            const allFiles = [...(photoFilesBefore.value || []), ...(photoFilesAfter.value || [])];\r\n            showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n            \r\n            // 如果有文件要上传，显示进度条\r\n            if (allFiles.length > 0) {\r\n              showUploadProgress.value = true;\r\n              uploadPercentage.value = 0;\r\n              uploadStatus.value = '准备上传...';\r\n            }\r\n\r\n            const response = await httpService.postForm(\r\n              apiConfig.endpoints.wasteRecords, \r\n              formData,\r\n              handleUploadProgress\r\n            );\r\n            \r\n            console.log('提交响应:', response.data);\r\n\r\n            ElMessage.success('废物记录提交成功');\r\n            resetForm();\r\n          } catch (error) {\r\n            console.error('Error submitting form:', error);\r\n            if (error.response) {\r\n              console.error('错误响应数据:', error.response.data);\r\n              console.error('错误状态码:', error.response.status);\r\n            }\r\n            ElMessage.error('提交失败，请稍后再试');\r\n          } finally {\r\n            loading.value = false;\r\n            showUploadProgress.value = false;\r\n          }\r\n        } else {\r\n          ElMessage.warning('请完成必填项');\r\n        }\r\n      });\r\n    };\r\n\r\n    const resetForm = () => {\r\n      if (wasteForm.value) {\r\n        wasteForm.value.resetFields();\r\n      }\r\n      photoFilesBefore.value = [];\r\n      photoFilesAfter.value = [];\r\n      fileListBefore.value = [];\r\n      fileListAfter.value = [];\r\n      form.quantity = undefined;\r\n      form.collectionDate = new Date().toISOString().slice(0, 10); // 重置为今天\r\n      form.collectionTime = '08:00'; // 重置为默认时间\r\n    };\r\n\r\n    const goBack = () => {\r\n      // 只有超级管理员才能返回到单位选择页面\r\n      if (isAdmin.value) {\r\n        router.push('/');\r\n      }\r\n    };\r\n\r\n    const viewRecords = () => {\r\n      router.push({ name: 'RecordsList', params: { unitId: props.id } });\r\n    };\r\n\r\n    const selectAllText = (event) => {\r\n      // 使用setTimeout确保DOM已完全渲染\r\n      setTimeout(() => {\r\n        if (event && event.target) {\r\n          // 找到el-input-number内部的input元素\r\n          const inputEl = event.target.querySelector('input');\r\n          if (inputEl) {\r\n            inputEl.select();\r\n          }\r\n        }\r\n      }, 10);\r\n    };\r\n\r\n    return {\r\n      form,\r\n      rules,\r\n      wasteForm,\r\n      loading,\r\n      unitName,\r\n      wasteTypes,\r\n      isAdmin,\r\n      fileListBefore,\r\n      fileListAfter,\r\n      handlePhotoBeforeChange,\r\n      handlePhotoBeforeRemove,\r\n      handlePhotoAfterChange,\r\n      handlePhotoAfterRemove,\r\n      handleBeforeUpload,\r\n      submitForm,\r\n      resetForm,\r\n      goBack,\r\n      viewRecords,\r\n      selectAllText,\r\n      showUploadProgress,\r\n      uploadPercentage,\r\n      uploadStatus,\r\n      percentageFormat,\r\n      showLargeFileWarning\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.waste-form-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 12px 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.header h1 {\r\n  font-size: 18px;\r\n  margin: 0;\r\n  font-weight: 500;\r\n}\r\n\r\n.back-button, .view-records {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 16px;\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.unit-info {\r\n  text-align: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.unit-info h2 {\r\n  color: #333;\r\n  border-bottom: 2px solid #409EFF;\r\n  display: inline-block;\r\n  padding-bottom: 5px;\r\n  font-size: 18px;\r\n  margin: 0;\r\n}\r\n\r\n.waste-form {\r\n  background-color: #ffffff;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .form-row {\r\n    flex-direction: row;\r\n  }\r\n  \r\n  .date-item, .time-item {\r\n    flex: 1;\r\n  }\r\n  \r\n  .content {\r\n    padding: 24px;\r\n    max-width: 800px;\r\n  }\r\n  \r\n  .header h1 {\r\n    font-size: 22px;\r\n  }\r\n}\r\n\r\n.waste-photo-uploader {\r\n  width: 100%;\r\n}\r\n\r\n.waste-photo-uploader :deep(.el-upload--picture-card) {\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n}\r\n\r\n.waste-photo-uploader :deep(.el-upload-list--picture-card .el-upload-list__item) {\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n\r\n.photo-tip, .time-tip {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.submit-btn, .reset-btn {\r\n  width: 45%;\r\n  height: 44px;\r\n  font-size: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .form-actions {\r\n    justify-content: flex-start;\r\n  }\r\n  \r\n  .submit-btn, .reset-btn {\r\n    width: auto;\r\n  }\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 12px;\r\n  text-align: center;\r\n  color: #666;\r\n  font-size: 12px;\r\n}\r\n\r\n:deep(.el-form-item__label) {\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  padding-bottom: 4px;\r\n}\r\n\r\n:deep(.el-input__inner), \r\n:deep(.el-select__input), \r\n:deep(.el-input-number__decrease), \r\n:deep(.el-input-number__increase) {\r\n  height: 44px;\r\n  font-size: 15px;\r\n}\r\n\r\n:deep(.el-button) {\r\n  font-size: 15px;\r\n  padding: 12px 20px;\r\n}\r\n\r\n:deep(.el-select-dropdown__item) {\r\n  font-size: 15px;\r\n  padding: 12px 20px;\r\n}\r\n\r\n:deep(.el-date-editor.el-input), \r\n:deep(.el-date-editor.el-input__inner) {\r\n  width: 100%;\r\n}\r\n\r\n:deep(.el-form-item) {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n:deep(.date-picker-popup),\r\n:deep(.time-picker-popup) {\r\n  touch-action: none;\r\n}\r\n\r\n:deep(.el-input__wrapper) {\r\n  cursor: pointer;\r\n}\r\n\r\n:deep(.el-input__inner) {\r\n  -webkit-tap-highlight-color: transparent;\r\n  user-select: none;\r\n}\r\n\r\n.upload-warning {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.upload-progress {\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n\r\n.upload-status {\r\n  margin-top: 10px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n","import { render } from \"./WasteForm.vue?vue&type=template&id=014bd0d6&scoped=true\"\nimport script from \"./WasteForm.vue?vue&type=script&lang=js\"\nexport * from \"./WasteForm.vue?vue&type=script&lang=js\"\n\nimport \"./WasteForm.vue?vue&type=style&index=0&id=014bd0d6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-014bd0d6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"records-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\">\r\n        <el-icon><arrow-left /></el-icon> 返回填报\r\n      </div>\r\n      <h1>废物记录查看</h1>\r\n      <div class=\"home-link\" @click=\"goHome\" v-if=\"isAdmin\">\r\n        首页 <el-icon><home /></el-icon>\r\n      </div>\r\n      <div v-else></div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"unit-info\">\r\n        <h2>{{ unitName }} - 危险废物记录</h2>\r\n      </div>\r\n      \r\n      <div class=\"actions\">\r\n        <el-button type=\"primary\" @click=\"addNewRecord\">\r\n          <el-icon><plus /></el-icon> 新增填报\r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"goToUserManagement\" v-if=\"isAdmin || isUnitAdmin\">\r\n          <el-icon><user /></el-icon> 人员管理\r\n        </el-button>\r\n        <el-button @click=\"refreshRecords\">\r\n          <el-icon><refresh /></el-icon> 刷新\r\n        </el-button>\r\n        <el-button type=\"primary\" @click=\"exportRecords\" :loading=\"loading\">\r\n          <el-icon><download /></el-icon> 导出记录\r\n        </el-button>\r\n      </div>\r\n      \r\n      <!-- 筛选面板 -->\r\n      <el-card class=\"filter-card\">\r\n        <div class=\"filter-header\">\r\n          <h3>筛选条件</h3>\r\n          <el-button type=\"primary\" link @click=\"showFilterPanel = !showFilterPanel\">\r\n            {{ showFilterPanel ? '收起' : '展开' }} \r\n            <el-icon v-if=\"!showFilterPanel\"><arrow-down /></el-icon>\r\n            <el-icon v-else><arrow-up /></el-icon>\r\n          </el-button>\r\n        </div>\r\n        \r\n        <div v-show=\"showFilterPanel\" class=\"filter-form-container\">\r\n          <el-form :model=\"filterForm\" label-width=\"100px\" class=\"filter-form\">\r\n            <el-row :gutter=\"20\">\r\n              <!-- 收集时间范围 -->\r\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\r\n                <el-form-item label=\"收集时间\">\r\n                  <el-date-picker\r\n                    v-model=\"filterForm.dateRange\"\r\n                    type=\"daterange\"\r\n                    range-separator=\"至\"\r\n                    start-placeholder=\"开始日期\"\r\n                    end-placeholder=\"结束日期\"\r\n                    format=\"YYYY-MM-DD\"\r\n                    value-format=\"YYYY-MM-DD\"\r\n                    style=\"width: 100%\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 废物类型 -->\r\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\r\n                <el-form-item label=\"废物类型\">\r\n                  <el-select v-model=\"filterForm.wasteTypeId\" placeholder=\"选择废物类型\" style=\"width: 100%\" clearable>\r\n                    <el-option \r\n                      v-for=\"type in wasteTypes\" \r\n                      :key=\"type.id\" \r\n                      :label=\"type.name\" \r\n                      :value=\"type.id\" \r\n                    />\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <!-- 数量范围 -->\r\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\r\n                <el-form-item label=\"数量范围(吨)\">\r\n                  <div class=\"quantity-range\">\r\n                    <el-input-number \r\n                      v-model=\"filterForm.minQuantity\" \r\n                      :min=\"0\"\r\n                      :precision=\"3\"\r\n                      :step=\"0.001\"\r\n                      placeholder=\"最小值\"\r\n                      style=\"width: 48%\"\r\n                    />\r\n                    <span class=\"range-separator\">至</span>\r\n                    <el-input-number \r\n                      v-model=\"filterForm.maxQuantity\" \r\n                      :min=\"filterForm.minQuantity || 0\"\r\n                      :precision=\"3\"\r\n                      :step=\"0.001\"\r\n                      placeholder=\"最大值\"\r\n                      style=\"width: 48%\"\r\n                    />\r\n                  </div>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 产生地点 -->\r\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\r\n                <el-form-item label=\"产生地点\">\r\n                  <el-input \r\n                    v-model=\"filterForm.location\" \r\n                    placeholder=\"输入地点关键词搜索\" \r\n                    clearable\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <div class=\"filter-actions\">\r\n              <el-button type=\"primary\" @click=\"applyFilter\">筛选</el-button>\r\n              <el-button @click=\"resetFilter\">重置</el-button>\r\n            </div>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <div class=\"records-wrapper\">\r\n        <el-card class=\"records-card\">\r\n          <div class=\"card-header\">\r\n            <h3>废物记录列表</h3>\r\n            <div class=\"card-actions\">\r\n              <el-button type=\"warning\" @click=\"exportRecords\">\r\n                <el-icon><download /></el-icon> 导出记录\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          \r\n          <el-table \r\n            :data=\"filteredRecords\" \r\n            style=\"width: 100%\" \r\n            border \r\n            v-loading=\"loading\"\r\n            stripe\r\n            class=\"responsive-table\"\r\n            height=\"500\"\r\n            @scroll=\"handleScroll\"\r\n          >\r\n            <el-table-column prop=\"waste_type_name\" label=\"废物类型\" min-width=\"110\" />\r\n            <el-table-column prop=\"location\" label=\"产生地点\" min-width=\"120\" />\r\n            <el-table-column label=\"收集开始时间\" min-width=\"160\">\r\n              <template #default=\"scope\">\r\n                {{ parseFormattedDateTime(scope.row.collection_start_time) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"数量(吨)\" min-width=\"100\">\r\n              <template #default=\"scope\">\r\n                {{ parseFloat(scope.row.quantity).toFixed(3) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"记录时间\" min-width=\"160\" class=\"mobile-hidden\">\r\n              <template #default=\"scope\">\r\n                {{ parseFormattedDateTime(scope.row.created_at) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"汇报人\" min-width=\"100\" class=\"mobile-hidden\">\r\n              <template #default=\"scope\">\r\n                {{ scope.row.creator_name || '未知' }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"现场照片（清理前）\"\r\n              width=\"120\"\r\n              align=\"center\"\r\n            >\r\n              <template #default=\"scope\">\r\n                <div v-if=\"scope.row.photo_path_before\" class=\"photo-preview\">\r\n                  <!-- 多张照片显示 -->\r\n                  <div \r\n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_before)\" \r\n                    :key=\"index\"\r\n                    class=\"photo-thumbnail-container\"\r\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_before), index)\"\r\n                  >\r\n                    <el-image\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :src=\"`${baseUrl}${path}`\"\r\n                      fit=\"cover\"\r\n                    ></el-image>\r\n                  </div>\r\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_before).length > 1\" class=\"photo-count\">\r\n                    {{ parsePhotoPath(scope.row.photo_path_before).length }}张\r\n                  </div>\r\n                </div>\r\n                <span v-else>无</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"现场照片（清理后）\"\r\n              width=\"120\"\r\n              align=\"center\"\r\n            >\r\n              <template #default=\"scope\">\r\n                <div v-if=\"scope.row.photo_path_after\" class=\"photo-preview\">\r\n                  <!-- 多张照片显示 -->\r\n                  <div \r\n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_after)\" \r\n                    :key=\"index\"\r\n                    class=\"photo-thumbnail-container\"\r\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_after), index)\"\r\n                  >\r\n                    <el-image\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :src=\"`${baseUrl}${path}`\"\r\n                      fit=\"cover\"\r\n                    ></el-image>\r\n                  </div>\r\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_after).length > 1\" class=\"photo-count\">\r\n                    {{ parsePhotoPath(scope.row.photo_path_after).length }}张\r\n                  </div>\r\n                </div>\r\n                <span v-else>无</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" min-width=\"70\" fixed=\"right\">\r\n              <template #default=\"scope\">\r\n                <div class=\"operation-buttons\">\r\n                  <el-button \r\n                    type=\"primary\" \r\n                    size=\"small\" \r\n                    @click=\"editRecord(scope.row.id)\"\r\n                    text\r\n                    v-if=\"canEdit(scope.row)\"\r\n                  >\r\n                    编辑\r\n                  </el-button>\r\n                  <el-button \r\n                    type=\"danger\" \r\n                    size=\"small\" \r\n                    @click=\"confirmDelete(scope.row)\"\r\n                    text\r\n                    v-if=\"canEdit(scope.row)\"\r\n                  >\r\n                    删除\r\n                  </el-button>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          \r\n          <div v-if=\"loadingMore\" class=\"loading-more\">\r\n            <el-icon class=\"loading\"><loading /></el-icon>\r\n            加载更多...\r\n          </div>\r\n          \r\n          <div class=\"empty-block\" v-if=\"records.length === 0 && !loading\">\r\n            <el-empty description=\"暂无废物记录\" />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n\r\n    <!-- 添加独立的图片预览组件 -->\r\n    <el-image-viewer\r\n      v-if=\"showViewer\"\r\n      :url-list=\"previewImages\"\r\n      :initial-index=\"previewIndex\"\r\n      @close=\"closeViewer\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage, ElMessageBox, ElImageViewer, ElLoading } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Home, Refresh, Plus, User, ArrowDown, ArrowUp, Download, Loading } from '@element-plus/icons-vue';\r\nimport { exportToExcelWithImages, exportToExcel } from '../utils/exportUtils';\r\nimport auth from '../store/auth';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'RecordsList',\r\n  components: {\r\n    ArrowLeft,\r\n    Home,\r\n    Refresh,\r\n    Plus,\r\n    User,\r\n    ArrowDown,\r\n    ArrowUp,\r\n    Download,\r\n    ElImageViewer,\r\n    Loading\r\n  },\r\n  props: {\r\n    unitId: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  setup(props) {\r\n    const router = useRouter();\r\n    const records = ref([]);\r\n    const loading = ref(false);\r\n    const unitName = ref('');\r\n    const wasteTypes = ref([]);\r\n    const showFilterPanel = ref(true);\r\n    \r\n    // 添加baseUrl定义\r\n    const baseUrl = apiConfig.baseURL;\r\n    \r\n    // 添加解析照片路径的函数\r\n    const parsePhotoPath = (path) => {\r\n      if (!path) return [];\r\n      \r\n      try {\r\n        // 尝试解析为JSON\r\n        if (path.startsWith('[') && path.endsWith(']')) {\r\n          return JSON.parse(path);\r\n        }\r\n        // 如果不是JSON格式，则将其作为单个路径返回\r\n        return [path];\r\n      } catch (error) {\r\n        console.error('解析照片路径失败:', error);\r\n        // 如果解析失败，将其作为单个路径返回\r\n        return [path];\r\n      }\r\n    };\r\n    \r\n    // 添加分页相关的响应式变量\r\n    const page = ref(1);\r\n    const pageSize = ref(20);\r\n    const hasMore = ref(true);\r\n    const loadingMore = ref(false);\r\n    \r\n    // 筛选表单\r\n    const filterForm = reactive({\r\n      dateRange: null,\r\n      wasteTypeId: null,\r\n      minQuantity: null,\r\n      maxQuantity: null,\r\n      location: ''\r\n    });\r\n    \r\n    // 过滤后的记录\r\n    const filteredRecords = computed(() => {\r\n      if (!records.value || !Array.isArray(records.value)) {\r\n        return [];\r\n      }\r\n      \r\n      return records.value.filter(record => {\r\n        // 检查废物类型\r\n        if (filterForm.wasteTypeId && record.waste_type_id !== filterForm.wasteTypeId) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查数量范围\r\n        if (filterForm.minQuantity !== null && parseFloat(record.quantity) < filterForm.minQuantity) {\r\n          return false;\r\n        }\r\n        if (filterForm.maxQuantity !== null && parseFloat(record.quantity) > filterForm.maxQuantity) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查地点关键词\r\n        if (filterForm.location && !record.location.toLowerCase().includes(filterForm.location.toLowerCase())) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查日期范围\r\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\r\n          const startDate = new Date(filterForm.dateRange[0]);\r\n          const endDate = new Date(filterForm.dateRange[1]);\r\n          endDate.setHours(23, 59, 59); // 设置为当天结束时间\r\n          \r\n          const recordDate = new Date(record.collection_start_time);\r\n          if (recordDate < startDate || recordDate > endDate) {\r\n            return false;\r\n          }\r\n        }\r\n        \r\n        return true;\r\n      });\r\n    });\r\n    \r\n    // 判断是否为管理员\r\n    const isAdmin = computed(() => {\r\n      return auth.isAdmin();\r\n    });\r\n    \r\n    // 判断是否为单位管理员\r\n    const isUnitAdmin = computed(() => {\r\n      return auth.isUnitAdmin();\r\n    });\r\n    \r\n    // 格式化日期时间\r\n    const parseFormattedDateTime = (dateTimeStr) => {\r\n      if (!dateTimeStr) return '';\r\n      const date = new Date(dateTimeStr);\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\r\n    };\r\n    \r\n    // 刷新记录\r\n    const refreshRecords = async () => {\r\n      await fetchRecords();\r\n      ElMessage.success('记录已刷新');\r\n    };\r\n    \r\n    // 返回填报页面\r\n    const goBack = () => {\r\n      // 获取当前用户的单位ID\r\n      const unitId = auth.getUnitId();\r\n      if (unitId) {\r\n        router.push(`/unit/${unitId}`);\r\n      } else {\r\n        // 如果没有单位ID，则返回首页\r\n        router.push('/');\r\n      }\r\n    };\r\n    \r\n    // 返回首页\r\n    const goHome = () => {\r\n      router.push('/');\r\n    };\r\n    \r\n    // 前往人员管理\r\n    const goToUserManagement = () => {\r\n      router.push(`/user-management`);\r\n    };\r\n    \r\n    // 添加新记录\r\n    const addNewRecord = () => {\r\n      router.push(`/unit/${props.unitId}`);\r\n    };\r\n    \r\n    // 编辑记录\r\n    const editRecord = (recordId) => {\r\n      router.push(`/record/${recordId}`);\r\n    };\r\n    \r\n    // 判断是否可以编辑记录\r\n    const canEdit = (record) => {\r\n      if (!record) return false;\r\n      \r\n      // 超级管理员可以编辑所有记录\r\n      if (isAdmin.value) return true;\r\n      \r\n      // 单位管理员可以编辑本单位的记录\r\n      const unitId = auth.getUnitId();\r\n      if (isUnitAdmin.value && unitId && record.unit_id === parseInt(unitId)) return true;\r\n      \r\n      // 普通用户只能编辑自己创建的记录\r\n      const userId = auth.getUserId();\r\n      return userId && record.creator_id === parseInt(userId);\r\n    };\r\n    \r\n    // 确认删除\r\n    const confirmDelete = (record) => {\r\n      ElMessageBox.confirm(\r\n        `确定要删除这条废物记录吗？此操作不可逆。`,\r\n        '删除确认',\r\n        {\r\n          confirmButtonText: '确定删除',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        }\r\n      )\r\n        .then(async () => {\r\n          try {\r\n            await httpService.delete(`${apiConfig.endpoints.wasteRecords}/${record.id}`);\r\n            ElMessage.success('记录已成功删除');\r\n            await fetchRecords(); // 重新加载记录\r\n          } catch (error) {\r\n            console.error('删除记录失败:', error);\r\n            ElMessage.error('删除记录失败，请重试');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.info('已取消删除');\r\n        });\r\n    };\r\n    \r\n    // 应用筛选\r\n    const applyFilter = async () => {\r\n      try {\r\n        // 重置分页\r\n        page.value = 1;\r\n        \r\n        // 重新获取记录\r\n        await fetchRecords();\r\n        \r\n        ElMessage.success('筛选条件已应用');\r\n      } catch (error) {\r\n        console.error('应用筛选失败:', error);\r\n        ElMessage.error('应用筛选失败');\r\n      }\r\n    };\r\n    \r\n    // 重置筛选\r\n    const resetFilter = async () => {\r\n      filterForm.dateRange = null;\r\n      filterForm.wasteTypeId = null;\r\n      filterForm.minQuantity = null;\r\n      filterForm.maxQuantity = null;\r\n      filterForm.location = '';\r\n      \r\n      // 重置分页\r\n      page.value = 1;\r\n      \r\n      // 重新获取记录\r\n      await fetchRecords();\r\n      \r\n      ElMessage.success('筛选条件已重置');\r\n    };\r\n    \r\n    // 导出记录\r\n    const exportRecords = async () => {\r\n      try {\r\n        // 先弹出选择对话框\r\n        await ElMessageBox.confirm(\r\n          '请选择导出格式',\r\n          '导出选项',\r\n          {\r\n            confirmButtonText: '带图片导出',\r\n            cancelButtonText: '不带图片导出',\r\n            distinguishCancelAndClose: true,\r\n            type: 'info'\r\n          }\r\n        ).then(async () => {\r\n          // 用户选择带图片导出\r\n          await exportWithImages();\r\n        }).catch(action => {\r\n          if (action === 'cancel') {\r\n            // 用户选择不带图片导出\r\n            exportWithoutImages();\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error('导出过程发生错误:', error);\r\n        ElMessage.error('导出失败: ' + (error.message || '未知错误'));\r\n      }\r\n    };\r\n    \r\n    // 带图片导出\r\n    const exportWithImages = async () => {\r\n      try {\r\n        // 先显示提示消息\r\n        ElMessage({\r\n          message: '导出大量包含图片的记录所需时间较长，请耐心等待',\r\n          type: 'info',\r\n          duration: 5000\r\n        });\r\n        \r\n        // 创建全屏加载\r\n        const loadingInstance = ElLoading.service({\r\n          lock: true,\r\n          text: '正在导出记录，请稍候...',\r\n          background: 'rgba(0, 0, 0, 0.7)'\r\n        });\r\n        \r\n        // 设置加载状态\r\n        loading.value = true;\r\n        \r\n        // 准备筛选条件\r\n        const queryParams = {\r\n          wasteTypeId: filterForm.wasteTypeId ? filterForm.wasteTypeId : undefined,\r\n          minQuantity: filterForm.minQuantity ? filterForm.minQuantity : undefined,\r\n          maxQuantity: filterForm.maxQuantity ? filterForm.maxQuantity : undefined,\r\n          location: filterForm.location || undefined,\r\n          dateRange: filterForm.dateRange ? JSON.stringify(filterForm.dateRange) : undefined,\r\n          unitId: props.unitId ? parseInt(props.unitId) : undefined\r\n        };\r\n        \r\n        console.log('导出记录的筛选条件:', queryParams);\r\n        \r\n        // 调用后端API获取完整的记录数据\r\n        const { data } = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.exportWasteRecords)}/${auth.state.user.id}`,\r\n          { params: queryParams }\r\n        );\r\n        \r\n        console.log(`从后端获取到 ${data.length} 条记录用于导出`);\r\n        \r\n        if (data.length === 0) {\r\n          loadingInstance.close();\r\n          ElMessage.warning('没有符合条件的记录可导出');\r\n          loading.value = false;\r\n          return;\r\n        }\r\n        \r\n        // 更新加载文本\r\n        loadingInstance.setText(`准备导出 ${data.length} 条记录...`);\r\n        \r\n        // 准备导出数据\r\n        const exportData = data.map(record => {\r\n          // 解析图片路径\r\n          const beforePhotos = parsePhotoPath(record.photo_path_before);\r\n          const afterPhotos = parsePhotoPath(record.photo_path_after);\r\n          \r\n          return {\r\n            '单位': record.unit_name,\r\n            '废物类型': record.waste_type_name,\r\n            '产生地点': record.location,\r\n            '数量(kg)': record.quantity,\r\n            '收集开始时间': parseFormattedDateTime(record.collection_start_time),\r\n            '填报人': record.creator_name || '系统',\r\n            '清理前照片': beforePhotos.length > 0 ? beforePhotos[0] : '',  // 使用第一张图片的路径\r\n            '清理后照片': afterPhotos.length > 0 ? afterPhotos[0] : ''    // 使用第一张图片的路径\r\n          };\r\n        });\r\n        \r\n        // 设置文件名\r\n        const fileName = `危险废物记录_${unitName.value ? unitName.value : '全部单位'}`;\r\n        \r\n        // 设置表头，添加isImage标志\r\n        const headers = [\r\n          { text: '单位', field: '单位' },\r\n          { text: '废物类型', field: '废物类型' },\r\n          { text: '产生地点', field: '产生地点' },\r\n          { text: '数量(kg)', field: '数量(kg)' },\r\n          { text: '收集开始时间', field: '收集开始时间' },\r\n          { text: '填报人', field: '填报人' },\r\n          { text: '清理前照片', field: '清理前照片', isImage: true },\r\n          { text: '清理后照片', field: '清理后照片', isImage: true }\r\n        ];\r\n        \r\n        // 获取服务器的基础URL\r\n        const baseUrl = window.location.origin;\r\n        \r\n        // 设置进度回调函数\r\n        const onProgress = (current, total) => {\r\n          const percent = Math.round((current / total) * 100);\r\n          loadingInstance.setText(`正在导出：${percent}% (${current}/${total})`);\r\n        };\r\n        \r\n        // 执行带图片的导出\r\n        const result = await exportToExcelWithImages(exportData, fileName, headers, baseUrl, onProgress);\r\n        \r\n        // 关闭加载提示\r\n        loadingInstance.close();\r\n        \r\n        if (result) {\r\n          ElMessage.success('导出成功');\r\n        } else {\r\n          ElMessage.error('导出失败，请重试');\r\n        }\r\n      } catch (error) {\r\n        console.error('导出记录失败:', error);\r\n        ElMessage.error('导出失败: ' + (error.message || '未知错误'));\r\n      } finally {\r\n        loading.value = false;\r\n        // 确保加载提示被关闭\r\n        ElLoading.service().close();\r\n      }\r\n    };\r\n    \r\n    // 不带图片导出\r\n    const exportWithoutImages = async () => {\r\n      try {\r\n        // 创建加载遮罩\r\n        const loadingInstance = ElLoading.service({\r\n          lock: true,\r\n          text: '正在导出记录，请稍候...',\r\n          background: 'rgba(0, 0, 0, 0.7)'\r\n        });\r\n        \r\n        // 设置加载状态\r\n        loading.value = true;\r\n        \r\n        // 准备筛选条件\r\n        const queryParams = {\r\n          wasteTypeId: filterForm.wasteTypeId ? filterForm.wasteTypeId : undefined,\r\n          minQuantity: filterForm.minQuantity ? filterForm.minQuantity : undefined,\r\n          maxQuantity: filterForm.maxQuantity ? filterForm.maxQuantity : undefined,\r\n          location: filterForm.location || undefined,\r\n          dateRange: filterForm.dateRange ? JSON.stringify(filterForm.dateRange) : undefined,\r\n          unitId: props.unitId ? parseInt(props.unitId) : undefined\r\n        };\r\n        \r\n        // 调用后端API获取完整的记录数据\r\n        const { data } = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.exportWasteRecords)}/${auth.state.user.id}`,\r\n          { params: queryParams }\r\n        );\r\n        \r\n        if (data.length === 0) {\r\n          loadingInstance.close();\r\n          ElMessage.warning('没有符合条件的记录可导出');\r\n          loading.value = false;\r\n          return;\r\n        }\r\n        \r\n        // 更新加载文本\r\n        loadingInstance.setText(`准备导出 ${data.length} 条记录...`);\r\n        \r\n        // 准备导出数据\r\n        const exportData = data.map(record => ({\r\n          '单位': record.unit_name,\r\n          '废物类型': record.waste_type_name,\r\n          '产生地点': record.location,\r\n          '数量(kg)': record.quantity,\r\n          '收集开始时间': parseFormattedDateTime(record.collection_start_time),\r\n          '填报人': record.creator_name || '系统',\r\n          '清理前照片': record.photo_path_before ? '有' : '无',\r\n          '清理后照片': record.photo_path_after ? '有' : '无'\r\n        }));\r\n        \r\n        // 设置文件名\r\n        const fileName = `危险废物记录_${unitName.value ? unitName.value : '全部单位'}`;\r\n        \r\n        // 设置表头\r\n        const headers = [\r\n          { text: '单位', field: '单位' },\r\n          { text: '废物类型', field: '废物类型' },\r\n          { text: '产生地点', field: '产生地点' },\r\n          { text: '数量(kg)', field: '数量(kg)' },\r\n          { text: '收集开始时间', field: '收集开始时间' },\r\n          { text: '填报人', field: '填报人' },\r\n          { text: '清理前照片', field: '清理前照片' },\r\n          { text: '清理后照片', field: '清理后照片' }\r\n        ];\r\n        \r\n        // 执行不带图片的导出\r\n        const result = await exportToExcel(exportData, fileName, headers);\r\n        \r\n        // 关闭加载提示\r\n        loadingInstance.close();\r\n        \r\n        if (result) {\r\n          ElMessage.success('导出成功');\r\n        } else {\r\n          ElMessage.error('导出失败，请重试');\r\n        }\r\n      } catch (error) {\r\n        console.error('导出记录失败:', error);\r\n        ElMessage.error('导出失败: ' + (error.message || '未知错误'));\r\n      } finally {\r\n        loading.value = false;\r\n        // 确保加载提示被关闭\r\n        ElLoading.service().close();\r\n      }\r\n    };\r\n    \r\n    // 图片预览相关\r\n    const showViewer = ref(false);\r\n    const previewImages = ref([]);\r\n    const previewIndex = ref(0);\r\n    \r\n    // 预览照片\r\n    const previewPhoto = (paths, index) => {\r\n      // 确保paths是数组\r\n      const photoArray = Array.isArray(paths) ? paths : [paths];\r\n      previewImages.value = photoArray.map(path => `${baseUrl}${path}`);\r\n      previewIndex.value = index || 0;\r\n      showViewer.value = true;\r\n    };\r\n    \r\n    // 关闭预览\r\n    const closeViewer = () => {\r\n      showViewer.value = false;\r\n    };\r\n\r\n    onMounted(async () => {\r\n      await fetchUnitName();\r\n      await fetchWasteTypes();\r\n      await fetchRecords();\r\n    });\r\n\r\n    // 获取废物类型列表\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching waste types:', error);\r\n        ElMessage.error('获取废物类型列表失败');\r\n      }\r\n    };\r\n    \r\n    const fetchUnitName = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        const unit = response.data.find(u => u.id === parseInt(props.unitId));\r\n        if (unit) {\r\n          unitName.value = unit.name;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching unit name:', error);\r\n        ElMessage.error('获取单位信息失败');\r\n      }\r\n    };\r\n\r\n    const fetchRecords = async (isLoadMore = false) => {\r\n      if (!isLoadMore) {\r\n        loading.value = true;\r\n        page.value = 1;\r\n        records.value = [];\r\n      } else {\r\n        loadingMore.value = true;\r\n      }\r\n      \r\n      try {\r\n        // 基本参数\r\n        const params = {\r\n          page: page.value,\r\n          pageSize: pageSize.value\r\n        };\r\n        \r\n        // 添加筛选参数\r\n        if (filterForm.wasteTypeId) params.wasteTypeId = filterForm.wasteTypeId;\r\n        if (filterForm.minQuantity !== null) params.minQuantity = filterForm.minQuantity;\r\n        if (filterForm.maxQuantity !== null) params.maxQuantity = filterForm.maxQuantity;\r\n        if (filterForm.location) params.location = filterForm.location;\r\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\r\n          params.dateRange = JSON.stringify(filterForm.dateRange);\r\n        }\r\n        \r\n        // 获取当前用户ID\r\n        const userId = auth.getUserId();\r\n        if (!userId) {\r\n          throw new Error('用户未登录');\r\n        }\r\n        \r\n        // 使用用户ID获取记录\r\n        const response = await httpService.get(`${apiConfig.endpoints.wasteRecordsByUser}/${userId}`, { params });\r\n        \r\n        // 确保响应数据包含records字段，并且是一个数组\r\n        if (response.data && Array.isArray(response.data.records)) {\r\n          if (isLoadMore) {\r\n            records.value = [...records.value, ...response.data.records];\r\n          } else {\r\n            records.value = response.data.records;\r\n          }\r\n          \r\n          hasMore.value = !!response.data.hasMore;\r\n        } else {\r\n          console.error('Invalid response format:', response.data);\r\n          records.value = [];\r\n          hasMore.value = false;\r\n          ElMessage.error('获取废物记录失败：数据格式错误');\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching records:', error);\r\n        records.value = [];\r\n        hasMore.value = false;\r\n        ElMessage.error('获取废物记录失败');\r\n      } finally {\r\n        loading.value = false;\r\n        loadingMore.value = false;\r\n      }\r\n    };\r\n    \r\n    // 处理滚动加载更多\r\n    const handleScroll = async (e) => {\r\n      // 修复解构赋值问题，确保e.target存在且包含所需属性\r\n      if (!e || !e.target) return;\r\n      \r\n      const scrollHeight = e.target.scrollHeight || 0;\r\n      const scrollTop = e.target.scrollTop || 0;\r\n      const clientHeight = e.target.clientHeight || 0;\r\n      \r\n      // 当滚动到底部时加载更多\r\n      if (scrollHeight - scrollTop - clientHeight < 50 && hasMore.value && !loadingMore.value) {\r\n        page.value++;\r\n        await fetchRecords(true);\r\n      }\r\n    };\r\n\r\n    return {\r\n      records,\r\n      filteredRecords,\r\n      loading,\r\n      unitName,\r\n      wasteTypes,\r\n      isAdmin,\r\n      isUnitAdmin,\r\n      parseFormattedDateTime,\r\n      refreshRecords,\r\n      goBack,\r\n      goHome,\r\n      goToUserManagement,\r\n      addNewRecord,\r\n      editRecord,\r\n      canEdit,\r\n      confirmDelete,\r\n      apiConfig,\r\n      // 筛选相关\r\n      showFilterPanel,\r\n      filterForm,\r\n      applyFilter,\r\n      resetFilter,\r\n      // 导出相关\r\n      exportRecords,\r\n      // 图片预览相关\r\n      showViewer,\r\n      previewImages,\r\n      previewIndex,\r\n      previewPhoto,\r\n      closeViewer,\r\n      handleScroll,\r\n      // 照片路径解析\r\n      parsePhotoPath,\r\n      baseUrl,\r\n      // 分页相关\r\n      page,\r\n      pageSize,\r\n      hasMore,\r\n      loadingMore\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.records-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.back-button, .home-link {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 16px;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.unit-info {\r\n  margin-bottom: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.unit-info h2 {\r\n  color: #333;\r\n  margin: 0;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 20px;\r\n  gap: 10px;\r\n}\r\n\r\n.filter-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filter-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.filter-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.filter-form-container {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.filter-form {\r\n  margin-top: 15px;\r\n}\r\n\r\n.quantity-range {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.range-separator {\r\n  margin: 0 5px;\r\n}\r\n\r\n.filter-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-top: 20px;\r\n  gap: 10px;\r\n}\r\n\r\n.records-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.card-actions {\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.record-image {\r\n  width: 80px;\r\n  height: 80px;\r\n  border-radius: 4px;\r\n  object-fit: cover;\r\n}\r\n\r\n.photo-thumbnail-container {\r\n  cursor: pointer;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.photo-count {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  text-align: center;\r\n  margin-top: 2px;\r\n}\r\n\r\n.photo-preview {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.image-error {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 80px;\r\n  height: 80px;\r\n  background-color: #f5f7fa;\r\n  color: #909399;\r\n  font-size: 20px;\r\n}\r\n\r\n.operation-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 5px;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\n.operation-buttons .el-button {\r\n  width: 80%;\r\n  margin-left: 0;\r\n  margin-right: 0;\r\n  text-align: center;\r\n  justify-content: center;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f7fa;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #606266;\r\n}\r\n\r\n.loading-more {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 10px;\r\n  color: #909399;\r\n}\r\n\r\n.loading {\r\n  animation: rotating 2s linear infinite;\r\n  margin-right: 5px;\r\n}\r\n\r\n@keyframes rotating {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.empty-block {\r\n  padding: 30px;\r\n  text-align: center;\r\n}\r\n\r\n/* 响应式调整 */\r\n@media (max-width: 768px) {\r\n  .header {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n    text-align: center;\r\n  }\r\n  \r\n  .content {\r\n    padding: 15px;\r\n  }\r\n  \r\n  .card-header {\r\n    flex-direction: column;\r\n    align-items: flex-start;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .card-actions {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .mobile-hidden {\r\n    display: none;\r\n  }\r\n  \r\n  .operation-buttons {\r\n    flex-direction: column;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .action-buttons {\r\n    flex-direction: column;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .action-buttons .el-button {\r\n    flex: 1;\r\n    justify-content: center;\r\n  }\r\n  \r\n  .filter-header {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .header-left {\r\n    width: 100%;\r\n  }\r\n  \r\n  .action-buttons {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .action-buttons .el-button {\r\n    flex: 1;\r\n    justify-content: center;\r\n  }\r\n}\r\n</style> ","// 用于导出数据到CSV和Excel的工具函数\r\nimport * as XLSX from 'xlsx';\r\nimport ExcelJS from 'exceljs';\r\n// import { saveAs } from 'file-saver';\r\n\r\n// 检查XLSX库是否正确加载\r\nconsole.log('XLSX库版本:', XLSX.version);\r\nconsole.log('XLSX库可用方法:', Object.keys(XLSX).join(', '));\r\n\r\n/**\r\n * 从服务器获取图片并作为ArrayBuffer返回\r\n * @param {String} imageUrl - 图片的URL地址\r\n * @param {String} baseUrl - 基础URL，默认为当前域名\r\n * @returns {Promise<ArrayBuffer>} 图片的ArrayBuffer数据\r\n */\r\nconst fetchImageAsBuffer = async (imageUrl, baseUrl = window.location.origin) => {\r\n  console.log('获取图片:', imageUrl);\r\n  \r\n  if (!imageUrl) {\r\n    console.error('图片URL为空');\r\n    return null;\r\n  }\r\n  \r\n  // 如果是相对路径，添加baseUrl\r\n  const fullUrl = imageUrl.startsWith('/') \r\n    ? `${baseUrl}${imageUrl}` \r\n    : imageUrl;\r\n  \r\n  try {\r\n    console.log('获取图片:', fullUrl);\r\n    const response = await fetch(fullUrl, {\r\n      headers: {\r\n        'Cache-Control': 'no-cache',\r\n        'Pragma': 'no-cache'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`获取图片失败: ${response.status} ${response.statusText}`);\r\n    }\r\n    \r\n    const arrayBuffer = await response.arrayBuffer();\r\n    console.log('图片获取成功，大小:', arrayBuffer.byteLength, '字节');\r\n    return arrayBuffer;\r\n  } catch (error) {\r\n    console.error('获取图片失败:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n/**\r\n * 解析照片路径，支持JSON字符串和数组\r\n * @param {String|Array} path - 照片路径字符串或数组\r\n * @returns {Array} 解析后的照片路径数组\r\n */\r\nconst parsePhotoPath = (path) => {\r\n  if (!path) {\r\n    return [];\r\n  }\r\n  \r\n  // 如果已经是数组，直接返回\r\n  if (Array.isArray(path)) {\r\n    return path;\r\n  }\r\n  \r\n  try {\r\n    // 尝试解析JSON字符串\r\n    if (typeof path === 'string' && path.startsWith('[') && path.endsWith(']')) {\r\n      const parsed = JSON.parse(path);\r\n      return Array.isArray(parsed) ? parsed : [path];\r\n    }\r\n    \r\n    // 非JSON格式，作为单个路径返回\r\n    return [path];\r\n  } catch (error) {\r\n    console.error('解析照片路径失败:', error);\r\n    return [path];\r\n  }\r\n};\r\n\r\n/**\r\n * 导出数据到Excel（支持图片），使用ExcelJS库\r\n * @param {Array} data - 要导出的数据数组\r\n * @param {String} fileName - 导出的文件名（不含扩展名）\r\n * @param {Array} headers - 要导出的列标题和对应字段名\r\n * @param {String} baseUrl - 基础URL，用于构建完整的图片路径\r\n * @param {Function} onProgress - 进度回调函数，参数为(当前进度, 总数)\r\n */\r\nexport const exportToExcelWithImages = async (data, fileName, headers, baseUrl = window.location.origin, onProgress = null) => {\r\n  console.log('=== exportToExcelWithImages 函数被调用 ===');\r\n  console.log('数据条数:', data.length);\r\n  \r\n  if (!data || data.length === 0) {\r\n    console.error('导出失败：没有数据');\r\n    return false;\r\n  }\r\n\r\n  try {\r\n    // 处理文件名\r\n    fileName = fileName.replace(/[\\\\/:*?\"<>|]/g, '_');\r\n    const timestamp = new Date().toISOString().replace(/[-:.]/g, '').substring(0, 14);\r\n    const fullFileName = `${fileName}_${timestamp}.xlsx`;\r\n    \r\n    // 创建新工作簿\r\n    const workbook = new ExcelJS.Workbook();\r\n    workbook.creator = '危险废物管理系统';\r\n    workbook.lastModifiedBy = '危险废物管理系统';\r\n    workbook.created = new Date();\r\n    workbook.modified = new Date();\r\n    \r\n    // 添加工作表\r\n    const worksheet = workbook.addWorksheet('危险废物记录');\r\n    \r\n    // 设置列\r\n    const columns = headers.map(header => ({\r\n      header: header.text,\r\n      key: header.field,\r\n      width: header.isImage ? 20 : 15\r\n    }));\r\n    worksheet.columns = columns;\r\n    \r\n    // 设置表头样式\r\n    worksheet.getRow(1).font = { bold: true };\r\n    worksheet.getRow(1).alignment = { vertical: 'middle', horizontal: 'center' };\r\n    \r\n    // 添加数据行并处理图片\r\n    console.log('开始处理数据行...');\r\n    \r\n    // 计算总处理项数（每行加一个基本数据项和可能的图片项）\r\n    const totalItems = data.length * (1 + headers.filter(h => h.isImage).length);\r\n    let currentItem = 0;\r\n    \r\n    for (let rowIndex = 0; rowIndex < data.length; rowIndex++) {\r\n      const row = data[rowIndex];\r\n      \r\n      console.log(`处理第 ${rowIndex + 1}/${data.length} 条记录...`);\r\n      \r\n      // 首先添加行基本数据\r\n      const rowData = {};\r\n      headers.forEach(header => {\r\n        if (!header.isImage) {\r\n          rowData[header.field] = row[header.field] || '';\r\n        }\r\n      });\r\n      \r\n      // 添加行数据\r\n      const excelRow = worksheet.addRow(rowData);\r\n      \r\n      // 设置行高\r\n      excelRow.height = 80; // 设置足够的高度显示图片\r\n      \r\n      // 更新进度\r\n      currentItem++;\r\n      if (onProgress && typeof onProgress === 'function') {\r\n        onProgress(currentItem, totalItems);\r\n      }\r\n      \r\n      // 处理图片字段\r\n      for (const header of headers) {\r\n        if (header.isImage) {\r\n          const fieldName = header.field;\r\n          const imagePath = row[fieldName]; // 直接从导出数据中获取图片路径\r\n          \r\n          if (imagePath) {\r\n            console.log(`记录 ${rowIndex + 1} 的 ${fieldName} 字段有图片路径: ${imagePath}`);\r\n            \r\n            // 获取图片\r\n            try {\r\n              const imageBuffer = await fetchImageAsBuffer(imagePath, baseUrl);\r\n              \r\n              if (imageBuffer) {\r\n                // 找到这个字段在列中的位置\r\n                const colIndex = headers.findIndex(h => h.field === fieldName) + 1;\r\n                \r\n                // 获取单元格位置\r\n                const cellRef = worksheet.getCell(rowIndex + 2, colIndex).address;\r\n                \r\n                // 添加图片到工作表\r\n                const imageId = workbook.addImage({\r\n                  buffer: imageBuffer,\r\n                  extension: imagePath.split('.').pop().toLowerCase()\r\n                });\r\n                \r\n                // 将图片添加到单元格\r\n                worksheet.addImage(imageId, {\r\n                  tl: { col: colIndex - 1, row: rowIndex + 1 },\r\n                  br: { col: colIndex, row: rowIndex + 1.9 },\r\n                  editAs: 'oneCell'\r\n                });\r\n                \r\n                console.log(`已添加图片到单元格 ${cellRef}`);\r\n              } else {\r\n                console.error(`获取图片失败: ${imagePath}`);\r\n              }\r\n            } catch (imageError) {\r\n              console.error(`处理图片时出错:`, imageError);\r\n            }\r\n          } else {\r\n            console.log(`记录 ${rowIndex + 1} 的 ${fieldName} 没有照片路径`);\r\n          }\r\n          \r\n          // 更新进度\r\n          currentItem++;\r\n          if (onProgress && typeof onProgress === 'function') {\r\n            onProgress(currentItem, totalItems);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    console.log('数据行处理完成，准备生成Excel文件...');\r\n    \r\n    // 生成Excel文件并下载\r\n    const buffer = await workbook.xlsx.writeBuffer();\r\n    const blob = new Blob([buffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    \r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = fullFileName;\r\n    link.click();\r\n    \r\n    // 清理\r\n    window.URL.revokeObjectURL(url);\r\n    \r\n    console.log('Excel文件生成并下载成功');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('导出Excel文件失败:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * 将数据导出为Excel文件(不包含图片)\r\n * @param {Array} data - 要导出的数据数组\r\n * @param {String} fileName - 导出的文件名（不含后缀）\r\n * @param {Array} headers - 要导出的列标题和对应字段名\r\n */\r\nexport const exportToExcel = async (data, fileName, headers) => {\r\n  if (!data || data.length === 0) {\r\n    console.error('导出失败：没有数据');\r\n    return false;\r\n  }\r\n\r\n  // 处理文件名\r\n  fileName = fileName.replace(/[\\\\/:*?\"<>|]/g, '_');\r\n  const timestamp = new Date().toISOString().replace(/[-:.]/g, '').substring(0, 14);\r\n  const fullFileName = `${fileName}_${timestamp}.xlsx`;\r\n  \r\n  console.log('导出函数被调用，数据条数:', data.length);\r\n  \r\n  try {\r\n    console.log('使用ExcelJS导出Excel...');\r\n    \r\n    // 创建工作簿\r\n    const workbook = new ExcelJS.Workbook();\r\n    workbook.creator = '危险废物管理系统';\r\n    workbook.lastModifiedBy = '危险废物管理系统';\r\n    workbook.created = new Date();\r\n    workbook.modified = new Date();\r\n    \r\n    // 添加工作表\r\n    const worksheet = workbook.addWorksheet('危险废物记录');\r\n    \r\n    // 设置列\r\n    const columns = headers.map(header => ({\r\n      header: header.text,\r\n      key: header.field,\r\n      width: 15\r\n    }));\r\n    worksheet.columns = columns;\r\n    \r\n    // 设置表头样式\r\n    worksheet.getRow(1).font = { bold: true };\r\n    worksheet.getRow(1).alignment = { vertical: 'middle', horizontal: 'center' };\r\n    \r\n    // 添加数据行\r\n    data.forEach(row => {\r\n      const rowData = {};\r\n      headers.forEach(header => {\r\n        rowData[header.field] = row[header.field] || '';\r\n      });\r\n      worksheet.addRow(rowData);\r\n    });\r\n    \r\n    // 导出工作簿\r\n    console.log('生成Excel数据...');\r\n    const buffer = await workbook.xlsx.writeBuffer();\r\n    \r\n    // 创建Blob对象并下载\r\n    const blob = new Blob([buffer], { \r\n      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' \r\n    });\r\n    \r\n    // 创建下载链接\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a');\r\n    a.href = url;\r\n    a.download = fullFileName;\r\n    console.log('下载链接创建成功，准备触发点击');\r\n    \r\n    // 触发下载\r\n    document.body.appendChild(a);\r\n    a.click();\r\n    document.body.removeChild(a);\r\n    URL.revokeObjectURL(url);\r\n    \r\n    console.log('Excel导出成功');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('导出Excel失败，错误详情:', error);\r\n    console.log('回退到CSV导出');\r\n    // 如果Excel导出失败，回退到CSV导出\r\n    exportToCSV(data, fileName, headers);\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * 导出为CSV文件\r\n * @param {Array} data - 数据数组\r\n * @param {String} fileName - 文件名\r\n * @param {Array} headers - 表头配置\r\n */\r\nexport const exportToCSV = (data, fileName, headers) => {\r\n  // 处理文件名\r\n  const timestamp = new Date().toISOString().replace(/[-:.]/g, '').substring(0, 14);\r\n  const csvFileName = `${fileName}_${timestamp}.csv`;\r\n  \r\n  // 准备CSV内容\r\n  let csvContent = '\\uFEFF'; // 添加BOM以支持中文\r\n  \r\n  // 添加表头\r\n  const headerRow = headers.map(h => `\"${h.title}\"`).join(',');\r\n  csvContent += headerRow + '\\r\\n';\r\n  \r\n  // 添加数据行\r\n  data.forEach(item => {\r\n    const row = headers.map(header => {\r\n      const value = item[header.field];\r\n      \r\n      // 处理null和undefined\r\n      if (value === null || value === undefined) {\r\n        return '';\r\n      }\r\n      \r\n      // 处理数字\r\n      if (header.type === 'number' || typeof value === 'number') {\r\n        return value;\r\n      }\r\n      \r\n      // 处理字符串，特别是包含逗号、引号或换行符的字符串\r\n      let cellValue = String(value);\r\n      if (cellValue.includes(',') || cellValue.includes('\"') || cellValue.includes('\\n')) {\r\n        cellValue = cellValue.replace(/\"/g, '\"\"'); // 将引号替换为两个引号\r\n        cellValue = `\"${cellValue}\"`; // 用引号包裹整个值\r\n      }\r\n      \r\n      return cellValue;\r\n    }).join(',');\r\n    \r\n    csvContent += row + '\\r\\n';\r\n  });\r\n  \r\n  // 创建下载链接\r\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n  const url = URL.createObjectURL(blob);\r\n  const link = document.createElement('a');\r\n  link.setAttribute('href', url);\r\n  link.setAttribute('download', csvFileName);\r\n  link.style.visibility = 'hidden';\r\n  document.body.appendChild(link);\r\n  link.click();\r\n  document.body.removeChild(link);\r\n  URL.revokeObjectURL(url);\r\n  \r\n  console.log('CSV导出成功');\r\n};\r\n\r\n/**\r\n * 准备图片导出数据，为每个记录获取图片\r\n * @param {Array} records - 记录数组\r\n * @param {String} baseUrl - 基础URL\r\n * @returns {Object} 包含图片arrayBuffer的对象\r\n */\r\nexport const prepareImageExportData = async (records, baseUrl = window.location.origin) => {\r\n  const imageData = {};\r\n  \r\n  try {\r\n    console.log('准备图片数据，记录数:', records.length);\r\n    console.log('基础URL:', baseUrl);\r\n    \r\n    // 处理每条记录的图片\r\n    for (let index = 0; index < records.length; index++) {\r\n      const record = records[index];\r\n      imageData[index] = {\r\n        beforeImage: null,\r\n        afterImage: null\r\n      };\r\n      \r\n      // 处理清理前照片\r\n      if (record.photo_path_before) {\r\n        const photoPaths = parsePhotoPath(record.photo_path_before);\r\n        if (photoPaths.length > 0) {\r\n          const firstPhotoPath = photoPaths[0];\r\n          try {\r\n            const imageBuffer = await fetchImageAsBuffer(firstPhotoPath, baseUrl);\r\n            if (imageBuffer) {\r\n              imageData[index].beforeImage = {\r\n                buffer: imageBuffer,\r\n                extension: firstPhotoPath.split('.').pop().toLowerCase(),\r\n                path: firstPhotoPath\r\n              };\r\n              console.log(`记录 ${index} 清理前照片获取成功`);\r\n            }\r\n          } catch (error) {\r\n            console.error(`获取清理前照片失败:`, error);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // 处理清理后照片\r\n      if (record.photo_path_after) {\r\n        const photoPaths = parsePhotoPath(record.photo_path_after);\r\n        if (photoPaths.length > 0) {\r\n          const firstPhotoPath = photoPaths[0];\r\n          try {\r\n            const imageBuffer = await fetchImageAsBuffer(firstPhotoPath, baseUrl);\r\n            if (imageBuffer) {\r\n              imageData[index].afterImage = {\r\n                buffer: imageBuffer,\r\n                extension: firstPhotoPath.split('.').pop().toLowerCase(),\r\n                path: firstPhotoPath\r\n              };\r\n              console.log(`记录 ${index} 清理后照片获取成功`);\r\n            }\r\n          } catch (error) {\r\n            console.error(`获取清理后照片失败:`, error);\r\n          }\r\n        }\r\n      }\r\n      \r\n      console.log(`已处理 ${index + 1}/${records.length} 条记录`);\r\n    }\r\n    \r\n    return imageData;\r\n  } catch (error) {\r\n    console.error('准备图片数据时出错:', error);\r\n    return {};\r\n  }\r\n};\r\n","import { render } from \"./RecordsList.vue?vue&type=template&id=615e5dad&scoped=true\"\nimport script from \"./RecordsList.vue?vue&type=script&lang=js\"\nexport * from \"./RecordsList.vue?vue&type=script&lang=js\"\n\nimport \"./RecordsList.vue?vue&type=style&index=0&id=615e5dad&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-615e5dad\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-card\">\r\n      <div class=\"login-header\">\r\n        <h1>危险废物管理系统</h1>\r\n        <h2>用户登录</h2>\r\n      </div>\r\n      \r\n      <el-form \r\n        ref=\"loginForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-width=\"80px\"\r\n        class=\"login-form\"\r\n        @submit.prevent=\"submitForm\"\r\n      >\r\n        <el-form-item label=\"手机号\" prop=\"phone\">\r\n          <el-input \r\n            v-model=\"form.phone\" \r\n            placeholder=\"请输入手机号\" \r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input \r\n            v-model=\"form.password\" \r\n            type=\"password\" \r\n            placeholder=\"请输入密码\" \r\n            show-password\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-radio-group v-model=\"form.userType\" @change=\"handleUserTypeChange\">\r\n            <el-radio :label=\"1\">员工</el-radio>\r\n            <el-radio :label=\"2\">单位管理员</el-radio>\r\n            <el-radio :label=\"3\">超级管理员</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-checkbox v-model=\"form.rememberMe\">记住登录</el-checkbox>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            native-type=\"submit\"\r\n            @click=\"submitForm\" \r\n            :loading=\"auth.state.loading\"\r\n            style=\"width: 100%\"\r\n          >\r\n            登录\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <div v-if=\"auth.state.error\" class=\"login-error\">\r\n        {{ auth.state.error }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, computed, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport auth from '../store/auth';\r\n\r\n/* eslint-disable vue/multi-word-component-names */\r\nexport default {\r\n  name: 'LoginView',\r\n  setup() {\r\n    const router = useRouter();\r\n    const loginForm = ref(null);\r\n    \r\n    const form = reactive({\r\n      phone: '',\r\n      password: '',\r\n      userType: 1, // 默认为员工\r\n      rememberMe: false // 添加记住登录选项\r\n    });\r\n    \r\n    // 所有用户类型都需要密码\r\n    const showPassword = computed(() => true);\r\n    \r\n    // 根据用户类型动态设置验证规则\r\n    const rules = computed(() => {\r\n      const phoneRules = [\r\n        { required: true, message: '请输入手机号', trigger: 'submit' },\r\n        { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号格式', trigger: 'submit' }\r\n      ];\r\n      \r\n      const passwordRules = [\r\n        { required: true, message: '请输入密码', trigger: 'submit' }\r\n      ];\r\n      \r\n      return {\r\n        phone: phoneRules,\r\n        password: passwordRules\r\n      };\r\n    });\r\n    \r\n    // 切换用户类型时重置表单\r\n    const handleUserTypeChange = () => {\r\n      if (loginForm.value) {\r\n        loginForm.value.clearValidate();\r\n      }\r\n    };\r\n    \r\n    // 提交表单\r\n    const submitForm = async () => {\r\n      console.log('提交表单被触发');\r\n      if (!loginForm.value) {\r\n        console.log('表单引用不存在');\r\n        return;\r\n      }\r\n      \r\n      // 防止重复提交\r\n      if (auth.state.loading) {\r\n        console.log('登录正在进行中，跳过');\r\n        return;\r\n      }\r\n      \r\n      // 所有用户类型都需要验证整个表单\r\n      console.log('登录模式');\r\n      loginForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          console.log('表单验证通过');\r\n          await doLogin();\r\n        } else {\r\n          console.log('表单验证失败');\r\n        }\r\n      });\r\n    };\r\n    \r\n    // 执行登录\r\n    const doLogin = async () => {\r\n      console.log('开始登录，账号:', form.phone, '用户类型:', form.userType);\r\n      try {\r\n        // 添加调试信息\r\n        console.log('开始处理登录操作...');\r\n        \r\n        // 所有用户类型都需要密码\r\n        const result = await auth.login(\r\n          form.phone,\r\n          form.password,\r\n          form.rememberMe,\r\n          form.userType\r\n        );\r\n        \r\n        console.log('登录响应:', result);\r\n        \r\n        if (result.success) {\r\n          const user = result.user;\r\n          \r\n          ElMessage.success(`欢迎，${user.username || user.phone}`);\r\n          \r\n          // 根据用户角色跳转到不同页面\r\n          if (user.role_id === 3) {\r\n            // 超级管理员\r\n            router.push('/admin-records');\r\n          } else if (user.role_id === 2) {\r\n            // 单位管理员直接进入记录页面\r\n            router.push(`/records/${user.unit_id}`);\r\n          } else {\r\n            // 普通员工进入填报页面\r\n            router.push(`/unit/${user.unit_id}`);\r\n          }\r\n        } else {\r\n          // 显示登录失败错误\r\n          ElMessage.error(result.error || '登录失败');\r\n        }\r\n      } catch (error) {\r\n        // 捕获并显示非预期错误\r\n        ElMessage.error(error.response?.data?.error || '登录失败，请检查网络连接');\r\n      }\r\n    };\r\n    \r\n    // 如果已登录，自动跳转\r\n    onMounted(() => {\r\n      if (auth.state.isLoggedIn) {\r\n        const user = auth.state.user;\r\n        if (user.role_id === 3) {\r\n          router.push('/admin-records');\r\n        } else if (user.role_id === 2) {\r\n          router.push(`/records/${user.unit_id}`);\r\n        } else {\r\n          router.push(`/unit/${user.unit_id}`);\r\n        }\r\n      }\r\n    });\r\n    \r\n    return {\r\n      form,\r\n      rules,\r\n      loginForm,\r\n      showPassword,\r\n      handleUserTypeChange,\r\n      submitForm,\r\n      auth\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n  padding: 15px;\r\n}\r\n\r\n.login-card {\r\n  width: 400px;\r\n  padding: 30px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.login-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.login-header h1 {\r\n  font-size: 24px;\r\n  color: #409EFF;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.login-header h2 {\r\n  font-size: 18px;\r\n  color: #555;\r\n  font-weight: normal;\r\n}\r\n\r\n.login-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.login-error {\r\n  color: #f56c6c;\r\n  text-align: center;\r\n  margin-top: 15px;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 移动端适配 */\r\n@media screen and (max-width: 480px) {\r\n  .login-card {\r\n    width: 100%;\r\n    padding: 20px;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  .login-header h1 {\r\n    font-size: 20px;\r\n  }\r\n  \r\n  .login-header h2 {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .el-form-item {\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=735f8166&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=735f8166&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-735f8166\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"edit-record-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <h1>{{ isNew ? '新增废物记录' : '编辑废物记录' }}</h1>\r\n      <div></div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"form-header\">\r\n        <h2>{{ unitName }}</h2>\r\n      </div>\r\n\r\n      <el-form \r\n        ref=\"recordForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-width=\"120px\"\r\n        class=\"record-form\"\r\n        v-loading=\"loading\"\r\n      >\r\n        <!-- 如果是超级管理员且是新增记录，显示单位选择 -->\r\n        <el-form-item label=\"单位\" prop=\"unitId\" v-if=\"isSuperAdmin && isNew\">\r\n          <el-select v-model=\"form.unitId\" placeholder=\"请选择单位\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"unit in units\" \r\n              :key=\"unit.id\" \r\n              :label=\"unit.name\" \r\n              :value=\"unit.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"废物类型\" prop=\"wasteTypeId\">\r\n          <el-select v-model=\"form.wasteTypeId\" placeholder=\"请选择废物类型\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"type in wasteTypes\" \r\n              :key=\"type.id\" \r\n              :label=\"type.name\" \r\n              :value=\"type.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"产生地点\" prop=\"location\">\r\n          <el-input v-model=\"form.location\" placeholder=\"请输入废物产生地点\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"收集日期\">\r\n          <el-date-picker\r\n            v-model=\"form.collectionDate\"\r\n            type=\"date\"\r\n            placeholder=\"选择日期\"\r\n            format=\"YYYY-MM-DD\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            style=\"width: 100%\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"收集时间\">\r\n          <el-time-picker\r\n            v-model=\"form.collectionTime\"\r\n            format=\"HH:mm\"\r\n            placeholder=\"选择时间\"\r\n            value-format=\"HH:mm\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <template #prefix>\r\n              <el-icon><clock /></el-icon>\r\n            </template>\r\n          </el-time-picker>\r\n          <!-- <div class=\"time-tip\">只需选择小时和分钟</div> -->\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"收集数量(吨)\" prop=\"quantity\">\r\n          <el-input-number \r\n            v-model=\"form.quantity\" \r\n            :min=\"0\" \r\n            :precision=\"3\" \r\n            :step=\"0.001\" \r\n            style=\"width: 100%\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集前）\" prop=\"photo_path_before\">\r\n          <div class=\"photo-tip\">请上传废物收集前的现场照片（最多5张）</div>\r\n          <div class=\"upload-warning\" v-if=\"showLargeFileWarning\">\r\n            <el-alert\r\n              title=\"上传大文件可能会导致处理时间较长，请耐心等待\"\r\n              type=\"warning\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n          </div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoBeforeChange\"\r\n            :on-remove=\"handlePhotoBeforeRemove\"\r\n            :file-list=\"fileListBefore\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集后）\" prop=\"photo_path_after\">\r\n          <div class=\"photo-tip\">请上传废物收集后的现场照片（最多5张）</div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoAfterChange\"\r\n            :on-remove=\"handlePhotoAfterRemove\"\r\n            :file-list=\"fileListAfter\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n          \r\n          <!-- 添加独立的图片预览组件 -->\r\n          <el-image-viewer\r\n            v-if=\"showViewer\"\r\n            :url-list=\"previewImages\"\r\n            :initial-index=\"previewIndex\"\r\n            @close=\"closeViewer\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"loading\">保存</el-button>\r\n          <el-button @click=\"goBack\">取消</el-button>\r\n        </el-form-item>\r\n        \r\n        <!-- 调试信息 -->\r\n        <el-collapse v-if=\"!isNew\">\r\n          <el-collapse-item title=\"调试信息\">\r\n            <div>\r\n              <h4>收集前照片路径:</h4>\r\n              <div v-for=\"(file, index) in fileListBefore\" :key=\"'before-'+index\">\r\n                <div>名称: {{ file.name }}</div>\r\n                <div>URL: {{ file.url }}</div>\r\n                <div>\r\n                  <img :src=\"file.url\" style=\"max-width: 200px; max-height: 200px;\" />\r\n                </div>\r\n                <hr />\r\n              </div>\r\n              \r\n              <h4>收集后照片路径:</h4>\r\n              <div v-for=\"(file, index) in fileListAfter\" :key=\"'after-'+index\">\r\n                <div>名称: {{ file.name }}</div>\r\n                <div>URL: {{ file.url }}</div>\r\n                <div>\r\n                  <img :src=\"file.url\" style=\"max-width: 200px; max-height: 200px;\" />\r\n                </div>\r\n                <hr />\r\n              </div>\r\n            </div>\r\n          </el-collapse-item>\r\n        </el-collapse>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 上传进度条对话框 -->\r\n    <el-dialog\r\n      v-model=\"showUploadProgress\"\r\n      title=\"正在上传文件\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <div class=\"upload-progress\">\r\n        <p>正在上传文件，请勿关闭页面...</p>\r\n        <el-progress \r\n          :percentage=\"uploadPercentage\" \r\n          :format=\"percentageFormat\"\r\n          :status=\"uploadPercentage === 100 ? 'success' : ''\"\r\n        ></el-progress>\r\n        <p class=\"upload-status\">{{ uploadStatus }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport { useRouter, useRoute } from 'vue-router';\r\nimport { ElMessage, ElImageViewer } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Plus, Clock } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\nimport Compressor from 'compressorjs';\r\n\r\nexport default {\r\n  name: 'EditRecordView',\r\n  components: {\r\n    ArrowLeft,\r\n    Plus,\r\n    Clock,\r\n    ElImageViewer\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    const recordForm = ref(null);\r\n    const loading = ref(false);\r\n    const submitting = ref(false);\r\n    const unitName = ref('');\r\n    const wasteTypes = ref([]);\r\n    const units = ref([]);\r\n    const fileListBefore = ref([]);\r\n    const fileListAfter = ref([]);\r\n    const previewImages = ref([]);\r\n    const showViewer = ref(false);\r\n    const previewIndex = ref(0);\r\n    const createdAt = ref('');\r\n    const showUploadProgress = ref(false);\r\n    const uploadPercentage = ref(0);\r\n    const uploadStatus = ref('准备上传...');\r\n    const showLargeFileWarning = ref(false);\r\n    \r\n    // 添加解析照片路径的函数\r\n    const parsePhotoPath = (path) => {\r\n      if (!path) return [];\r\n      \r\n      console.log('解析照片路径，原始值:', path, '类型:', typeof path);\r\n      \r\n      try {\r\n        // 如果已经是数组，直接返回\r\n        if (Array.isArray(path)) {\r\n          console.log('照片路径已经是数组:', path);\r\n          return path;\r\n        }\r\n        \r\n        // 尝试解析为JSON\r\n        if (typeof path === 'string') {\r\n          // 检查是否是JSON数组格式\r\n          if (path.startsWith('[') && path.endsWith(']')) {\r\n            const parsed = JSON.parse(path);\r\n            console.log('照片路径解析为JSON数组:', parsed);\r\n            return parsed;\r\n          }\r\n          \r\n          // 检查是否是逗号分隔的字符串\r\n          if (path.includes(',')) {\r\n            const paths = path.split(',').map(p => p.trim()).filter(p => p);\r\n            console.log('照片路径解析为逗号分隔字符串:', paths);\r\n            return paths;\r\n          }\r\n          \r\n          // 单个路径\r\n          console.log('照片路径解析为单个字符串:', [path]);\r\n          return [path];\r\n        }\r\n        \r\n        // 其他情况，尝试转换为字符串后处理\r\n        console.log('照片路径类型未知，尝试转换为字符串:', String(path));\r\n        return [String(path)];\r\n      } catch (error) {\r\n        console.error('解析照片路径失败:', error);\r\n        // 如果解析失败，将其作为单个路径返回\r\n        return typeof path === 'string' ? [path] : [];\r\n      }\r\n    };\r\n    \r\n    // 是否为新增记录\r\n    const isNew = computed(() => {\r\n      return !route.params.id || route.params.id === 'new';\r\n    });\r\n    \r\n    // 是否为超级管理员\r\n    const isSuperAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n    \r\n    // 表单数据\r\n    const form = reactive({\r\n      unitId: '',\r\n      wasteTypeId: '',\r\n      location: '',\r\n      collectionDate: '',\r\n      collectionTime: '',\r\n      quantity: 0,\r\n      recordId: null,\r\n      creatorId: auth.state.user?.id || null,\r\n      photo_path_before: '',\r\n      photo_path_after: '',\r\n      remarks: ''\r\n    });\r\n\r\n    const rules = {\r\n      unitId: [\r\n        { required: true, message: '请选择单位', trigger: 'change' }\r\n      ],\r\n      wasteTypeId: [\r\n        { required: true, message: '请选择废物类型', trigger: 'change' }\r\n      ],\r\n      location: [\r\n        { required: true, message: '请输入废物产生地点', trigger: 'blur' }\r\n      ],\r\n      collectionDate: [\r\n        { required: false }\r\n      ],\r\n      collectionTime: [\r\n        { required: false }\r\n      ],\r\n      quantity: [\r\n        { required: true, message: '请输入收集数量', trigger: 'change' }\r\n      ]\r\n    };\r\n\r\n    onMounted(async () => {\r\n      loading.value = true;\r\n      \r\n      try {\r\n        // 获取废物类型\r\n        await fetchWasteTypes();\r\n        \r\n        // 如果是超级管理员，获取所有单位\r\n        if (isSuperAdmin.value) {\r\n          await fetchUnits();\r\n        }\r\n        \r\n        // 如果是新增记录\r\n        if (isNew.value) {\r\n          // 新增记录默认使用当前用户的单位（非超级管理员）\r\n          if (!isSuperAdmin.value && auth.state.user) {\r\n            form.unitId = auth.state.user.unit_id;\r\n            await fetchUnitName(form.unitId);\r\n          }\r\n        } else {\r\n          // 只有在编辑现有记录时才获取记录详情\r\n          await fetchRecordDetails();\r\n        }\r\n      } catch (error) {\r\n        console.error('初始化数据失败:', error);\r\n        ElMessage.error('加载数据失败，请刷新重试');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    });\r\n\r\n    // 获取单位列表\r\n    const fetchUnits = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        units.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取单位列表失败:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      }\r\n    };\r\n\r\n    // 获取单位名称\r\n    const fetchUnitName = async (unitId) => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        const unit = response.data.find(u => u.id === parseInt(unitId));\r\n        if (unit) {\r\n          unitName.value = unit.name;\r\n        }\r\n      } catch (error) {\r\n        console.error('获取单位信息失败:', error);\r\n      }\r\n    };\r\n\r\n    // 获取废物类型\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取废物类型失败:', error);\r\n        ElMessage.error('获取废物类型失败');\r\n      }\r\n    };\r\n\r\n    // 获取记录详情\r\n    const fetchRecordDetails = async () => {\r\n      try {\r\n        loading.value = true;\r\n        const response = await httpService.get(`${apiConfig.endpoints.wasteRecords}/detail/${route.params.id}`);\r\n        \r\n        const record = response.data;\r\n        console.log('获取到的记录详情:', record);\r\n        \r\n        form.unitId = record.unit_id;\r\n        form.wasteTypeId = record.waste_type_id;\r\n        form.location = record.location;\r\n        form.recordId = record.id;\r\n        \r\n        // 处理收集时间\r\n        if (record.collection_start_time) {\r\n          const dateTime = new Date(record.collection_start_time);\r\n          form.collectionDate = dateTime.toISOString().slice(0, 10);\r\n          form.collectionTime = dateTime.toTimeString().slice(0, 5);\r\n        }\r\n        \r\n        form.quantity = record.quantity;\r\n        \r\n        // 处理照片\r\n        if (record.photo_path_before) {\r\n          console.log('收集前照片路径:', record.photo_path_before);\r\n          const photoPaths = parsePhotoPath(record.photo_path_before);\r\n          console.log('解析后的收集前照片路径:', photoPaths);\r\n          \r\n          fileListBefore.value = photoPaths.map(path => {\r\n            // 构建完整URL\r\n            let fullUrl = path;\r\n            if (!path.startsWith('http')) {\r\n              // 移除开头的斜杠（如果有）\r\n              const cleanPath = path.startsWith('/') ? path.substring(1) : path;\r\n              fullUrl = `${window.location.origin}/${cleanPath}`;\r\n            }\r\n            \r\n            console.log('收集前照片完整URL:', fullUrl);\r\n            \r\n            return {\r\n              name: path.split('/').pop(),\r\n              url: fullUrl\r\n            };\r\n          });\r\n        }\r\n        \r\n        if (record.photo_path_after) {\r\n          console.log('收集后照片路径:', record.photo_path_after);\r\n          const photoPaths = parsePhotoPath(record.photo_path_after);\r\n          console.log('解析后的收集后照片路径:', photoPaths);\r\n          \r\n          fileListAfter.value = photoPaths.map(path => {\r\n            // 构建完整URL\r\n            let fullUrl = path;\r\n            if (!path.startsWith('http')) {\r\n              // 移除开头的斜杠（如果有）\r\n              const cleanPath = path.startsWith('/') ? path.substring(1) : path;\r\n              fullUrl = `${window.location.origin}/${cleanPath}`;\r\n            }\r\n            \r\n            console.log('收集后照片完整URL:', fullUrl);\r\n            \r\n            return {\r\n              name: path.split('/').pop(),\r\n              url: fullUrl\r\n            };\r\n          });\r\n        }\r\n        \r\n        // 获取单位名称\r\n        unitName.value = record.unit_name;\r\n        \r\n        // 设置创建时间\r\n        createdAt.value = record.created_at;\r\n        \r\n        // 初始化预览图片列表\r\n        updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n        \r\n      } catch (error) {\r\n        console.error('获取记录详情失败:', error);\r\n        ElMessage.error('获取记录详情失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    // 处理上传前的文件处理\r\n    const handleBeforeUpload = (file) => {\r\n      // 检查文件类型是否为图片\r\n      const acceptedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];\r\n      const isImage = acceptedTypes.includes(file.type);\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!');\r\n        return false;\r\n      }\r\n\r\n      // 检查文件大小（50MB = 50 * 1024 * 1024 bytes）\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        ElMessage.error('图片大小不能超过50MB!');\r\n        return false;\r\n      }\r\n      \r\n      // 返回一个Promise\r\n      return new Promise((resolve) => {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        console.log('开始处理图片:', file.name, '类型:', file.type, '大小:', (file.size / 1024).toFixed(2), 'KB');\r\n        \r\n        // 使用Compressor直接处理图片\r\n        new Compressor(file, {\r\n          quality: 0.6,           // 中等压缩 (0-1)\r\n          maxWidth: 1920,         // 最大宽度\r\n          maxHeight: 1920,        // 最大高度\r\n          mimeType: 'image/jpeg', // 强制转换为JPEG\r\n          convertSize: 0,         // 所有图片都转换格式\r\n          // 报告进度\r\n          beforeDraw() {\r\n            uploadPercentage.value = 30;\r\n            uploadStatus.value = '正在处理图片...';\r\n            console.log('图片处理中...');\r\n          },\r\n          // 报告进度\r\n          drew() {\r\n            uploadPercentage.value = 60;\r\n            uploadStatus.value = '正在压缩图片...';\r\n            console.log('图片绘制完成');\r\n          },\r\n          success(result) {\r\n            // 创建新的文件名（确保扩展名为.jpg）\r\n            const fileName = file.name.replace(/\\.[^/.]+$/, \"\") + '.jpg';\r\n            \r\n            // 创建新的File对象\r\n            const processedFile = new File([result], fileName, {\r\n              type: 'image/jpeg',\r\n              lastModified: new Date().getTime()\r\n            });\r\n            \r\n            // 输出处理结果日志\r\n            console.log('图片处理完成:');\r\n            console.log('- 原始大小:', (file.size / 1024).toFixed(2), 'KB');\r\n            console.log('- 处理后大小:', (processedFile.size / 1024).toFixed(2), 'KB');\r\n            console.log('- 压缩率:', Math.round((1 - processedFile.size / file.size) * 100), '%');\r\n            console.log('- 处理后文件类型:', processedFile.type);\r\n            console.log('- 处理后文件名:', processedFile.name);\r\n            \r\n            // 处理完成\r\n            uploadStatus.value = '图片处理完成';\r\n            uploadPercentage.value = 100;\r\n            \r\n            // 延迟关闭进度条\r\n            setTimeout(() => {\r\n              showUploadProgress.value = false;\r\n            }, 500);\r\n            \r\n            // 解析Promise，返回处理后的文件\r\n            resolve(processedFile);\r\n          },\r\n          error(err) {\r\n            console.error('图片压缩失败:', err);\r\n            // 如果处理失败，返回原始文件\r\n            uploadStatus.value = '处理失败，使用原始图片';\r\n            uploadPercentage.value = 100;\r\n            \r\n            // 延迟关闭进度条\r\n            setTimeout(() => {\r\n              showUploadProgress.value = false;\r\n            }, 500);\r\n            \r\n            resolve(file);\r\n          }\r\n        });\r\n      });\r\n    };\r\n\r\n    // 处理收集前的照片变更\r\n    const handlePhotoBeforeChange = async (file, fileList) => {\r\n      console.log('收集前照片变更:', file);\r\n      \r\n      // 如果文件已经处理过，直接返回\r\n      if (file.processed) {\r\n        console.log('文件已处理过，跳过压缩:', file.name);\r\n        fileListBefore.value = fileList;\r\n        return false; // 阻止自动上传\r\n      }\r\n      \r\n      // 如果是新上传的文件，需要先处理\r\n      if (file.raw && file.status === 'ready') {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        console.log('开始处理收集前照片:', file.name, '类型:', file.raw.type, '大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n        \r\n        try {\r\n          // 使用Compressor直接处理图片\r\n          const processedFile = await new Promise((resolve) => {\r\n            new Compressor(file.raw, {\r\n              quality: 0.6,           // 中等压缩 (0-1)\r\n              maxWidth: 1920,         // 最大宽度\r\n              maxHeight: 1920,        // 最大高度\r\n              mimeType: 'image/jpeg', // 强制转换为JPEG\r\n              convertSize: 0,         // 所有图片都转换格式\r\n              // 报告进度\r\n              beforeDraw() {\r\n                uploadPercentage.value = 30;\r\n                uploadStatus.value = '正在处理图片...';\r\n                console.log('图片处理中...');\r\n              },\r\n              // 报告进度\r\n              drew() {\r\n                uploadPercentage.value = 60;\r\n                uploadStatus.value = '正在压缩图片...';\r\n                console.log('图片绘制完成');\r\n              },\r\n              success(result) {\r\n                // 创建新的文件名（确保扩展名为.jpg）\r\n                const fileName = file.raw.name.replace(/\\.[^/.]+$/, \"\") + '.jpg';\r\n                \r\n                // 创建新的File对象\r\n                const processedFile = new File([result], fileName, {\r\n                  type: 'image/jpeg',\r\n                  lastModified: new Date().getTime()\r\n                });\r\n                \r\n                // 输出处理结果日志\r\n                console.log('图片处理完成:');\r\n                console.log('- 原始大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 处理后大小:', (processedFile.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 压缩率:', Math.round((1 - processedFile.size / file.raw.size) * 100), '%');\r\n                console.log('- 处理后文件类型:', processedFile.type);\r\n                console.log('- 处理后文件名:', processedFile.name);\r\n                \r\n                // 处理完成\r\n                uploadStatus.value = '图片处理完成';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(processedFile);\r\n              },\r\n              error(err) {\r\n                console.error('图片压缩失败:', err);\r\n                // 如果处理失败，返回原始文件\r\n                uploadStatus.value = '处理失败，使用原始图片';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(file.raw);\r\n              }\r\n            });\r\n          });\r\n          \r\n          // 替换原始文件\r\n          console.log('替换原始文件为处理后的文件:', processedFile.name);\r\n          \r\n          // 标记文件为已处理\r\n          file.processed = true;\r\n          file.raw = processedFile;\r\n          \r\n          // 延迟关闭进度条\r\n          setTimeout(() => {\r\n            showUploadProgress.value = false;\r\n          }, 500);\r\n          \r\n        } catch (error) {\r\n          console.error('处理图片时出错:', error);\r\n          ElMessage.warning('图片处理失败，将使用原始图片');\r\n          showUploadProgress.value = false;\r\n        }\r\n      } else if (!file.raw && file.url) {\r\n        // 如果是已有的文件（有URL），不需要处理\r\n        console.log('已有文件，不需要处理:', file.name);\r\n      }\r\n      \r\n      // 检查是否有大文件\r\n      checkForLargeFiles(fileList);\r\n      \r\n      // 确保文件有raw属性\r\n      if (file.raw === undefined && file.status === 'ready') {\r\n        file.raw = file.originFileObj || file;\r\n        console.log('为收集前照片添加raw属性:', file.raw);\r\n      }\r\n      \r\n      // 更新文件列表\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n      \r\n      return false; // 阻止自动上传\r\n    };\r\n\r\n    // 处理收集前的照片移除\r\n    const handlePhotoBeforeRemove = (file, fileList) => {\r\n      console.log('收集前照片移除:', file);\r\n      \r\n      // 更新fileListBefore\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...fileListBefore.value, ...fileListAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n    };\r\n\r\n    // 处理收集后的照片变更\r\n    const handlePhotoAfterChange = async (file, fileList) => {\r\n      console.log('收集后照片变更:', file);\r\n      \r\n      // 如果文件已经处理过，直接返回\r\n      if (file.processed) {\r\n        console.log('文件已处理过，跳过压缩:', file.name);\r\n        fileListAfter.value = fileList;\r\n        return false; // 阻止自动上传\r\n      }\r\n      \r\n      // 如果是新上传的文件，需要先处理\r\n      if (file.raw && file.status === 'ready') {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        console.log('开始处理收集后照片:', file.name, '类型:', file.raw.type, '大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n        \r\n        try {\r\n          // 使用Compressor直接处理图片\r\n          const processedFile = await new Promise((resolve) => {\r\n            new Compressor(file.raw, {\r\n              quality: 0.6,           // 中等压缩 (0-1)\r\n              maxWidth: 1920,         // 最大宽度\r\n              maxHeight: 1920,        // 最大高度\r\n              mimeType: 'image/jpeg', // 强制转换为JPEG\r\n              convertSize: 0,         // 所有图片都转换格式\r\n              // 报告进度\r\n              beforeDraw() {\r\n                uploadPercentage.value = 30;\r\n                uploadStatus.value = '正在处理图片...';\r\n                console.log('图片处理中...');\r\n              },\r\n              // 报告进度\r\n              drew() {\r\n                uploadPercentage.value = 60;\r\n                uploadStatus.value = '正在压缩图片...';\r\n                console.log('图片绘制完成');\r\n              },\r\n              success(result) {\r\n                // 创建新的文件名（确保扩展名为.jpg）\r\n                const fileName = file.raw.name.replace(/\\.[^/.]+$/, \"\") + '.jpg';\r\n                \r\n                // 创建新的File对象\r\n                const processedFile = new File([result], fileName, {\r\n                  type: 'image/jpeg',\r\n                  lastModified: new Date().getTime()\r\n                });\r\n                \r\n                // 输出处理结果日志\r\n                console.log('图片处理完成:');\r\n                console.log('- 原始大小:', (file.raw.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 处理后大小:', (processedFile.size / 1024).toFixed(2), 'KB');\r\n                console.log('- 压缩率:', Math.round((1 - processedFile.size / file.raw.size) * 100), '%');\r\n                console.log('- 处理后文件类型:', processedFile.type);\r\n                console.log('- 处理后文件名:', processedFile.name);\r\n                \r\n                // 处理完成\r\n                uploadStatus.value = '图片处理完成';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(processedFile);\r\n              },\r\n              error(err) {\r\n                console.error('图片压缩失败:', err);\r\n                // 如果处理失败，返回原始文件\r\n                uploadStatus.value = '处理失败，使用原始图片';\r\n                uploadPercentage.value = 100;\r\n                \r\n                resolve(file.raw);\r\n              }\r\n            });\r\n          });\r\n          \r\n          // 替换原始文件\r\n          console.log('替换原始文件为处理后的文件:', processedFile.name);\r\n          \r\n          // 标记文件为已处理\r\n          file.processed = true;\r\n          file.raw = processedFile;\r\n          \r\n          // 延迟关闭进度条\r\n          setTimeout(() => {\r\n            showUploadProgress.value = false;\r\n          }, 500);\r\n          \r\n        } catch (error) {\r\n          console.error('处理图片时出错:', error);\r\n          ElMessage.warning('图片处理失败，将使用原始图片');\r\n          showUploadProgress.value = false;\r\n        }\r\n      } else if (!file.raw && file.url) {\r\n        // 如果是已有的文件（有URL），不需要处理\r\n        console.log('已有文件，不需要处理:', file.name);\r\n      }\r\n      \r\n      // 检查是否有大文件\r\n      checkForLargeFiles(fileList);\r\n      \r\n      // 确保文件有raw属性\r\n      if (file.raw === undefined && file.status === 'ready') {\r\n        file.raw = file.originFileObj || file;\r\n        console.log('为收集后照片添加raw属性:', file.raw);\r\n      }\r\n      \r\n      // 更新文件列表\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n      \r\n      return false; // 阻止自动上传\r\n    };\r\n\r\n    // 处理收集后的照片移除\r\n    const handlePhotoAfterRemove = (file, fileList) => {\r\n      console.log('收集后照片移除:', file);\r\n      \r\n      // 更新fileListAfter\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...fileListBefore.value, ...fileListAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n    };\r\n\r\n    // 更新预览图片\r\n    const updatePreviewImages = (fileList) => {\r\n      previewImages.value = fileList.map(file => {\r\n        if (file.url) {\r\n          console.log('预览图片URL:', file.url);\r\n          return file.url;\r\n        } else if (file.raw) {\r\n          // 检查是否已经创建了Blob URL\r\n          if (!file._blobUrl) {\r\n            file._blobUrl = URL.createObjectURL(file.raw);\r\n          }\r\n          console.log('预览图片从raw创建:', file._blobUrl);\r\n          return file._blobUrl;\r\n        } else if (file instanceof File) {\r\n          // 检查是否已经创建了Blob URL\r\n          if (!file._blobUrl) {\r\n            file._blobUrl = URL.createObjectURL(file);\r\n          }\r\n          console.log('预览图片从File创建:', file._blobUrl);\r\n          return file._blobUrl;\r\n        }\r\n        return '';\r\n      }).filter(url => url);\r\n      \r\n      console.log('预览图片列表:', previewImages.value);\r\n    };\r\n\r\n    // 处理图片预览\r\n    const handlePictureCardPreview = (file) => {\r\n      console.log('预览图片:', file);\r\n      \r\n      // 更新预览图片列表\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n      \r\n      // 找到当前图片在预览列表中的索引\r\n      const index = previewImages.value.findIndex(url => {\r\n        if (file.url) {\r\n          return url === file.url;\r\n        } else if (file.raw) {\r\n          // 对于新上传的文件，需要比较Blob URL\r\n          const blobUrl = URL.createObjectURL(file.raw);\r\n          const result = url === blobUrl;\r\n          // 释放Blob URL\r\n          URL.revokeObjectURL(blobUrl);\r\n          return result;\r\n        }\r\n        return false;\r\n      });\r\n      \r\n      if (index !== -1) {\r\n        previewIndex.value = index;\r\n      } else {\r\n        previewIndex.value = 0;\r\n      }\r\n      \r\n      // 显示图片预览器\r\n      showViewer.value = true;\r\n    };\r\n    \r\n    // 关闭图片预览\r\n    const closeViewer = () => {\r\n      showViewer.value = false;\r\n    };\r\n\r\n    // 检查是否有大文件\r\n    const checkForLargeFiles = (files) => {\r\n      const largeFileThreshold = 2 * 1024 * 1024; // 2MB\r\n      return files.some(file => file.size > largeFileThreshold);\r\n    };\r\n\r\n    // 处理上传进度\r\n    const handleUploadProgress = (progressEvent) => {\r\n      if (progressEvent.total) {\r\n        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        uploadPercentage.value = percentage;\r\n        \r\n        if (percentage < 33) {\r\n          uploadStatus.value = '正在上传文件...';\r\n        } else if (percentage < 66) {\r\n          uploadStatus.value = '正在处理文件...';\r\n        } else if (percentage < 100) {\r\n          uploadStatus.value = '即将完成...';\r\n        } else {\r\n          uploadStatus.value = '上传完成，正在保存...';\r\n        }\r\n      }\r\n    };\r\n\r\n    // 格式化百分比显示\r\n    const percentageFormat = (percentage) => {\r\n      return percentage === 100 ? '完成' : `${percentage}%`;\r\n    };\r\n\r\n    // 提交表单\r\n    const submitForm = async () => {\r\n      if (!recordForm.value) return;\r\n      \r\n      await recordForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          // 显示上传进度对话框\r\n          uploadPercentage.value = 0;\r\n          uploadStatus.value = '正在上传文件...';\r\n          showUploadProgress.value = true;\r\n          \r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('unitId', form.unitId);\r\n            formData.append('wasteTypeId', form.wasteTypeId);\r\n            formData.append('location', form.location);\r\n            formData.append('collectionDate', form.collectionDate);\r\n            formData.append('collectionTime', form.collectionTime);\r\n            formData.append('quantity', form.quantity);\r\n            formData.append('remarks', form.remarks || '');\r\n            \r\n            // 处理照片 - 根据后端逻辑，如果有新上传的照片，后端会删除所有旧照片\r\n            // 因此，我们需要合并现有照片和新上传的照片\r\n            \r\n            // 处理收集前照片\r\n            if (fileListBefore.value.length > 0) {\r\n              const newFiles = fileListBefore.value.filter(file => file.raw);\r\n              const existingFiles = fileListBefore.value.filter(file => !file.raw);\r\n              \r\n              // 如果有新上传的照片，我们需要将现有照片的URL转换为File对象\r\n              if (newFiles.length > 0) {\r\n                console.log('有新上传的收集前照片，需要合并现有照片');\r\n                \r\n                // 将新照片添加到formData\r\n                newFiles.forEach(file => {\r\n                  if (file.raw) {\r\n                    console.log('添加新的收集前照片:', file.raw.name);\r\n                    formData.append('photo_before', file.raw);\r\n                  }\r\n                });\r\n                \r\n                // 如果有现有照片，我们需要将它们的路径保存到photo_path_before字段\r\n                if (existingFiles.length > 0) {\r\n                  const existingPaths = existingFiles.map(file => {\r\n                    // 确保URL是相对路径\r\n                    let path = file.url;\r\n                    const origin = window.location.origin;\r\n                    if (path.startsWith(origin)) {\r\n                      path = path.substring(origin.length);\r\n                      // 确保路径以/开头\r\n                      if (!path.startsWith('/')) {\r\n                        path = '/' + path;\r\n                      }\r\n                    }\r\n                    return path;\r\n                  });\r\n                  \r\n                  console.log('保存现有收集前照片路径:', existingPaths);\r\n                  formData.append('photo_path_before', JSON.stringify(existingPaths));\r\n                }\r\n              } else if (existingFiles.length > 0) {\r\n                // 如果没有新上传的照片，只有现有照片，我们需要将它们的路径保存到photo_path_before字段\r\n                const existingPaths = existingFiles.map(file => {\r\n                  // 确保URL是相对路径\r\n                  let path = file.url;\r\n                  const origin = window.location.origin;\r\n                  if (path.startsWith(origin)) {\r\n                    path = path.substring(origin.length);\r\n                    // 确保路径以/开头\r\n                    if (!path.startsWith('/')) {\r\n                      path = '/' + path;\r\n                    }\r\n                  }\r\n                  return path;\r\n                });\r\n                \r\n                console.log('保存现有收集前照片路径(无新照片):', existingPaths);\r\n                formData.append('photo_path_before', JSON.stringify(existingPaths));\r\n              }\r\n            } else {\r\n              // 如果没有照片，设置为空数组\r\n              formData.append('photo_path_before', JSON.stringify([]));\r\n            }\r\n            \r\n            // 处理收集后照片\r\n            if (fileListAfter.value.length > 0) {\r\n              const newFiles = fileListAfter.value.filter(file => file.raw);\r\n              const existingFiles = fileListAfter.value.filter(file => !file.raw);\r\n              \r\n              // 如果有新上传的照片，我们需要将现有照片的URL转换为File对象\r\n              if (newFiles.length > 0) {\r\n                console.log('有新上传的收集后照片，需要合并现有照片');\r\n                \r\n                // 将新照片添加到formData\r\n                newFiles.forEach(file => {\r\n                  if (file.raw) {\r\n                    console.log('添加新的收集后照片:', file.raw.name);\r\n                    formData.append('photo_after', file.raw);\r\n                  }\r\n                });\r\n                \r\n                // 如果有现有照片，我们需要将它们的路径保存到photo_path_after字段\r\n                if (existingFiles.length > 0) {\r\n                  const existingPaths = existingFiles.map(file => {\r\n                    // 确保URL是相对路径\r\n                    let path = file.url;\r\n                    const origin = window.location.origin;\r\n                    if (path.startsWith(origin)) {\r\n                      path = path.substring(origin.length);\r\n                      // 确保路径以/开头\r\n                      if (!path.startsWith('/')) {\r\n                        path = '/' + path;\r\n                      }\r\n                    }\r\n                    return path;\r\n                  });\r\n                  \r\n                  console.log('保存现有收集后照片路径:', existingPaths);\r\n                  formData.append('photo_path_after', JSON.stringify(existingPaths));\r\n                }\r\n              } else if (existingFiles.length > 0) {\r\n                // 如果没有新上传的照片，只有现有照片，我们需要将它们的路径保存到photo_path_after字段\r\n                const existingPaths = existingFiles.map(file => {\r\n                  // 确保URL是相对路径\r\n                  let path = file.url;\r\n                  const origin = window.location.origin;\r\n                  if (path.startsWith(origin)) {\r\n                    path = path.substring(origin.length);\r\n                    // 确保路径以/开头\r\n                    if (!path.startsWith('/')) {\r\n                      path = '/' + path;\r\n                    }\r\n                  }\r\n                  return path;\r\n                });\r\n                \r\n                console.log('保存现有收集后照片路径(无新照片):', existingPaths);\r\n                formData.append('photo_path_after', JSON.stringify(existingPaths));\r\n              }\r\n            } else {\r\n              // 如果没有照片，设置为空数组\r\n              formData.append('photo_path_after', JSON.stringify([]));\r\n            }\r\n            \r\n            // 打印FormData内容，用于调试\r\n            console.log('FormData内容:');\r\n            for (let [key, value] of formData.entries()) {\r\n              if (value instanceof File) {\r\n                console.log(`${key}: File - ${value.name} (${value.type}, ${value.size} bytes)`);\r\n              } else {\r\n                console.log(`${key}: ${value}`);\r\n              }\r\n            }\r\n            \r\n            // 根据是新增还是编辑选择不同的API\r\n            if (form.recordId) {\r\n              await httpService.putForm(\r\n                `${apiConfig.endpoints.wasteRecords}/${form.recordId}`, \r\n                formData,\r\n                handleUploadProgress\r\n              );\r\n              ElMessage.success('废物记录更新成功');\r\n            } else {\r\n              await httpService.postForm(\r\n                apiConfig.endpoints.wasteRecords, \r\n                formData,\r\n                handleUploadProgress\r\n              );\r\n              ElMessage.success('废物记录添加成功');\r\n            }\r\n            \r\n            // 关闭上传进度对话框\r\n            showUploadProgress.value = false;\r\n            \r\n            // 返回列表页\r\n            goBack();\r\n          } catch (error) {\r\n            console.error('提交表单失败:', error);\r\n            if (error.response && error.response.data) {\r\n              console.error('服务器返回错误:', error.response.data);\r\n              ElMessage.error(`提交表单失败: ${error.response.data.error || '未知错误'}`);\r\n            } else {\r\n              ElMessage.error('提交表单失败，请检查网络连接');\r\n            }\r\n            showUploadProgress.value = false;\r\n          }\r\n        } else {\r\n          console.log('表单验证失败');\r\n          ElMessage.error('请填写所有必填字段');\r\n          return false;\r\n        }\r\n      });\r\n    };\r\n\r\n    // 返回上一页\r\n    const goBack = () => {\r\n      if (isSuperAdmin.value) {\r\n        router.push('/admin-records');\r\n      } else {\r\n        router.push({ \r\n          name: 'RecordsList', \r\n          params: { unitId: auth.state.user.unit_id } \r\n        });\r\n      }\r\n    };\r\n\r\n    return {\r\n      form,\r\n      rules,\r\n      recordForm,\r\n      loading,\r\n      submitting,\r\n      unitName,\r\n      wasteTypes,\r\n      units,\r\n      fileListBefore,\r\n      fileListAfter,\r\n      previewImages,\r\n      showViewer,\r\n      previewIndex,\r\n      isNew,\r\n      isSuperAdmin,\r\n      parsePhotoPath,\r\n      handlePhotoBeforeChange,\r\n      handlePhotoBeforeRemove,\r\n      handlePhotoAfterChange,\r\n      handlePhotoAfterRemove,\r\n      handlePictureCardPreview,\r\n      handleBeforeUpload,\r\n      closeViewer,\r\n      submitForm,\r\n      goBack,\r\n      showUploadProgress,\r\n      uploadPercentage,\r\n      uploadStatus,\r\n      percentageFormat,\r\n      showLargeFileWarning\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-record-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.back-button {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.form-header {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-header h2 {\r\n  color: #333;\r\n  border-bottom: 2px solid #409EFF;\r\n  display: inline-block;\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.record-form {\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.waste-photo-uploader {\r\n  width: 100%;\r\n}\r\n\r\n.photo-tip, .time-tip {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 5px;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n\r\n.upload-warning {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.upload-progress {\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n\r\n.upload-status {\r\n  margin-top: 10px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n\r\n<style>\r\n/* 修复Element Plus图片预览组件的z-index问题 */\r\n.el-image-viewer__wrapper {\r\n  z-index: 2147483647 !important; /* 使用最大可能的z-index值 */\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的遮罩层也在最上层 */\r\n.el-image-viewer__mask {\r\n  z-index: 2147483646 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的操作按钮在最上层 */\r\n.el-image-viewer__btn {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的关闭按钮在最上层 */\r\n.el-image-viewer__close {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的图片在最上层 */\r\n.el-image-viewer__img {\r\n  z-index: 2147483646 !important;\r\n  position: relative !important;\r\n}\r\n\r\n/* 确保图片预览的操作栏在最上层 */\r\n.el-image-viewer__actions {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的缩放按钮在最上层 */\r\n.el-image-viewer__actions__inner {\r\n  z-index: 2147483647 !important;\r\n  position: relative !important;\r\n}\r\n</style>\r\n","import { render } from \"./EditRecord.vue?vue&type=template&id=05905b14&scoped=true\"\nimport script from \"./EditRecord.vue?vue&type=script&lang=js\"\nexport * from \"./EditRecord.vue?vue&type=script&lang=js\"\n\nimport \"./EditRecord.vue?vue&type=style&index=0&id=05905b14&scoped=true&lang=css\"\nimport \"./EditRecord.vue?vue&type=style&index=1&id=05905b14&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-05905b14\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"user-management-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <h1>人员管理</h1>\r\n      <div></div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"toolbar\">\r\n        <el-button type=\"primary\" @click=\"openAddDialog\">\r\n          <el-icon><plus /></el-icon> 添加用户\r\n        </el-button>\r\n      </div>\r\n\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"users\"\r\n        border\r\n        stripe\r\n        style=\"width: 100%; margin-top: 20px;\"\r\n      >\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"60\" />\r\n        <el-table-column prop=\"username\" label=\"姓名\" width=\"120\" />\r\n        <el-table-column prop=\"phone\" label=\"手机号\" width=\"140\" />\r\n        <el-table-column prop=\"role_name\" label=\"角色\" width=\"120\" />\r\n        <el-table-column prop=\"unit_name\" label=\"单位\" min-width=\"120\" />\r\n        <el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n            <el-popconfirm\r\n              title=\"确定要删除此用户吗？\"\r\n              @confirm=\"handleDelete(scope.row)\"\r\n            >\r\n              <template #reference>\r\n                <el-button size=\"small\" type=\"danger\">删除</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 添加/编辑用户对话框 -->\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      :title=\"isEdit ? '编辑用户' : '添加用户'\"\r\n      width=\"500px\"\r\n    >\r\n      <el-form\r\n        ref=\"userForm\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"100px\"\r\n        style=\"max-width: 400px; margin: 0 auto;\"\r\n      >\r\n        <el-form-item label=\"姓名\" prop=\"username\">\r\n          <el-input v-model=\"form.username\" placeholder=\"请输入姓名\" />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"手机号\" prop=\"phone\">\r\n          <el-input v-model=\"form.phone\" placeholder=\"请输入手机号\" />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"角色\" prop=\"roleId\">\r\n          <el-select v-model=\"form.roleId\" placeholder=\"请选择角色\" style=\"width: 100%\">\r\n            <!-- 如果是超级管理员，可以添加所有类型用户 -->\r\n            <el-option v-if=\"isSuperAdmin\" :value=\"3\" label=\"超级管理员\" />\r\n            <el-option :value=\"2\" label=\"单位管理员\" />\r\n            <el-option :value=\"1\" label=\"基层员工\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"单位\" prop=\"unitId\" v-if=\"form.roleId !== 3\">\r\n          <el-select \r\n            v-model=\"form.unitId\" \r\n            placeholder=\"请选择单位\" \r\n            style=\"width: 100%\"\r\n            :disabled=\"!isSuperAdmin && isEdit\"\r\n          >\r\n            <el-option \r\n              v-for=\"unit in units\" \r\n              :key=\"unit.id\" \r\n              :label=\"unit.name\" \r\n              :value=\"unit.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        \r\n        <el-form-item \r\n          label=\"密码\" \r\n          prop=\"password\"\r\n        >\r\n          <el-input \r\n            v-model=\"form.password\" \r\n            placeholder=\"请输入密码\" \r\n            type=\"password\"\r\n            show-password\r\n          />\r\n          <div class=\"password-hint\" v-if=\"!isEdit\">所有账号必须设置密码</div>\r\n          <div class=\"password-hint\" v-else>不修改密码请留空</div>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"formLoading\">\r\n            确认\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Plus } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'UserManagement',\r\n  components: {\r\n    ArrowLeft,\r\n    Plus\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const loading = ref(false);\r\n    const formLoading = ref(false);\r\n    const dialogVisible = ref(false);\r\n    const isEdit = ref(false);\r\n    const userForm = ref(null);\r\n    const users = ref([]);\r\n    const units = ref([]);\r\n    \r\n    // 判断当前用户是否为超级管理员\r\n    const isSuperAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n    \r\n    // 当前登录用户的单位ID\r\n    const currentUnitId = computed(() => {\r\n      return auth.state.isLoggedIn ? auth.state.user.unit_id : null;\r\n    });\r\n    \r\n    // 表单数据\r\n    const form = reactive({\r\n      id: null,\r\n      username: '',\r\n      phone: '',\r\n      roleId: 1,\r\n      unitId: null,\r\n      password: ''\r\n    });\r\n    \r\n    // 表单验证规则\r\n    const rules = {\r\n      username: [\r\n        { required: true, message: '请输入姓名', trigger: 'blur' },\r\n        { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\r\n      ],\r\n      phone: [\r\n        { required: true, message: '请输入手机号', trigger: 'blur' },\r\n        { pattern: /^1[3-9]\\d{9}$/, message: '请输入有效的手机号码', trigger: 'blur' }\r\n      ],\r\n      roleId: [\r\n        { required: true, message: '请选择角色', trigger: 'change' }\r\n      ],\r\n      unitId: [\r\n        { required: true, message: '请选择单位', trigger: 'change' }\r\n      ],\r\n      password: [\r\n        { \r\n          required: function() {\r\n            // 新增账号时密码必填\r\n            return !isEdit.value;\r\n          }, \r\n          message: '请输入密码', \r\n          trigger: 'blur' \r\n        },\r\n        { min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'blur' }\r\n      ]\r\n    };\r\n    \r\n    // 获取用户列表\r\n    const fetchUsers = async () => {\r\n      loading.value = true;\r\n      try {\r\n        let response;\r\n        if (isSuperAdmin.value) {\r\n          // 超级管理员获取所有用户\r\n          response = await httpService.get(apiConfig.endpoints.users);\r\n        } else {\r\n          // 单位管理员只获取本单位员工\r\n          response = await httpService.get(`${apiConfig.endpoints.units}/${currentUnitId.value}/users`);\r\n        }\r\n        users.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n        ElMessage.error('获取用户列表失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 获取单位列表\r\n    const fetchUnits = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        units.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching units:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      }\r\n    };\r\n    \r\n    // 打开添加对话框\r\n    const openAddDialog = () => {\r\n      isEdit.value = false;\r\n      resetForm();\r\n      dialogVisible.value = true;\r\n      \r\n      // 如果是单位管理员，默认选择当前单位\r\n      if (!isSuperAdmin.value) {\r\n        form.unitId = currentUnitId.value;\r\n      }\r\n    };\r\n    \r\n    // 处理编辑\r\n    const handleEdit = (row) => {\r\n      isEdit.value = true;\r\n      form.id = row.id;\r\n      form.username = row.username;\r\n      form.phone = row.phone;\r\n      form.roleId = row.role_id;\r\n      form.unitId = row.unit_id;\r\n      form.password = ''; // 编辑时密码字段为空\r\n      dialogVisible.value = true;\r\n    };\r\n    \r\n    // 处理删除\r\n    const handleDelete = async (row) => {\r\n      try {\r\n        await httpService.delete(`${apiConfig.endpoints.users}/${row.id}`);\r\n        ElMessage.success('用户删除成功');\r\n        fetchUsers();\r\n      } catch (error) {\r\n        console.error('Error deleting user:', error);\r\n        let errorMsg = '删除用户失败';\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          errorMsg = error.response.data.error;\r\n        }\r\n        ElMessage.error(errorMsg);\r\n      }\r\n    };\r\n    \r\n    // 重置表单\r\n    const resetForm = () => {\r\n      if (userForm.value) {\r\n        userForm.value.resetFields();\r\n      }\r\n      form.id = null;\r\n      form.username = '';\r\n      form.phone = '';\r\n      form.roleId = 1;\r\n      form.unitId = null;\r\n      form.password = '';\r\n    };\r\n    \r\n    // 提交表单\r\n    const submitForm = () => {\r\n      userForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          formLoading.value = true;\r\n          try {\r\n            const userData = {\r\n              username: form.username,\r\n              phone: form.phone,\r\n              roleId: form.roleId,\r\n              unitId: form.roleId !== 3 ? form.unitId : null\r\n            };\r\n            \r\n            // 仅当有输入密码时，才添加密码字段\r\n            if (form.password) {\r\n              userData.password = form.password;\r\n            }\r\n            \r\n            if (isEdit.value) {\r\n              // 更新用户\r\n              await httpService.put(`${apiConfig.endpoints.users}/${form.id}`, userData);\r\n              ElMessage.success('用户更新成功');\r\n            } else {\r\n              // 添加用户\r\n              await httpService.post(apiConfig.endpoints.users, userData);\r\n              ElMessage.success('用户添加成功');\r\n            }\r\n            \r\n            dialogVisible.value = false;\r\n            fetchUsers();\r\n          } catch (error) {\r\n            console.error('Error submitting user form:', error);\r\n            let errorMsg = isEdit.value ? '更新用户失败' : '添加用户失败';\r\n            if (error.response && error.response.data && error.response.data.error) {\r\n              errorMsg = error.response.data.error;\r\n            }\r\n            ElMessage.error(errorMsg);\r\n          } finally {\r\n            formLoading.value = false;\r\n          }\r\n        } else {\r\n          ElMessage.warning('请完成必填项');\r\n        }\r\n      });\r\n    };\r\n    \r\n    // 返回上一页\r\n    const goBack = () => {\r\n      router.back();\r\n    };\r\n    \r\n    onMounted(() => {\r\n      fetchUsers();\r\n      fetchUnits();\r\n    });\r\n    \r\n    return {\r\n      loading,\r\n      formLoading,\r\n      dialogVisible,\r\n      isEdit,\r\n      userForm,\r\n      users,\r\n      units,\r\n      form,\r\n      rules,\r\n      isSuperAdmin,\r\n      currentUnitId,\r\n      openAddDialog,\r\n      handleEdit,\r\n      handleDelete,\r\n      submitForm,\r\n      goBack\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.back-button {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.password-hint {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 5px;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n</style>\r\n","import { render } from \"./UserManagement.vue?vue&type=template&id=53211ca3&scoped=true\"\nimport script from \"./UserManagement.vue?vue&type=script&lang=js\"\nexport * from \"./UserManagement.vue?vue&type=script&lang=js\"\n\nimport \"./UserManagement.vue?vue&type=style&index=0&id=53211ca3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53211ca3\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"admin-records-container\">\r\n    <div class=\"header\">\r\n      <h1>危险废物管理系统 - 全部记录</h1>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"actions\">\r\n        <el-button type=\"primary\" @click=\"addNewRecord\">\r\n          <el-icon><plus /></el-icon> 新增填报\r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"goToUserManagement\">\r\n          <el-icon><user /></el-icon> 人员管理\r\n        </el-button>\r\n        <el-button @click=\"refreshRecords\">\r\n          <el-icon><refresh /></el-icon> 刷新\r\n        </el-button>\r\n      </div>\r\n      \r\n      <!-- 筛选面板 -->\r\n      <el-card class=\"filter-card\">\r\n        <div class=\"filter-header\">\r\n          <h3>筛选条件</h3>\r\n          <el-button type=\"primary\" link @click=\"showFilterPanel = !showFilterPanel\">\r\n            {{ showFilterPanel ? '收起' : '展开' }} \r\n            <el-icon v-if=\"!showFilterPanel\"><arrow-down /></el-icon>\r\n            <el-icon v-else><arrow-up /></el-icon>\r\n          </el-button>\r\n        </div>\r\n        \r\n        <div v-show=\"showFilterPanel\" class=\"filter-form-container\">\r\n          <el-form :model=\"filterForm\" label-width=\"100px\" class=\"filter-form\">\r\n            <el-row :gutter=\"20\">\r\n              <!-- 所属单位（超级管理员特有） -->\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"所属单位\">\r\n                  <el-select v-model=\"filterForm.unitId\" placeholder=\"选择单位\" style=\"width: 100%\" clearable>\r\n                    <el-option \r\n                      v-for=\"unit in units\" \r\n                      :key=\"unit.id\" \r\n                      :label=\"unit.name\" \r\n                      :value=\"unit.id\" \r\n                    />\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 收集时间范围 -->\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"收集时间\">\r\n                  <el-date-picker\r\n                    v-model=\"filterForm.dateRange\"\r\n                    type=\"daterange\"\r\n                    range-separator=\"至\"\r\n                    start-placeholder=\"开始日期\"\r\n                    end-placeholder=\"结束日期\"\r\n                    format=\"YYYY-MM-DD\"\r\n                    value-format=\"YYYY-MM-DD\"\r\n                    style=\"width: 100%\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <!-- 废物类型 -->\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"废物类型\">\r\n                  <el-select v-model=\"filterForm.wasteTypeId\" placeholder=\"选择废物类型\" style=\"width: 100%\" clearable>\r\n                    <el-option \r\n                      v-for=\"type in wasteTypes\" \r\n                      :key=\"type.id\" \r\n                      :label=\"type.name\" \r\n                      :value=\"type.id\" \r\n                    />\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 数量范围 -->\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"数量范围(吨)\">\r\n                  <div class=\"quantity-range\">\r\n                    <el-input-number \r\n                      v-model=\"filterForm.minQuantity\" \r\n                      :min=\"0\"\r\n                      :precision=\"3\"\r\n                      :step=\"0.001\"\r\n                      placeholder=\"最小值\"\r\n                      style=\"width: 47%\"\r\n                    />\r\n                    <span class=\"range-separator\">至</span>\r\n                    <el-input-number \r\n                      v-model=\"filterForm.maxQuantity\" \r\n                      :min=\"filterForm.minQuantity || 0\"\r\n                      :precision=\"3\"\r\n                      :step=\"0.001\"\r\n                      placeholder=\"最大值\"\r\n                      style=\"width: 47%\"\r\n                    />\r\n                  </div>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 产生地点 -->\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"产生地点\">\r\n                  <el-input \r\n                    v-model=\"filterForm.location\" \r\n                    placeholder=\"输入地点关键词搜索\" \r\n                    clearable\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <div class=\"filter-actions\">\r\n              <el-button type=\"primary\" @click=\"applyFilter\">筛选</el-button>\r\n              <el-button @click=\"resetFilter\">重置</el-button>\r\n            </div>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <div class=\"records-wrapper\">\r\n        <el-card class=\"records-card\">\r\n          <div class=\"card-header\">\r\n            <h3>所有废物记录</h3>\r\n            <div class=\"card-actions\">\r\n              <el-button type=\"warning\" @click=\"exportRecords\">\r\n                <el-icon><download /></el-icon> 导出记录\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          \r\n          <el-table \r\n            :data=\"filteredRecords\" \r\n            style=\"width: 100%\" \r\n            border \r\n            v-loading=\"loading\"\r\n            stripe\r\n            class=\"responsive-table\"\r\n            height=\"500\"\r\n            @scroll=\"handleScroll\"\r\n          >\r\n            <el-table-column prop=\"unit_name\" label=\"单位\" width=\"100\" />\r\n            <el-table-column prop=\"waste_type_name\" label=\"废物类型\" width=\"100\" />\r\n            <el-table-column prop=\"location\" label=\"产生地点\" />\r\n            <el-table-column prop=\"collection_start_time\" label=\"收集开始时间\" width=\"160\" />\r\n            <el-table-column label=\"数量(吨)\" width=\"80\">\r\n              <template #default=\"scope\">\r\n                {{ parseFloat(scope.row.quantity).toFixed(3) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"creator_name\" label=\"汇报人\" width=\"100\" />\r\n            <el-table-column prop=\"created_at\" label=\"记录时间\" width=\"160\" />\r\n            <el-table-column\r\n              label=\"现场照片（清理前）\"\r\n              width=\"120\"\r\n              align=\"center\"\r\n            >\r\n              <template #default=\"scope\">\r\n                <div v-if=\"scope.row.photo_path_before\" class=\"photo-preview\">\r\n                  <!-- 多张照片显示 -->\r\n                  <div \r\n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_before)\" \r\n                    :key=\"index\"\r\n                    class=\"photo-thumbnail-container\"\r\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_before), index)\"\r\n                  >\r\n                    <el-image\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :src=\"`${baseUrl}${path}`\"\r\n                      fit=\"cover\"\r\n                    ></el-image>\r\n                  </div>\r\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_before).length > 1\" class=\"photo-count\">\r\n                    {{ parsePhotoPath(scope.row.photo_path_before).length }}张\r\n                  </div>\r\n                </div>\r\n                <span v-else>无</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"现场照片（清理后）\"\r\n              width=\"120\"\r\n              align=\"center\"\r\n            >\r\n              <template #default=\"scope\">\r\n                <div v-if=\"scope.row.photo_path_after\" class=\"photo-preview\">\r\n                  <!-- 多张照片显示 -->\r\n                  <div \r\n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_after)\" \r\n                    :key=\"index\"\r\n                    class=\"photo-thumbnail-container\"\r\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_after), index)\"\r\n                  >\r\n                    <el-image\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :src=\"`${baseUrl}${path}`\"\r\n                      fit=\"cover\"\r\n                    ></el-image>\r\n                  </div>\r\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_after).length > 1\" class=\"photo-count\">\r\n                    {{ parsePhotoPath(scope.row.photo_path_after).length }}张\r\n                  </div>\r\n                </div>\r\n                <span v-else>无</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"70\" fixed=\"right\">\r\n              <template #default=\"scope\">\r\n                <div class=\"operation-buttons\">\r\n                  <el-button \r\n                    type=\"primary\" \r\n                    size=\"small\" \r\n                    @click=\"editRecord(scope.row.id)\"\r\n                    text\r\n                  >\r\n                    编辑\r\n                  </el-button>\r\n                  <el-button \r\n                    type=\"danger\" \r\n                    size=\"small\" \r\n                    @click=\"confirmDelete(scope.row)\"\r\n                    text\r\n                  >\r\n                    删除\r\n                  </el-button>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          \r\n          <div v-if=\"loadingMore\" class=\"loading-more\">\r\n            <el-icon class=\"loading\"><loading /></el-icon>\r\n            加载更多...\r\n          </div>\r\n          \r\n          <div class=\"empty-block\" v-if=\"records.length === 0 && !loading\">\r\n            <el-empty description=\"暂无废物记录\" />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n\r\n    <!-- 添加独立的图片预览组件 -->\r\n    <el-image-viewer\r\n      v-if=\"showViewer\"\r\n      :url-list=\"previewImages\"\r\n      :initial-index=\"previewIndex\"\r\n      @close=\"closeViewer\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage, ElMessageBox, ElImageViewer, ElLoading } from 'element-plus';\r\nimport axios from 'axios';\r\nimport { Plus, Refresh, User, ArrowDown, ArrowUp, Download, Loading } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\nimport { exportToExcelWithImages, exportToExcel } from '../utils/exportUtils';\r\nimport apiConfig from '../config/api';\r\n\r\n// API基础URL\r\n// const apiBaseURL = apiConfig.baseURL;\r\n\r\n// 解析照片路径\r\nconst parsePhotoPath = (path) => {\r\n  if (!path) return [];\r\n  \r\n  try {\r\n    // 尝试解析为JSON\r\n    if (path.startsWith('[') && path.endsWith(']')) {\r\n      return JSON.parse(path);\r\n    }\r\n    // 如果不是JSON格式，则将其作为单个路径返回\r\n    return [path];\r\n  } catch (error) {\r\n    console.error('解析照片路径失败:', error);\r\n    // 如果解析失败，将其作为单个路径返回\r\n    return [path];\r\n  }\r\n};\r\n\r\n// 获取指定类型的照片\r\nconst getPhotosByType = (record, type) => {\r\n  if (!record.photos) return [];\r\n  \r\n  try {\r\n    const photos = JSON.parse(record.photos);\r\n    if (Array.isArray(photos)) {\r\n      return photos.filter(photo => photo.type === type);\r\n    }\r\n    return [];\r\n  } catch (error) {\r\n    console.error('解析照片JSON失败:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default {\r\n  name: 'AdminRecordsView',\r\n  components: {\r\n    Plus,\r\n    Refresh,\r\n    User,\r\n    ArrowDown,\r\n    ArrowUp,\r\n    Download,\r\n    ElImageViewer,\r\n    Loading\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const records = ref([]);\r\n    const loading = ref(false);\r\n    const units = ref([]);\r\n    const wasteTypes = ref([]);\r\n    const showFilterPanel = ref(true);\r\n    \r\n    // 添加baseUrl定义\r\n    const baseUrl = apiConfig.baseURL;\r\n    \r\n    // 图片预览相关\r\n    const showViewer = ref(false);\r\n    const previewImages = ref([]);\r\n    const previewIndex = ref(0);\r\n    \r\n    // 添加分页相关的响应式变量\r\n    const page = ref(1);\r\n    const pageSize = ref(20);\r\n    const hasMore = ref(true);\r\n    const loadingMore = ref(false);\r\n    \r\n    // 筛选表单\r\n    const filterForm = reactive({\r\n      unitId: null,\r\n      dateRange: null,\r\n      wasteTypeId: null,\r\n      minQuantity: null,\r\n      maxQuantity: null,\r\n      location: ''\r\n    });\r\n    \r\n    // 过滤后的记录\r\n    const filteredRecords = computed(() => {\r\n      return records.value.filter(record => {\r\n        // 检查所属单位\r\n        if (filterForm.unitId && record.unit_id !== filterForm.unitId) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查废物类型\r\n        if (filterForm.wasteTypeId && record.waste_type_id !== filterForm.wasteTypeId) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查数量范围\r\n        if (filterForm.minQuantity !== null && parseFloat(record.quantity) < filterForm.minQuantity) {\r\n          return false;\r\n        }\r\n        if (filterForm.maxQuantity !== null && parseFloat(record.quantity) > filterForm.maxQuantity) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查地点关键词\r\n        if (filterForm.location && !record.location.toLowerCase().includes(filterForm.location.toLowerCase())) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查日期范围\r\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\r\n          const startDate = new Date(filterForm.dateRange[0]);\r\n          // 将结束日期设置为当天的23:59:59，以包含整天\r\n          const endDate = new Date(filterForm.dateRange[1]);\r\n          endDate.setHours(23, 59, 59, 999);\r\n          \r\n          // 解析记录中的收集开始时间\r\n          if (record.collection_start_time) {\r\n            // 处理已格式化的日期时间字符串\r\n            const recordDate = parseFormattedDateTime(record.collection_start_time);\r\n            if (recordDate < startDate || recordDate > endDate) {\r\n              return false;\r\n            }\r\n          } else {\r\n            // 如果记录没有收集时间，并且筛选设置了日期范围，则排除该记录\r\n            return false;\r\n          }\r\n        }\r\n        \r\n        return true;\r\n      });\r\n    });\r\n    \r\n    // 解析已格式化的日期时间字符串\r\n    const parseFormattedDateTime = (formattedDateTime) => {\r\n      // 假设格式是 \"2025-03-01 14:30:00\"\r\n      // 移除所有非数字和连字符、冒号的字符\r\n      const cleanedStr = formattedDateTime.replace(/[^0-9\\-: ]/g, '');\r\n      return new Date(cleanedStr);\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // 验证用户是否为超级管理员\r\n      if (!auth.state.isLoggedIn || auth.state.user.role_id !== 3) {\r\n        ElMessage.error('权限不足');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n      \r\n      await Promise.all([\r\n        fetchUnits(),\r\n        fetchWasteTypes(),\r\n        fetchRecords()\r\n      ]);\r\n    });\r\n    \r\n    // 获取单位列表\r\n    const fetchUnits = async () => {\r\n      try {\r\n        const response = await axios.get(apiConfig.getUrl(apiConfig.endpoints.units));\r\n        units.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取单位列表失败:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      }\r\n    };\r\n    \r\n    // 获取废物类型列表\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await axios.get(apiConfig.getUrl(apiConfig.endpoints.wasteTypes));\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取废物类型列表失败:', error);\r\n        ElMessage.error('获取废物类型列表失败');\r\n      }\r\n    };\r\n\r\n    const fetchRecords = async (isLoadMore = false) => {\r\n      if (!isLoadMore) {\r\n        loading.value = true;\r\n        page.value = 1;\r\n        records.value = [];\r\n      } else {\r\n        loadingMore.value = true;\r\n      }\r\n      \r\n      try {\r\n        const params = {\r\n          page: page.value,\r\n          pageSize: pageSize.value,\r\n          wasteTypeId: filterForm.wasteTypeId,\r\n          minQuantity: filterForm.minQuantity,\r\n          maxQuantity: filterForm.maxQuantity,\r\n          location: filterForm.location,\r\n        };\r\n        \r\n        // Only add dateRange if it exists and has both start and end dates\r\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\r\n          params.dateRange = JSON.stringify(filterForm.dateRange);\r\n        }\r\n        \r\n        const response = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.wasteRecords)}/user/${auth.state.user.id}`,\r\n          { params }\r\n        );\r\n        \r\n        // 格式化日期\r\n        const formattedRecords = response.data.records.map(record => ({\r\n          ...record,\r\n          created_at: formatDateTime(record.created_at),\r\n          collection_start_time: formatDateTime(record.collection_start_time)\r\n        }));\r\n        \r\n        if (isLoadMore) {\r\n          records.value = [...records.value, ...formattedRecords];\r\n        } else {\r\n          records.value = formattedRecords;\r\n        }\r\n        \r\n        hasMore.value = response.data.hasMore;\r\n        if (hasMore.value) {\r\n          page.value++;\r\n        }\r\n      } catch (error) {\r\n        console.error('获取废物记录失败:', error);\r\n        ElMessage.error('获取废物记录失败');\r\n      } finally {\r\n        loading.value = false;\r\n        loadingMore.value = false;\r\n      }\r\n    };\r\n\r\n    const formatDateTime = (dateTimeStr) => {\r\n      if (!dateTimeStr) return '';\r\n      const date = new Date(dateTimeStr);\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        hour12: false\r\n      });\r\n    };\r\n\r\n    const refreshRecords = () => {\r\n      fetchRecords();\r\n    };\r\n\r\n    const addNewRecord = () => {\r\n      if (auth.state.user.role_id === 3) {\r\n        router.push('/record/new');\r\n      } else {\r\n        router.push(`/unit/${auth.state.user.unit_id}`);\r\n      }\r\n    };\r\n\r\n    const goToUserManagement = () => {\r\n      router.push('/user-management');\r\n    };\r\n\r\n    const editRecord = (recordId) => {\r\n      router.push(`/record/${recordId}`);\r\n    };\r\n\r\n    // 应用筛选\r\n    const applyFilter = async () => {\r\n      await fetchRecords();\r\n      ElMessage.success('筛选已应用');\r\n    };\r\n    \r\n    // 重置筛选\r\n    const resetFilter = async () => {\r\n      filterForm.unitId = null;\r\n      filterForm.dateRange = null;\r\n      filterForm.wasteTypeId = null;\r\n      filterForm.minQuantity = null;\r\n      filterForm.maxQuantity = null;\r\n      filterForm.location = '';\r\n      await fetchRecords();\r\n      ElMessage.info('筛选条件已重置');\r\n    };\r\n    \r\n    // 导出筛选后的记录为Excel\r\n    const exportRecords = async () => {\r\n      try {\r\n        // 先弹出选择对话框\r\n        await ElMessageBox.confirm(\r\n          '请选择导出格式',\r\n          '导出选项',\r\n          {\r\n            confirmButtonText: '带图片导出',\r\n            cancelButtonText: '不带图片导出',\r\n            distinguishCancelAndClose: true,\r\n            type: 'info'\r\n          }\r\n        ).then(async () => {\r\n          // 用户选择带图片导出\r\n          await exportWithImages();\r\n        }).catch(action => {\r\n          if (action === 'cancel') {\r\n            // 用户选择不带图片导出\r\n            exportWithoutImages();\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error('导出过程发生错误:', error);\r\n        ElMessage.error('导出失败: ' + (error.message || '未知错误'));\r\n      }\r\n    };\r\n    \r\n    // 带图片导出\r\n    const exportWithImages = async () => {\r\n      try {\r\n        // 先显示提示消息\r\n        ElMessage({\r\n          message: '导出大量包含图片的记录所需时间较长，请耐心等待',\r\n          type: 'info',\r\n          duration: 5000\r\n        });\r\n        \r\n        // 创建全屏加载\r\n        const loadingInstance = ElLoading.service({\r\n          lock: true,\r\n          text: '正在导出记录，请稍候...',\r\n          background: 'rgba(0, 0, 0, 0.7)'\r\n        });\r\n        \r\n        loading.value = true;\r\n        \r\n        // 准备筛选条件\r\n        const queryParams = {\r\n          wasteTypeId: filterForm.wasteTypeId ? filterForm.wasteTypeId : undefined,\r\n          minQuantity: filterForm.minQuantity ? filterForm.minQuantity : undefined,\r\n          maxQuantity: filterForm.maxQuantity ? filterForm.maxQuantity : undefined,\r\n          location: filterForm.location || undefined,\r\n          dateRange: filterForm.dateRange ? JSON.stringify(filterForm.dateRange) : undefined,\r\n          unitId: filterForm.unitId ? filterForm.unitId : undefined\r\n        };\r\n        \r\n        console.log('导出记录的筛选条件:', queryParams);\r\n        \r\n        // 调用后端API获取完整的记录数据\r\n        const { data } = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.exportWasteRecords)}/${auth.state.user.id}`,\r\n          { params: queryParams }\r\n        );\r\n        \r\n        console.log(`从后端获取到 ${data.length} 条记录用于导出`);\r\n        \r\n        if (data.length === 0) {\r\n          loadingInstance.close();\r\n          ElMessage.warning('没有符合条件的记录可导出');\r\n          loading.value = false;\r\n          return;\r\n        }\r\n        \r\n        // 更新加载文本\r\n        loadingInstance.setText(`准备导出 ${data.length} 条记录...`);\r\n        \r\n        // 准备导出数据\r\n        const exportData = data.map(record => {\r\n          // 解析图片路径\r\n          const beforePhotos = parsePhotoPath(record.photo_path_before);\r\n          const afterPhotos = parsePhotoPath(record.photo_path_after);\r\n          \r\n          return {\r\n            '单位': record.unit_name,\r\n            '废物类型': record.waste_type_name,\r\n            '产生地点': record.location,\r\n            '数量(kg)': record.quantity,\r\n            '收集开始时间': formatDateTime(record.collection_start_time),\r\n            '填报人': record.creator_name || '系统',\r\n            '清理前照片': beforePhotos.length > 0 ? beforePhotos[0] : '',  // 使用第一张图片的路径\r\n            '清理后照片': afterPhotos.length > 0 ? afterPhotos[0] : ''    // 使用第一张图片的路径\r\n          };\r\n        });\r\n        \r\n        // 设置文件名\r\n        const unitName = filterForm.unitId \r\n          ? units.value.find(u => u.id === filterForm.unitId)?.name || '未知单位'\r\n          : '全部单位';\r\n        const fileName = `危险废物记录_${unitName}`;\r\n        \r\n        // 设置表头\r\n        const exportHeaders = [\r\n          { text: '单位', field: '单位' },\r\n          { text: '废物类型', field: '废物类型' },\r\n          { text: '产生地点', field: '产生地点' },\r\n          { text: '数量(kg)', field: '数量(kg)' },\r\n          { text: '收集开始时间', field: '收集开始时间' },\r\n          { text: '填报人', field: '填报人' },\r\n          { text: '清理前照片', field: '清理前照片', isImage: true },\r\n          { text: '清理后照片', field: '清理后照片', isImage: true }\r\n        ];\r\n        \r\n        // 获取服务器的基础URL\r\n        const baseUrl = window.location.origin;\r\n        \r\n        // 设置进度回调函数\r\n        const onProgress = (current, total) => {\r\n          const percent = Math.round((current / total) * 100);\r\n          loadingInstance.setText(`正在导出：${percent}% (${current}/${total})`);\r\n        };\r\n        \r\n        // 执行带图片的导出\r\n        const result = await exportToExcelWithImages(exportData, fileName, exportHeaders, baseUrl, onProgress);\r\n        \r\n        // 关闭加载提示\r\n        loadingInstance.close();\r\n        \r\n        if (result) {\r\n          ElMessage.success('导出成功');\r\n        } else {\r\n          ElMessage.error('导出失败，请重试');\r\n        }\r\n      } catch (error) {\r\n        console.error('导出记录失败:', error);\r\n        ElMessage.error('导出失败: ' + (error.message || '未知错误'));\r\n      } finally {\r\n        loading.value = false;\r\n        // 确保加载提示被关闭\r\n        ElLoading.service().close();\r\n      }\r\n    };\r\n    \r\n    // 不带图片导出\r\n    const exportWithoutImages = async () => {\r\n      try {\r\n        // 创建加载遮罩\r\n        const loadingInstance = ElLoading.service({\r\n          lock: true,\r\n          text: '正在导出记录，请稍候...',\r\n          background: 'rgba(0, 0, 0, 0.7)'\r\n        });\r\n        \r\n        loading.value = true;\r\n        \r\n        // 准备筛选条件\r\n        const queryParams = {\r\n          wasteTypeId: filterForm.wasteTypeId ? filterForm.wasteTypeId : undefined,\r\n          minQuantity: filterForm.minQuantity ? filterForm.minQuantity : undefined,\r\n          maxQuantity: filterForm.maxQuantity ? filterForm.maxQuantity : undefined,\r\n          location: filterForm.location || undefined,\r\n          dateRange: filterForm.dateRange ? JSON.stringify(filterForm.dateRange) : undefined,\r\n          unitId: filterForm.unitId ? filterForm.unitId : undefined\r\n        };\r\n        \r\n        // 调用后端API获取完整的记录数据\r\n        const { data } = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.exportWasteRecords)}/${auth.state.user.id}`,\r\n          { params: queryParams }\r\n        );\r\n        \r\n        if (data.length === 0) {\r\n          loadingInstance.close();\r\n          ElMessage.warning('没有符合条件的记录可导出');\r\n          loading.value = false;\r\n          return;\r\n        }\r\n        \r\n        // 更新加载文本\r\n        loadingInstance.setText(`准备导出 ${data.length} 条记录...`);\r\n        \r\n        // 准备导出数据\r\n        const exportData = data.map(record => ({\r\n          '单位': record.unit_name,\r\n          '废物类型': record.waste_type_name,\r\n          '产生地点': record.location,\r\n          '数量(kg)': record.quantity,\r\n          '收集开始时间': formatDateTime(record.collection_start_time),\r\n          '填报人': record.creator_name || '系统',\r\n          '清理前照片': record.photo_path_before ? '有' : '无',\r\n          '清理后照片': record.photo_path_after ? '有' : '无'\r\n        }));\r\n        \r\n        // 设置文件名\r\n        const unitName = filterForm.unitId \r\n          ? units.value.find(u => u.id === filterForm.unitId)?.name || '未知单位'\r\n          : '全部单位';\r\n        const fileName = `危险废物记录_${unitName}`;\r\n        \r\n        // 设置表头\r\n        const exportHeaders = [\r\n          { text: '单位', field: '单位' },\r\n          { text: '废物类型', field: '废物类型' },\r\n          { text: '产生地点', field: '产生地点' },\r\n          { text: '数量(kg)', field: '数量(kg)' },\r\n          { text: '收集开始时间', field: '收集开始时间' },\r\n          { text: '填报人', field: '填报人' },\r\n          { text: '清理前照片', field: '清理前照片' },\r\n          { text: '清理后照片', field: '清理后照片' }\r\n        ];\r\n        \r\n        // 执行不带图片的导出\r\n        const result = await exportToExcel(exportData, fileName, exportHeaders);\r\n        \r\n        // 关闭加载提示\r\n        loadingInstance.close();\r\n        \r\n        if (result) {\r\n          ElMessage.success('导出成功');\r\n        } else {\r\n          ElMessage.error('导出失败，请重试');\r\n        }\r\n      } catch (error) {\r\n        console.error('导出记录失败:', error);\r\n        ElMessage.error('导出失败: ' + (error.message || '未知错误'));\r\n      } finally {\r\n        loading.value = false;\r\n        // 确保加载提示被关闭\r\n        ElLoading.service().close();\r\n      }\r\n    };\r\n    \r\n    // 确认删除记录\r\n    const confirmDelete = (record) => {\r\n      ElMessageBox.confirm(\r\n        '此操作将永久删除该记录，是否继续？',\r\n        '警告',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        }\r\n      )\r\n        .then(async () => {\r\n          try {\r\n            await axios.delete(`${apiConfig.getUrl(apiConfig.endpoints.wasteRecords)}/${record.id}`);\r\n            ElMessage.success('删除成功');\r\n            await fetchRecords();\r\n          } catch (error) {\r\n            console.error('删除记录失败:', error);\r\n            ElMessage.error('删除记录失败');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.info('已取消删除');\r\n        });\r\n    };\r\n\r\n    // 预览照片\r\n    const previewPhoto = (paths, index) => {\r\n      // 确保paths是数组\r\n      const photoArray = Array.isArray(paths) ? paths : [paths];\r\n      previewImages.value = photoArray.map(path => `${baseUrl}${path}`);\r\n      previewIndex.value = index || 0;\r\n      showViewer.value = true;\r\n    };\r\n    \r\n    // 关闭预览\r\n    const closeViewer = () => {\r\n      showViewer.value = false;\r\n    };\r\n\r\n    // 添加滚动加载处理函数\r\n    const handleScroll = async (e) => {\r\n      const element = e.target;\r\n      // 添加安全检查，确保element存在且有必要的属性\r\n      if (\r\n        element && \r\n        element.scrollHeight && \r\n        !loadingMore.value &&\r\n        hasMore.value &&\r\n        element.scrollHeight - element.scrollTop - element.clientHeight < 100\r\n      ) {\r\n        await fetchRecords(true);\r\n      }\r\n    };\r\n\r\n    return {\r\n      records,\r\n      filteredRecords,\r\n      loading,\r\n      units,\r\n      wasteTypes,\r\n      showFilterPanel,\r\n      filterForm,\r\n      applyFilter,\r\n      resetFilter,\r\n      exportRecords,\r\n      parsePhotoPath,\r\n      getPhotosByType,\r\n      refreshRecords,\r\n      addNewRecord,\r\n      goToUserManagement,\r\n      editRecord,\r\n      confirmDelete,\r\n      // 图片预览相关\r\n      showViewer,\r\n      previewImages,\r\n      previewIndex,\r\n      previewPhoto,\r\n      closeViewer,\r\n      baseUrl,\r\n      page,\r\n      pageSize,\r\n      hasMore,\r\n      loadingMore,\r\n      handleScroll\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-records-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 20px;\r\n  gap: 10px;\r\n}\r\n\r\n.filter-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filter-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.filter-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.filter-form-container {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.quantity-range {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.range-separator {\r\n  margin: 0 5px;\r\n}\r\n\r\n.filter-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  gap: 10px;\r\n}\r\n\r\n.records-wrapper {\r\n  margin-top: 20px;\r\n}\r\n\r\n.records-card {\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.record-image {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  display: block;\r\n}\r\n\r\n.photo-count {\r\n  font-size: 12px;\r\n  color: #409EFF;\r\n  text-align: center;\r\n  margin-top: 2px;\r\n}\r\n\r\n.image-error {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-color: #f5f7fa;\r\n  color: #909399;\r\n}\r\n\r\n.empty-block {\r\n  margin: 20px 0;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n\r\n.photo-thumbnail-container {\r\n  cursor: pointer;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.photo-count {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  text-align: center;\r\n  margin-top: 2px;\r\n}\r\n\r\n.photo-preview {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.operation-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  align-items: center;\r\n}\r\n\r\n.operation-buttons .el-button {\r\n  margin-left: 0;\r\n  padding: 4px 8px;\r\n}\r\n\r\n.loading-more {\r\n  text-align: center;\r\n  padding: 10px 0;\r\n  color: #909399;\r\n}\r\n\r\n.loading-more .loading {\r\n  margin-right: 5px;\r\n  animation: rotating 2s linear infinite;\r\n}\r\n\r\n@keyframes rotating {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n\r\n<style>\r\n/* 修复Element Plus图片预览组件的z-index问题 */\r\n.el-image-viewer__wrapper {\r\n  z-index: 2147483647 !important; /* 使用最大可能的z-index值 */\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的遮罩层也在最上层 */\r\n.el-image-viewer__mask {\r\n  z-index: 2147483646 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的操作按钮在最上层 */\r\n.el-image-viewer__btn {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的关闭按钮在最上层 */\r\n.el-image-viewer__close {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的图片在最上层 */\r\n.el-image-viewer__img {\r\n  z-index: 2147483646 !important;\r\n  position: relative !important;\r\n}\r\n\r\n/* 确保图片预览的操作栏在最上层 */\r\n.el-image-viewer__actions {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的缩放按钮在最上层 */\r\n.el-image-viewer__actions__inner {\r\n  z-index: 2147483647 !important;\r\n  position: relative !important;\r\n}\r\n</style>\r\n","import { render } from \"./AdminRecords.vue?vue&type=template&id=027944f7&scoped=true\"\nimport script from \"./AdminRecords.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRecords.vue?vue&type=script&lang=js\"\n\nimport \"./AdminRecords.vue?vue&type=style&index=0&id=027944f7&scoped=true&lang=css\"\nimport \"./AdminRecords.vue?vue&type=style&index=1&id=027944f7&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-027944f7\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport UnitSelection from '../views/UnitSelection.vue'\r\nimport WasteForm from '../views/WasteForm.vue'\r\nimport RecordsList from '../views/RecordsList.vue'\r\nimport Login from '../views/Login.vue'\r\nimport EditRecord from '../views/EditRecord.vue'\r\nimport UserManagement from '../views/UserManagement.vue'\r\nimport AdminRecords from '../views/AdminRecords.vue'\r\nimport auth from '../store/auth'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: Login,\r\n    meta: { requiresAuth: false }\r\n  },\r\n  {\r\n    path: '/user-management',\r\n    name: 'UserManagement',\r\n    component: UserManagement,\r\n    meta: { requiresAuth: true, requiresManager: true }\r\n  },\r\n  {\r\n    path: '/',\r\n    name: 'UnitSelection',\r\n    component: UnitSelection,\r\n    meta: { requiresAuth: true, requiresSuperAdmin: true }\r\n  },\r\n  {\r\n    path: '/admin-records',\r\n    name: 'AdminRecords',\r\n    component: AdminRecords,\r\n    meta: { requiresAuth: true, requiresSuperAdmin: true }\r\n  },\r\n  {\r\n    path: '/record/new',\r\n    name: 'EditRecord',\r\n    component: EditRecord,\r\n    props: { id: null },\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/record/:id',\r\n    name: 'EditRecord',\r\n    component: EditRecord,\r\n    props: true,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/unit/:id',\r\n    name: 'WasteForm',\r\n    component: WasteForm,\r\n    props: true,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/records/:unitId',\r\n    name: 'RecordsList',\r\n    component: RecordsList,\r\n    props: true,\r\n    meta: { requiresAuth: true }\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\n// 路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n  // 检查页面是否需要授权\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\r\n  const requiresSuperAdmin = to.matched.some(record => record.meta.requiresSuperAdmin);\r\n  const requiresManager = to.matched.some(record => record.meta.requiresManager);\r\n  \r\n  // 如果路由需要登录但用户未登录，重定向到登录页面\r\n  if (requiresAuth && !auth.state.isLoggedIn) {\r\n    next({ name: 'Login' });\r\n    return;\r\n  }\r\n  \r\n  // 如果路由需要超级管理员权限但用户不是超级管理员\r\n  if (requiresSuperAdmin && auth.state.isLoggedIn && auth.state.user.role_id !== 3) {\r\n    // 如果用户已登录但不是超级管理员，重定向到其单位页面\r\n    next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n    return;\r\n  }\r\n  \r\n  // 如果路由需要管理员权限但用户不是管理员\r\n  if (requiresManager && auth.state.isLoggedIn && auth.state.user.role_id === 1) {\r\n    // 普通员工不能访问管理员页面\r\n    next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n    return;\r\n  }\r\n  \r\n  // 如果用户已登录且尝试访问登录页面，重定向到合适的页面\r\n  if (to.name === 'Login' && auth.state.isLoggedIn) {\r\n    if (auth.state.user.role_id === 3) {\r\n      next({ name: 'AdminRecords' }); // 超级管理员到管理页面\r\n    } else if (auth.state.user.role_id === 2) {\r\n      next({ name: 'RecordsList', params: { unitId: auth.state.user.unit_id } }); // 单位管理员直接进入记录页面\r\n    } else {\r\n      next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } }); // 普通员工到填报页面\r\n    }\r\n    return;\r\n  }\r\n  \r\n  // 超级管理员访问首页时，重定向到管理页面\r\n  if (to.path === '/' && auth.state.isLoggedIn) {\r\n    if (auth.state.user.role_id === 3) {\r\n      next({ name: 'AdminRecords' });\r\n      return;\r\n    } else if (auth.state.user.role_id === 2) {\r\n      next({ name: 'RecordsList', params: { unitId: auth.state.user.unit_id } });\r\n      return;\r\n    } else {\r\n      next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n      return;\r\n    }\r\n  }\r\n  \r\n  // 检查用户是否尝试访问不属于自己单位的页面\r\n  if (to.name === 'WasteForm' && auth.state.isLoggedIn && \r\n      auth.state.user.role_id !== 3 && // 不是超级管理员\r\n      auth.state.user.unit_id !== parseInt(to.params.id)) {\r\n    // 如果用户尝试访问其他单位，重定向到自己的单位\r\n    next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n    return;\r\n  }\r\n  \r\n  // 其他情况正常通过\r\n  next();\r\n});\r\n\r\nexport default router","import axios from 'axios';\nimport { ElMessage } from 'element-plus';\nimport auth from '../store/auth';\nimport apiConfig from './api';\nimport router from '../router';\n\n// 创建 axios 实例\nconst axiosInstance = axios.create({\n  baseURL: apiConfig.baseURL,\n  timeout: 300000, // 300秒超时\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  maxContentLength: 50 * 1024 * 1024, // 50MB\n  maxBodyLength: 50 * 1024 * 1024 // 50MB\n});\n\n// 请求拦截器\naxiosInstance.interceptors.request.use(\n  config => {\n    // 从 localStorage 或 sessionStorage 获取 token\n    const token = localStorage.getItem('token') || sessionStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => {\n    console.error('Request error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\naxiosInstance.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n          // 检查是否是登录请求\n          if (error.config.url.includes('/api/login')) {\n            // 登录失败，不在这里显示错误信息，让组件自己处理\n            return Promise.reject(error);\n          } else {\n            // token 过期或无效，清除登录状态并跳转到登录页\n            auth.logout();\n            ElMessage.error('登录已过期，请重新登录');\n            router.push('/login');\n          }\n          break;\n        case 403:\n          ElMessage.error('没有权限访问该资源');\n          break;\n        case 404:\n          ElMessage.error('请求的资源不存在');\n          break;\n        case 500:\n          ElMessage.error('服务器错误，请稍后重试');\n          break;\n        default:\n          ElMessage.error(error.response.data?.error || '请求失败');\n      }\n    } else if (error.request) {\n      ElMessage.error('网络错误，请检查网络连接');\n    } else {\n      ElMessage.error('请求配置错误');\n    }\n    return Promise.reject(error);\n  }\n);\n\n// HTTP服务\nconst httpService = {\n  // GET请求\n  get(endpoint, params = {}) {\n    return axiosInstance.get(endpoint, { params });\n  },\n  \n  // POST请求\n  post(endpoint, data = {}) {\n    return axiosInstance.post(endpoint, data);\n  },\n  \n  // 带文件上传的POST请求\n  postForm(endpoint, formData, onUploadProgress) {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      timeout: 300000, // 300秒超时\n      maxContentLength: 50 * 1024 * 1024, // 50MB\n      maxBodyLength: 50 * 1024 * 1024 // 50MB\n    };\n    \n    // 只有当onUploadProgress是函数时才添加到配置中\n    if (typeof onUploadProgress === 'function') {\n      config.onUploadProgress = onUploadProgress;\n    }\n    \n    return axiosInstance.post(endpoint, formData, config);\n  },\n  \n  // PUT请求\n  put(endpoint, data = {}) {\n    return axiosInstance.put(endpoint, data);\n  },\n  \n  // 带文件上传的PUT请求\n  putForm(endpoint, formData, onUploadProgress) {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      timeout: 300000, // 300秒超时\n      maxContentLength: 50 * 1024 * 1024, // 50MB\n      maxBodyLength: 50 * 1024 * 1024 // 50MB\n    };\n    \n    // 只有当onUploadProgress是函数时才添加到配置中\n    if (typeof onUploadProgress === 'function') {\n      config.onUploadProgress = onUploadProgress;\n    }\n    \n    return axiosInstance.put(endpoint, formData, config);\n  },\n  \n  // DELETE请求\n  delete(endpoint) {\n    return axiosInstance.delete(endpoint);\n  },\n\n  // 导出 axios 实例的 defaults\n  defaults: axiosInstance.defaults\n};\n\nexport default httpService;\n","import { reactive } from 'vue';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\n\r\n// 初始化状态\r\nconst defaultState = {\r\n  user: null,\r\n  token: null,\r\n  isLoggedIn: false,\r\n  loading: false,\r\n  error: null\r\n};\r\n\r\n// 创建响应式状态\r\nconst state = reactive({\r\n  ...defaultState\r\n});\r\n\r\n// 从localStorage获取已保存的用户信息和token\r\nconst init = () => {\r\n  const savedUser = localStorage.getItem('user');\r\n  const savedToken = localStorage.getItem('token');\r\n  if (savedUser && savedToken) {\r\n    try {\r\n      const user = JSON.parse(savedUser);\r\n      state.user = user;\r\n      state.token = savedToken;\r\n      state.isLoggedIn = true;\r\n      // 设置 token 到 httpService\r\n      if (httpService.defaults && httpService.defaults.headers) {\r\n        httpService.defaults.headers.common['Authorization'] = `Bearer ${savedToken}`;\r\n      }\r\n    } catch (e) {\r\n      console.error('Error parsing saved user data:', e);\r\n      localStorage.removeItem('user');\r\n      localStorage.removeItem('token');\r\n    }\r\n  }\r\n};\r\n\r\n// 登录方法\r\nconst login = async (phone, password, rememberMe = false, userType = 1) => {\r\n  // 设置加载状态\r\n  state.loading = true;\r\n  state.error = null;\r\n  \r\n  console.log('auth.login 开始执行，手机号:', phone, '用户类型:', userType);\r\n\r\n  try {\r\n    // 构建登录请求数据\r\n    const postData = { \r\n      phone, \r\n      rememberMe,\r\n      userType // 添加用户类型\r\n    };\r\n    \r\n    // 只有在密码存在且非空时才添加到请求中\r\n    if (password !== null && password !== undefined && password !== '') {\r\n      postData.password = password;\r\n      console.log('auth.login 发送密码参数');\r\n    } else {\r\n      console.log('auth.login 不发送密码参数');\r\n    }\r\n    \r\n    console.log('发送登录请求，数据:', postData);\r\n    const response = await httpService.post(apiConfig.endpoints.login, postData);\r\n    console.log('登录请求成功响应:', response.data);\r\n\r\n    const { token, ...user } = response.data;\r\n    state.user = user;\r\n    state.token = token;\r\n    state.isLoggedIn = true;\r\n    \r\n    // 设置 token 到 httpService\r\n    if (httpService.defaults && httpService.defaults.headers) {\r\n      httpService.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    \r\n    // 如果选择记住登录，保存到localStorage\r\n    if (rememberMe) {\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      localStorage.setItem('token', token);\r\n    } else {\r\n      // 否则只保存在 sessionStorage 中\r\n      sessionStorage.setItem('user', JSON.stringify(user));\r\n      sessionStorage.setItem('token', token);\r\n    }\r\n    \r\n    return { success: true, user };\r\n  } catch (error) {\r\n    // 只设置错误状态，不显示错误消息\r\n    state.error = error.response?.data?.error || '登录失败，请检查网络连接';\r\n    console.error('Login error:', error);\r\n    return { success: false, error: state.error };\r\n  } finally {\r\n    state.loading = false;\r\n  }\r\n};\r\n\r\n// 注销方法\r\nconst logout = () => {\r\n  state.user = null;\r\n  state.token = null;\r\n  state.isLoggedIn = false;\r\n  if (httpService.defaults && httpService.defaults.headers) {\r\n    delete httpService.defaults.headers.common['Authorization'];\r\n  }\r\n  localStorage.removeItem('user');\r\n  localStorage.removeItem('token');\r\n  sessionStorage.removeItem('user');\r\n  sessionStorage.removeItem('token');\r\n};\r\n\r\n// 判断是否为超级管理员\r\nconst isAdmin = () => {\r\n  return state.isLoggedIn && state.user && state.user.role_id === 3;\r\n};\r\n\r\n// 判断是否为单位管理员\r\nconst isUnitAdmin = () => {\r\n  return state.isLoggedIn && state.user && state.user.role_id === 2;\r\n};\r\n\r\n// 获取当前用户ID\r\nconst getUserId = () => {\r\n  return state.user ? state.user.id : null;\r\n};\r\n\r\n// 获取当前用户单位ID\r\nconst getUnitId = () => {\r\n  return state.user ? state.user.unit_id : null;\r\n};\r\n\r\n// 初始化认证状态\r\ninit();\r\n\r\nexport default {\r\n  state,\r\n  login,\r\n  logout,\r\n  isAdmin,\r\n  isUnitAdmin,\r\n  getUserId,\r\n  getUnitId\r\n};\r\n","import { render } from \"./AppHeader.vue?vue&type=template&id=47e31eb0&scoped=true\"\nimport script from \"./AppHeader.vue?vue&type=script&lang=js\"\nexport * from \"./AppHeader.vue?vue&type=script&lang=js\"\n\nimport \"./AppHeader.vue?vue&type=style&index=0&id=47e31eb0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-47e31eb0\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=c0f1a378\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=c0f1a378&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport ElementPlus from 'element-plus'\r\nimport 'element-plus/dist/index.css'\r\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\r\nimport './styles/global.css'\r\nimport './assets/css/responsive.css'\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(router)\r\napp.use(ElementPlus, {\r\n  locale: zhCn\r\n})\r\n\r\napp.mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhazardous_waste_management_frontend\"] = self[\"webpackChunkhazardous_waste_management_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6091); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","$setup","showHeader","_createBlock","_component_app_header","key","_createCommentVNode","_createVNode","_component_router_view","class","_createElementVNode","auth","state","isLoggedIn","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","userName","user","unit_name","_hoisted_4","_component_el_button","type","onClick","handleLogout","default","_withCtx","_cache","_","API_BASE_URL","baseURL","endpoints","login","users","units","wasteTypes","wasteRecords","wasteRecordsByUnit","wasteRecordDetail","wasteRecordsByUser","exportWasteRecords","getUrl","endpoint","this","_Fragment","_renderList","$data","unit","_component_el_card","shadow","$event","$options","selectUnit","name","data","loading","created","fetchUnits","methods","console","log","response","axios","get","api","error","ElMessage","$router","push","params","__exports__","isAdmin","args","goBack","_component_el_icon","_component_arrow_left","viewRecords","_component_document","_hoisted_5","unitName","_component_el_form","ref","model","form","rules","_component_el_form_item","label","prop","_component_el_select","modelValue","wasteTypeId","placeholder","style","_component_el_option","value","_component_el_input","location","_hoisted_6","_component_el_date_picker","collectionDate","format","editable","teleported","_component_el_time_picker","collectionTime","prefix","_component_clock","_component_el_input_number","quantity","min","precision","step","onFocus","selectAllText","controls","showLargeFileWarning","_hoisted_7","_component_el_alert","title","closable","_component_el_upload","action","handlePhotoBeforeChange","handlePhotoBeforeRemove","fileListBefore","limit","multiple","handleBeforeUpload","accept","_component_plus","handlePhotoAfterChange","handlePhotoAfterRemove","fileListAfter","_hoisted_8","submitForm","resetForm","_component_el_dialog","showUploadProgress","width","_hoisted_9","_component_el_progress","percentage","uploadPercentage","percentageFormat","status","_hoisted_10","uploadStatus","components","ArrowLeft","Document","Plus","Clock","props","String","Number","required","setup","router","useRouter","wasteForm","photoFilesBefore","photoFilesAfter","computed","role_id","reactive","Date","toISOString","slice","undefined","photo_before","photo_after","message","trigger","onMounted","async","viewportMeta","document","createElement","setAttribute","head","appendChild","originalViewport","querySelector","remove","fetchUnitName","fetchWasteTypes","onBeforeUnmount","httpService","apiConfig","find","u","parseInt","file","acceptedTypes","isImage","includes","maxSize","size","Promise","resolve","toFixed","Compressor","quality","maxWidth","maxHeight","mimeType","convertSize","beforeDraw","drew","success","result","fileName","replace","processedFile","File","lastModified","getTime","Math","round","setTimeout","err","fileList","processed","raw","existingIndex","findIndex","f","uid","warning","url","allFiles","checkForLargeFiles","filter","files","largeFileThreshold","some","handleUploadProgress","progressEvent","total","loaded","validate","valid","formData","FormData","append","creatorName","username","phone","creator_id","creator_name","unitId","length","forEach","index","postForm","resetFields","event","target","inputEl","select","goHome","_component_home","addNewRecord","isUnitAdmin","goToUserManagement","_component_user","refreshRecords","_component_refresh","exportRecords","_component_download","link","showFilterPanel","_component_arrow_up","_component_arrow_down","filterForm","_component_el_row","gutter","_component_el_col","xs","sm","md","lg","xl","dateRange","clearable","minQuantity","maxQuantity","applyFilter","resetFilter","_hoisted_11","_hoisted_12","_hoisted_13","_component_el_table","filteredRecords","border","stripe","height","onScroll","handleScroll","_component_el_table_column","scope","parseFormattedDateTime","row","collection_start_time","parseFloat","created_at","align","photo_path_before","_hoisted_14","parsePhotoPath","path","previewPhoto","_component_el_image","src","baseUrl","fit","_hoisted_15","_hoisted_16","_hoisted_17","photo_path_after","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","fixed","_hoisted_22","canEdit","editRecord","text","confirmDelete","loadingMore","_hoisted_23","_component_loading","records","_hoisted_24","_component_el_empty","description","showViewer","_component_el_image_viewer","previewImages","previewIndex","onClose","closeViewer","XLSX","Object","keys","join","fetchImageAsBuffer","imageUrl","window","origin","fullUrl","startsWith","fetch","headers","ok","Error","statusText","arrayBuffer","byteLength","exportToExcelWithImages","onProgress","timestamp","substring","fullFileName","workbook","ExcelJS","creator","lastModifiedBy","modified","worksheet","addWorksheet","columns","map","header","field","getRow","font","bold","alignment","vertical","horizontal","totalItems","h","currentItem","rowIndex","rowData","excelRow","addRow","fieldName","imagePath","imageBuffer","colIndex","cellRef","getCell","address","imageId","addImage","buffer","extension","split","pop","toLowerCase","tl","col","br","editAs","imageError","xlsx","writeBuffer","blob","Blob","URL","createObjectURL","href","download","click","revokeObjectURL","exportToExcel","a","body","removeChild","exportToCSV","csvFileName","csvContent","headerRow","item","cellValue","visibility","Home","Refresh","User","ArrowDown","ArrowUp","Download","ElImageViewer","Loading","endsWith","JSON","parse","page","pageSize","hasMore","Array","isArray","record","waste_type_id","startDate","endDate","setHours","recordDate","dateTimeStr","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","fetchRecords","getUnitId","recordId","unit_id","userId","getUserId","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","delete","catch","info","distinguishCancelAndClose","exportWithImages","exportWithoutImages","duration","loadingInstance","ElLoading","service","lock","background","queryParams","stringify","close","setText","exportData","beforePhotos","afterPhotos","waste_type_name","current","percent","paths","photoArray","isLoadMore","e","scrollHeight","scrollTop","clientHeight","onSubmit","_withModifiers","password","_component_el_radio_group","userType","onChange","handleUserTypeChange","_component_el_radio","_component_el_checkbox","rememberMe","loginForm","showPassword","phoneRules","pattern","passwordRules","clearValidate","doLogin","isNew","isSuperAdmin","handlePictureCardPreview","_component_el_collapse","_component_el_collapse_item","route","useRoute","recordForm","submitting","createdAt","parsed","p","trim","creatorId","remarks","fetchRecordDetails","dateTime","toTimeString","photoPaths","cleanPath","updatePreviewImages","originFileObj","_blobUrl","blobUrl","newFiles","existingFiles","existingPaths","entries","putForm","openAddDialog","handleEdit","_component_el_popconfirm","onConfirm","handleDelete","reference","dialogVisible","isEdit","footer","formLoading","roleId","disabled","userForm","currentUnitId","max","fetchUsers","errorMsg","userData","put","post","back","span","getPhotosByType","photos","photo","formattedDateTime","cleanedStr","all","formattedRecords","formatDateTime","toLocaleString","year","month","day","hour","minute","hour12","exportHeaders","element","routes","component","Login","meta","requiresAuth","UserManagement","requiresManager","UnitSelection","requiresSuperAdmin","AdminRecords","EditRecord","WasteForm","RecordsList","createRouter","history","createWebHistory","process","beforeEach","to","from","next","matched","axiosInstance","create","timeout","maxContentLength","maxBodyLength","interceptors","request","use","config","token","localStorage","getItem","sessionStorage","Authorization","reject","logout","onUploadProgress","defaults","defaultState","init","savedUser","savedToken","common","removeItem","postData","setItem","AppHeader","render","app","createApp","App","ElementPlus","locale","zhCn","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","Function","obj","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}