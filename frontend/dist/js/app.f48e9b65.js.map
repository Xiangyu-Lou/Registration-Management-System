{"version":3,"file":"js/app.f48e9b65.js","mappings":"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","sources":["webpack://hazardous-waste-management-frontend/./src/App.vue","webpack://hazardous-waste-management-frontend/./src/components/AppHeader.vue","webpack://hazardous-waste-management-frontend/./src/config/api.js","webpack://hazardous-waste-management-frontend/./src/views/UnitSelection.vue","webpack://hazardous-waste-management-frontend/./src/views/UnitSelection.vue?83cf","webpack://hazardous-waste-management-frontend/./src/views/WasteForm.vue","webpack://hazardous-waste-management-frontend/./src/views/WasteForm.vue?56c2","webpack://hazardous-waste-management-frontend/./src/views/RecordsList.vue","webpack://hazardous-waste-management-frontend/./src/utils/exportUtils.js","webpack://hazardous-waste-management-frontend/./src/views/RecordsList.vue?c4c8","webpack://hazardous-waste-management-frontend/./src/views/Login.vue","webpack://hazardous-waste-management-frontend/./src/views/Login.vue?240b","webpack://hazardous-waste-management-frontend/./src/views/EditRecord.vue","webpack://hazardous-waste-management-frontend/./src/views/EditRecord.vue?7d9b","webpack://hazardous-waste-management-frontend/./src/views/UserManagement.vue","webpack://hazardous-waste-management-frontend/./src/views/UserManagement.vue?8bda","webpack://hazardous-waste-management-frontend/./src/views/AdminRecords.vue","webpack://hazardous-waste-management-frontend/./src/views/AdminRecords.vue?960a","webpack://hazardous-waste-management-frontend/./src/router/index.js","webpack://hazardous-waste-management-frontend/./src/config/httpService.js","webpack://hazardous-waste-management-frontend/./src/store/auth.js","webpack://hazardous-waste-management-frontend/./src/components/AppHeader.vue?1f6a","webpack://hazardous-waste-management-frontend/./src/App.vue?7ccd","webpack://hazardous-waste-management-frontend/./src/main.js","webpack://hazardous-waste-management-frontend/webpack/bootstrap","webpack://hazardous-waste-management-frontend/webpack/runtime/chunk loaded","webpack://hazardous-waste-management-frontend/webpack/runtime/compat get default export","webpack://hazardous-waste-management-frontend/webpack/runtime/define property getters","webpack://hazardous-waste-management-frontend/webpack/runtime/global","webpack://hazardous-waste-management-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://hazardous-waste-management-frontend/webpack/runtime/make namespace object","webpack://hazardous-waste-management-frontend/webpack/runtime/jsonp chunk loading","webpack://hazardous-waste-management-frontend/webpack/startup"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <app-header v-if=\"showHeader\" />\r\n    <router-view />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\nimport { useRoute } from 'vue-router';\r\nimport AppHeader from './components/AppHeader.vue';\r\n\r\nexport default {\r\n  components: {\r\n    AppHeader\r\n  },\r\n  setup() {\r\n    const route = useRoute();\r\n    \r\n    // 仅在非登录页面显示头部\r\n    const showHeader = computed(() => {\r\n      return route.path !== '/login';\r\n    });\r\n    \r\n    return {\r\n      showHeader\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\nhtml, body {\r\n  margin: 0;\r\n  padding: 0;\r\n  height: 100%;\r\n  font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", \"Microsoft YaHei\", Arial, sans-serif;\r\n}\r\n\r\n#app {\r\n  min-height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"app-header\">\r\n    <div class=\"header-title\">\r\n      <h1>危险废物管理系统</h1>\r\n    </div>\r\n    <div class=\"user-info\" v-if=\"auth.state.isLoggedIn\">\r\n      <span class=\"welcome-text\">\r\n        欢迎,\r\n        <strong>{{ userName }}</strong>\r\n        <span v-if=\"auth.state.user.unit_name\" class=\"unit-tag\">\r\n          {{ auth.state.user.unit_name }}\r\n        </span>\r\n      </span>\r\n      <el-button type=\"text\" class=\"logout-button\" @click=\"handleLogout\">\r\n        退出登录\r\n      </el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'AppHeader',\r\n  setup() {\r\n    const router = useRouter();\r\n    \r\n    // 获取用户名，优先显示用户名，如果没有则显示手机号\r\n    const userName = computed(() => {\r\n      if (!auth.state.isLoggedIn) return '';\r\n      return auth.state.user.username || auth.state.user.phone;\r\n    });\r\n    \r\n    // 处理退出登录\r\n    const handleLogout = () => {\r\n      auth.logout();\r\n      ElMessage.success('已退出登录');\r\n      router.push('/login');\r\n    };\r\n    \r\n    return {\r\n      auth,\r\n      userName,\r\n      handleLogout\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.app-header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 0 20px;\r\n  height: 60px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.header-title h1 {\r\n  margin: 0;\r\n  font-size: 20px;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 20px;\r\n}\r\n\r\n.welcome-text {\r\n  font-size: 14px;\r\n}\r\n\r\n.role-tag, .unit-tag {\r\n  font-size: 12px;\r\n  margin-left: 5px;\r\n  padding: 2px 6px;\r\n  border-radius: 4px;\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.logout-button {\r\n  color: white;\r\n  font-weight: bold;\r\n  margin-left: 15px;\r\n}\r\n\r\n.logout-button:hover {\r\n  color: #f0f0f0;\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.el-dropdown-link {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  color: white;\r\n}\r\n\r\n/* 移动端适配 */\r\n@media screen and (max-width: 768px) {\r\n  .app-header {\r\n    padding: 0 10px;\r\n    height: 50px;\r\n    flex-wrap: wrap;\r\n  }\r\n  \r\n  .header-title h1 {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .user-info {\r\n    gap: 10px;\r\n  }\r\n  \r\n  .welcome-text {\r\n    font-size: 12px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    align-items: center;\r\n  }\r\n  \r\n  .role-tag, .unit-tag {\r\n    font-size: 10px;\r\n    margin-left: 3px;\r\n    padding: 1px 4px;\r\n  }\r\n  \r\n  .logout-button {\r\n    margin-left: 5px;\r\n    padding: 4px 8px;\r\n  }\r\n}\r\n\r\n/* 小屏幕手机适配 */\r\n@media screen and (max-width: 480px) {\r\n  .app-header {\r\n    flex-direction: column;\r\n    height: auto;\r\n    padding: 10px;\r\n  }\r\n  \r\n  .header-title {\r\n    margin-bottom: 5px;\r\n  }\r\n  \r\n  .user-info {\r\n    width: 100%;\r\n    justify-content: space-between;\r\n  }\r\n  \r\n  .unit-tag {\r\n    display: none;\r\n  }\r\n}\r\n</style>\r\n","// API 配置文件\r\n\r\n// 设置 API 基础 URL\r\n// 使用相对路径，这样会请求当前域名下的 API\r\n// 当通过Nginx代理访问时，这样可以确保请求正确路由\r\nconst API_BASE_URL = '';\r\n\r\nexport default {\r\n  baseURL: API_BASE_URL,\r\n  \r\n  // API 路径\r\n  endpoints: {\r\n    login: '/api/login',\r\n    users: '/api/users',\r\n    units: '/api/units',\r\n    wasteTypes: '/api/waste-types',\r\n    wasteRecords: '/api/waste-records',\r\n    wasteRecordsByUnit: '/api/waste-records',\r\n    wasteRecordDetail: '/api/waste-records/detail',\r\n    wasteRecordsByUser: '/api/waste-records/user',\r\n    exportWasteRecords: '/api/waste-records/export/user',\r\n  },\r\n  \r\n  // 获取完整 API URL\r\n  getUrl(endpoint) {\r\n    return `${this.baseURL}${endpoint}`;\r\n  }\r\n};\r\n","<template>\r\n  <div class=\"unit-selection-container\">\r\n    <div class=\"header\">\r\n      <h1>危险废物管理系统</h1>\r\n    </div>\r\n    <div class=\"content\">\r\n      <h2>请选择您的单位</h2>\r\n      <div class=\"units-grid\">\r\n        <el-card\r\n          v-for=\"unit in units\"\r\n          :key=\"unit.id\"\r\n          class=\"unit-card\"\r\n          shadow=\"hover\"\r\n          @click=\"selectUnit(unit)\"\r\n        >\r\n          <div class=\"unit-name\">{{ unit.name }}</div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ElMessage } from 'element-plus';\r\nimport api from '../config/api';\r\n\r\nexport default {\r\n  name: 'UnitSelection',\r\n  data() {\r\n    return {\r\n      units: [],\r\n      loading: false\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchUnits();\r\n  },\r\n  methods: {\r\n    async fetchUnits() {\r\n      this.loading = true;\r\n      try {\r\n        console.log('正在获取单位列表...');\r\n        const response = await axios.get(api.getUrl(api.endpoints.units));\r\n        console.log('获取单位列表成功:', response.data);\r\n        this.units = response.data;\r\n      } catch (error) {\r\n        console.error('获取单位列表失败:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    selectUnit(unit) {\r\n      this.$router.push({ name: 'WasteForm', params: { id: unit.id } });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.unit-selection-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  color: #333;\r\n}\r\n\r\n.units-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n  gap: 20px;\r\n}\r\n\r\n.unit-card {\r\n  height: 100px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  transition: transform 0.3s;\r\n}\r\n\r\n.unit-card:hover {\r\n  transform: translateY(-5px);\r\n}\r\n\r\n.unit-name {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n  color: #333;\r\n  text-align: center;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n</style>\r\n","import { render } from \"./UnitSelection.vue?vue&type=template&id=a706bc72&scoped=true\"\nimport script from \"./UnitSelection.vue?vue&type=script&lang=js\"\nexport * from \"./UnitSelection.vue?vue&type=script&lang=js\"\n\nimport \"./UnitSelection.vue?vue&type=style&index=0&id=a706bc72&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a706bc72\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"waste-form-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\" v-if=\"isAdmin\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <div v-else></div>\r\n      <h1>危险废物填报</h1>\r\n      <div class=\"view-records\" @click=\"viewRecords\">\r\n        查看记录 <el-icon><document /></el-icon>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"unit-info\">\r\n        <h2>{{ unitName }}</h2>\r\n      </div>\r\n\r\n      <el-form \r\n        ref=\"wasteForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-position=\"top\"\r\n        class=\"waste-form\"\r\n      >\r\n        <el-form-item label=\"废物类型\" prop=\"wasteTypeId\">\r\n          <el-select v-model=\"form.wasteTypeId\" placeholder=\"请选择废物类型\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"type in wasteTypes\" \r\n              :key=\"type.id\" \r\n              :label=\"type.name\" \r\n              :value=\"type.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"产生地点\" prop=\"location\">\r\n          <el-input v-model=\"form.location\" placeholder=\"请输入废物产生地点\" />\r\n        </el-form-item>\r\n\r\n        <div class=\"form-row\">\r\n          <el-form-item label=\"收集日期\" class=\"date-item\">\r\n            <el-date-picker\r\n              v-model=\"form.collectionDate\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              format=\"YYYY-MM-DD\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              style=\"width: 100%\"\r\n              :editable=\"false\"\r\n              popper-class=\"date-picker-popup\"\r\n              :teleported=\"false\"\r\n            />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"收集时间\" class=\"time-item\">\r\n            <el-time-picker\r\n              v-model=\"form.collectionTime\"\r\n              format=\"HH:mm\"\r\n              placeholder=\"选择时间\"\r\n              value-format=\"HH:mm\"\r\n              style=\"width: 100%\"\r\n              :editable=\"false\"\r\n              popper-class=\"time-picker-popup\"\r\n              :teleported=\"false\"\r\n            >\r\n              <template #prefix>\r\n                <el-icon><clock /></el-icon>\r\n              </template>\r\n            </el-time-picker>\r\n          </el-form-item>\r\n        </div>\r\n\r\n        <el-form-item label=\"收集数量(吨)\" prop=\"quantity\">\r\n          <el-input-number\r\n            v-model=\"form.quantity\"\r\n            :min=\"0\"\r\n            :precision=\"3\"\r\n            :step=\"0.001\"\r\n            style=\"width: 100%\"\r\n            @focus=\"selectAllText($event)\"\r\n            :input-props=\"{\r\n              inputmode: 'decimal',\r\n              pattern: '[0-9]*[.,]?[0-9]*'\r\n            }\"\r\n            :controls=\"false\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集前）\" prop=\"photo_before\">\r\n          <div class=\"photo-tip\">请上传废物收集前的现场照片（最多5张）</div>\r\n          <div class=\"upload-warning\" v-if=\"showLargeFileWarning\">\r\n            <el-alert\r\n              title=\"上传大文件可能会导致处理时间较长，请耐心等待\"\r\n              type=\"warning\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n          </div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoBeforeChange\"\r\n            :on-remove=\"handlePhotoBeforeRemove\"\r\n            :file-list=\"fileListBefore\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集后）\" prop=\"photo_after\">\r\n          <div class=\"photo-tip\">请上传废物收集后的现场照片（最多5张）</div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoAfterChange\"\r\n            :on-remove=\"handlePhotoAfterRemove\"\r\n            :file-list=\"fileListAfter\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <div class=\"form-actions\">\r\n          <el-button type=\"primary\" class=\"submit-btn\" @click=\"submitForm\" :loading=\"loading\">提交</el-button>\r\n          <el-button class=\"reset-btn\" @click=\"resetForm\">重置</el-button>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 上传进度条对话框 -->\r\n    <el-dialog\r\n      v-model=\"showUploadProgress\"\r\n      title=\"正在上传文件\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <div class=\"upload-progress\">\r\n        <p>正在上传文件，请勿关闭页面...</p>\r\n        <el-progress \r\n          :percentage=\"uploadPercentage\" \r\n          :format=\"percentageFormat\"\r\n          :status=\"uploadPercentage === 100 ? 'success' : ''\"\r\n        ></el-progress>\r\n        <p class=\"upload-status\">{{ uploadStatus }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed, onBeforeUnmount } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Document, Plus, Clock } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'WasteForm',\r\n  components: {\r\n    ArrowLeft,\r\n    Document,\r\n    Plus,\r\n    Clock\r\n  },\r\n  props: {\r\n    id: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  setup(props) {\r\n    const router = useRouter();\r\n    const wasteForm = ref(null);\r\n    const loading = ref(false);\r\n    const unitName = ref('');\r\n    const wasteTypes = ref([]);\r\n    const photoFilesBefore = ref([]);\r\n    const photoFilesAfter = ref([]);\r\n    const fileListBefore = ref([]);\r\n    const fileListAfter = ref([]);\r\n    const showUploadProgress = ref(false);\r\n    const uploadPercentage = ref(0);\r\n    const uploadStatus = ref('准备上传...');\r\n    const showLargeFileWarning = ref(false);\r\n    \r\n    // 检查用户是否为超级管理员\r\n    const isAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n\r\n    // 初始化表单，将日期和时间分开\r\n    const form = reactive({\r\n      wasteTypeId: '',\r\n      location: '',\r\n      collectionDate: new Date().toISOString().slice(0, 10), // 默认为当天\r\n      collectionTime: '08:00',\r\n      quantity: undefined,\r\n      photo_before: [],\r\n      photo_after: []\r\n    });\r\n\r\n    const rules = {\r\n      wasteTypeId: [\r\n        { required: true, message: '请选择废物类型', trigger: 'change' }\r\n      ],\r\n      location: [\r\n        { required: true, message: '请输入废物产生地点', trigger: 'blur' }\r\n      ],\r\n      collectionDate: [\r\n        { required: false }\r\n      ],\r\n      collectionTime: [\r\n        { required: false }\r\n      ],\r\n      quantity: [\r\n        { required: true, message: '请输入收集数量', trigger: 'change' }\r\n      ]\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // 设置viewport meta标签\r\n      const viewportMeta = document.createElement('meta');\r\n      viewportMeta.setAttribute('name', 'viewport');\r\n      viewportMeta.setAttribute('content', 'width=device-width,initial-scale=1.0,user-scalable=no,maximum-scale=1');\r\n      document.head.appendChild(viewportMeta);\r\n\r\n      // 保存原始的viewport meta标签（如果存在）\r\n      const originalViewport = document.querySelector('meta[name=\"viewport\"]');\r\n      if (originalViewport && originalViewport !== viewportMeta) {\r\n        originalViewport.remove();\r\n      }\r\n\r\n      await fetchUnitName();\r\n      await fetchWasteTypes();\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      // 移除我们添加的viewport meta标签\r\n      const viewportMeta = document.querySelector('meta[name=\"viewport\"]');\r\n      if (viewportMeta) {\r\n        viewportMeta.remove();\r\n      }\r\n\r\n      // 恢复原始的viewport设置\r\n      const originalViewport = document.createElement('meta');\r\n      originalViewport.setAttribute('name', 'viewport');\r\n      originalViewport.setAttribute('content', 'width=device-width,initial-scale=1.0');\r\n      document.head.appendChild(originalViewport);\r\n    });\r\n\r\n    const fetchUnitName = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        const unit = response.data.find(u => u.id === parseInt(props.id));\r\n        if (unit) {\r\n          unitName.value = unit.name;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching unit name:', error);\r\n        ElMessage.error('获取单位信息失败');\r\n      }\r\n    };\r\n\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching waste types:', error);\r\n        ElMessage.error('获取废物类型失败');\r\n      }\r\n    };\r\n\r\n    // 处理上传前的文件处理\r\n    const handleBeforeUpload = async (file) => {\r\n      // 检查文件类型是否为图片\r\n      const acceptedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];\r\n      const isImage = acceptedTypes.includes(file.type);\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!');\r\n        return false;\r\n      }\r\n\r\n      // 检查文件大小（50MB = 50 * 1024 * 1024 bytes）\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        ElMessage.error('图片大小不能超过50MB!');\r\n        return false;\r\n      }\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const largeFileThreshold = 5 * 1024 * 1024; // 5MB\r\n      if (file.size > largeFileThreshold) {\r\n        showLargeFileWarning.value = true;\r\n      }\r\n      \r\n      // 直接返回true，允许文件被添加到上传列表\r\n      return true;\r\n    };\r\n\r\n    // 处理收集前照片变更\r\n    const handlePhotoBeforeChange = (file, fileList) => {\r\n      // 更新文件列表\r\n      console.log('收集前照片变更:', file);\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 检查是否是新上传的文件批次\r\n      const newFiles = fileList.filter(f => f.raw && !photoFilesBefore.value.some(pf => pf.name === f.raw.name));\r\n      \r\n      // 将新文件添加到photoFilesBefore\r\n      newFiles.forEach(newFile => {\r\n        if (newFile.raw) {\r\n          photoFilesBefore.value.push(newFile.raw);\r\n        }\r\n      });\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const allFiles = [...photoFilesBefore.value, ...photoFilesAfter.value];\r\n      showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n      \r\n      console.log('更新后的photoFilesBefore:', photoFilesBefore.value);\r\n    };\r\n\r\n    // 处理收集前照片移除\r\n    const handlePhotoBeforeRemove = (file, fileList) => {\r\n      console.log('收集前照片移除:', file);\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 从photoFilesBefore中移除被删除的文件\r\n      if (file.raw) {\r\n        photoFilesBefore.value = photoFilesBefore.value.filter(f => \r\n          f.name !== file.raw.name\r\n        );\r\n      } else {\r\n        // 如果没有raw属性，可能是已经处理过的文件，使用uid或name来匹配\r\n        photoFilesBefore.value = photoFilesBefore.value.filter(f => \r\n          f.uid !== file.uid && f.name !== file.name\r\n        );\r\n      }\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...photoFilesBefore.value, ...photoFilesAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      console.log('更新后的photoFilesBefore:', photoFilesBefore.value);\r\n    };\r\n\r\n    // 处理收集后照片变更\r\n    const handlePhotoAfterChange = (file, fileList) => {\r\n      // 更新文件列表\r\n      console.log('收集后照片变更:', file);\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 检查是否是新上传的文件批次\r\n      const newFiles = fileList.filter(f => f.raw && !photoFilesAfter.value.some(pf => pf.name === f.raw.name));\r\n      \r\n      // 将新文件添加到photoFilesAfter\r\n      newFiles.forEach(newFile => {\r\n        if (newFile.raw) {\r\n          photoFilesAfter.value.push(newFile.raw);\r\n        }\r\n      });\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const allFiles = [...photoFilesBefore.value, ...photoFilesAfter.value];\r\n      showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n      \r\n      console.log('更新后的photoFilesAfter:', photoFilesAfter.value);\r\n    };\r\n\r\n    // 处理收集后照片移除\r\n    const handlePhotoAfterRemove = (file, fileList) => {\r\n      console.log('收集后照片移除:', file);\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 从photoFilesAfter中移除被删除的文件\r\n      if (file.raw) {\r\n        photoFilesAfter.value = photoFilesAfter.value.filter(f => \r\n          f.name !== file.raw.name\r\n        );\r\n      } else {\r\n        // 如果没有raw属性，可能是已经处理过的文件，使用uid或name来匹配\r\n        photoFilesAfter.value = photoFilesAfter.value.filter(f => \r\n          f.uid !== file.uid && f.name !== file.name\r\n        );\r\n      }\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...photoFilesBefore.value, ...photoFilesAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      console.log('更新后的photoFilesAfter:', photoFilesAfter.value);\r\n    };\r\n\r\n    // 检查是否有大文件\r\n    const checkForLargeFiles = (files) => {\r\n      const largeFileThreshold = 5 * 1024 * 1024; // 5MB\r\n      return files.some(file => file.size > largeFileThreshold);\r\n    };\r\n\r\n    // 处理上传进度\r\n    const handleUploadProgress = (progressEvent) => {\r\n      if (progressEvent.total) {\r\n        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        uploadPercentage.value = percentage;\r\n        \r\n        if (percentage < 33) {\r\n          uploadStatus.value = '正在上传文件...';\r\n        } else if (percentage < 66) {\r\n          uploadStatus.value = '正在处理文件...';\r\n        } else if (percentage < 100) {\r\n          uploadStatus.value = '即将完成...';\r\n        } else {\r\n          uploadStatus.value = '上传完成，正在保存...';\r\n        }\r\n      }\r\n    };\r\n\r\n    // 格式化百分比显示\r\n    const percentageFormat = (percentage) => {\r\n      return percentage === 100 ? '完成' : `${percentage}%`;\r\n    };\r\n\r\n    const submitForm = () => {\r\n      wasteForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          loading.value = true;\r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('unitId', props.id);\r\n            formData.append('wasteTypeId', form.wasteTypeId);\r\n            formData.append('location', form.location);\r\n            \r\n            // 组合日期和时间，如果有的话\r\n            if (form.collectionDate && form.collectionTime) {\r\n              formData.append('collectionDate', form.collectionDate);\r\n              formData.append('collectionTime', form.collectionTime);\r\n            }\r\n            formData.append('quantity', form.quantity);\r\n            \r\n            // 添加创建者ID（如果用户已登录）\r\n            if (auth.state.isLoggedIn && auth.state.user) {\r\n              formData.append('creator_id', auth.state.user.id);\r\n              // 添加创建者名称，优先使用username，如果没有则使用phone\r\n              const creatorName = auth.state.user.username || auth.state.user.phone || '未知';\r\n              formData.append('creator_name', creatorName);\r\n              console.log('添加用户信息:', {\r\n                creator_id: auth.state.user.id,\r\n                creator_name: creatorName,\r\n                user: auth.state.user\r\n              });\r\n            } else {\r\n              console.log('用户未登录或用户信息不完整');\r\n            }\r\n            \r\n            console.log('提交表单数据:', {\r\n              unitId: props.id,\r\n              wasteTypeId: form.wasteTypeId,\r\n              location: form.location,\r\n              quantity: form.quantity,\r\n              photo_before: photoFilesBefore.value ? photoFilesBefore.value.length : 0,\r\n              photo_after: photoFilesAfter.value ? photoFilesAfter.value.length : 0\r\n            });\r\n            \r\n            // 添加收集前照片\r\n            if (photoFilesBefore.value && photoFilesBefore.value.length > 0) {\r\n              console.log('添加收集前照片数量:', photoFilesBefore.value.length);\r\n              photoFilesBefore.value.forEach((file, index) => {\r\n                if (file) {\r\n                  console.log(`收集前照片 ${index+1}:`, file.name);\r\n                  formData.append('photo_before', file);\r\n                }\r\n              });\r\n            }\r\n            \r\n            // 添加收集后照片\r\n            if (photoFilesAfter.value && photoFilesAfter.value.length > 0) {\r\n              console.log('添加收集后照片数量:', photoFilesAfter.value.length);\r\n              photoFilesAfter.value.forEach((file, index) => {\r\n                if (file) {\r\n                  console.log(`收集后照片 ${index+1}:`, file.name);\r\n                  formData.append('photo_after', file);\r\n                }\r\n              });\r\n            }\r\n\r\n            // 检查是否有大文件需要显示警告\r\n            const allFiles = [...(photoFilesBefore.value || []), ...(photoFilesAfter.value || [])];\r\n            showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n            \r\n            // 如果有文件要上传，显示进度条\r\n            if (allFiles.length > 0) {\r\n              showUploadProgress.value = true;\r\n              uploadPercentage.value = 0;\r\n              uploadStatus.value = '准备上传...';\r\n            }\r\n\r\n            const response = await httpService.postForm(\r\n              apiConfig.endpoints.wasteRecords, \r\n              formData,\r\n              handleUploadProgress\r\n            );\r\n            \r\n            console.log('提交响应:', response.data);\r\n\r\n            ElMessage.success('废物记录提交成功');\r\n            resetForm();\r\n          } catch (error) {\r\n            console.error('Error submitting form:', error);\r\n            if (error.response) {\r\n              console.error('错误响应数据:', error.response.data);\r\n              console.error('错误状态码:', error.response.status);\r\n            }\r\n            ElMessage.error('提交失败，请稍后再试');\r\n          } finally {\r\n            loading.value = false;\r\n            showUploadProgress.value = false;\r\n          }\r\n        } else {\r\n          ElMessage.warning('请完成必填项');\r\n        }\r\n      });\r\n    };\r\n\r\n    const resetForm = () => {\r\n      if (wasteForm.value) {\r\n        wasteForm.value.resetFields();\r\n      }\r\n      photoFilesBefore.value = [];\r\n      photoFilesAfter.value = [];\r\n      fileListBefore.value = [];\r\n      fileListAfter.value = [];\r\n      form.quantity = undefined;\r\n      form.collectionDate = new Date().toISOString().slice(0, 10); // 重置为今天\r\n      form.collectionTime = '08:00'; // 重置为默认时间\r\n    };\r\n\r\n    const goBack = () => {\r\n      // 只有超级管理员才能返回到单位选择页面\r\n      if (isAdmin.value) {\r\n        router.push('/');\r\n      }\r\n    };\r\n\r\n    const viewRecords = () => {\r\n      router.push({ name: 'RecordsList', params: { unitId: props.id } });\r\n    };\r\n\r\n    const selectAllText = (event) => {\r\n      // 使用setTimeout确保DOM已完全渲染\r\n      setTimeout(() => {\r\n        if (event && event.target) {\r\n          // 找到el-input-number内部的input元素\r\n          const inputEl = event.target.querySelector('input');\r\n          if (inputEl) {\r\n            inputEl.select();\r\n          }\r\n        }\r\n      }, 10);\r\n    };\r\n\r\n    return {\r\n      form,\r\n      rules,\r\n      wasteForm,\r\n      loading,\r\n      unitName,\r\n      wasteTypes,\r\n      isAdmin,\r\n      fileListBefore,\r\n      fileListAfter,\r\n      handlePhotoBeforeChange,\r\n      handlePhotoBeforeRemove,\r\n      handlePhotoAfterChange,\r\n      handlePhotoAfterRemove,\r\n      handleBeforeUpload,\r\n      submitForm,\r\n      resetForm,\r\n      goBack,\r\n      viewRecords,\r\n      selectAllText,\r\n      showUploadProgress,\r\n      uploadPercentage,\r\n      uploadStatus,\r\n      percentageFormat,\r\n      showLargeFileWarning\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.waste-form-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 12px 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.header h1 {\r\n  font-size: 18px;\r\n  margin: 0;\r\n  font-weight: 500;\r\n}\r\n\r\n.back-button, .view-records {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 16px;\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.unit-info {\r\n  text-align: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.unit-info h2 {\r\n  color: #333;\r\n  border-bottom: 2px solid #409EFF;\r\n  display: inline-block;\r\n  padding-bottom: 5px;\r\n  font-size: 18px;\r\n  margin: 0;\r\n}\r\n\r\n.waste-form {\r\n  background-color: #ffffff;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .form-row {\r\n    flex-direction: row;\r\n  }\r\n  \r\n  .date-item, .time-item {\r\n    flex: 1;\r\n  }\r\n  \r\n  .content {\r\n    padding: 24px;\r\n    max-width: 800px;\r\n  }\r\n  \r\n  .header h1 {\r\n    font-size: 22px;\r\n  }\r\n}\r\n\r\n.waste-photo-uploader {\r\n  width: 100%;\r\n}\r\n\r\n.waste-photo-uploader :deep(.el-upload--picture-card) {\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n}\r\n\r\n.waste-photo-uploader :deep(.el-upload-list--picture-card .el-upload-list__item) {\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n\r\n.photo-tip, .time-tip {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.submit-btn, .reset-btn {\r\n  width: 45%;\r\n  height: 44px;\r\n  font-size: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .form-actions {\r\n    justify-content: flex-start;\r\n  }\r\n  \r\n  .submit-btn, .reset-btn {\r\n    width: auto;\r\n  }\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 12px;\r\n  text-align: center;\r\n  color: #666;\r\n  font-size: 12px;\r\n}\r\n\r\n:deep(.el-form-item__label) {\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  padding-bottom: 4px;\r\n}\r\n\r\n:deep(.el-input__inner), \r\n:deep(.el-select__input), \r\n:deep(.el-input-number__decrease), \r\n:deep(.el-input-number__increase) {\r\n  height: 44px;\r\n  font-size: 15px;\r\n}\r\n\r\n:deep(.el-button) {\r\n  font-size: 15px;\r\n  padding: 12px 20px;\r\n}\r\n\r\n:deep(.el-select-dropdown__item) {\r\n  font-size: 15px;\r\n  padding: 12px 20px;\r\n}\r\n\r\n:deep(.el-date-editor.el-input), \r\n:deep(.el-date-editor.el-input__inner) {\r\n  width: 100%;\r\n}\r\n\r\n:deep(.el-form-item) {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n:deep(.date-picker-popup),\r\n:deep(.time-picker-popup) {\r\n  touch-action: none;\r\n}\r\n\r\n:deep(.el-input__wrapper) {\r\n  cursor: pointer;\r\n}\r\n\r\n:deep(.el-input__inner) {\r\n  -webkit-tap-highlight-color: transparent;\r\n  user-select: none;\r\n}\r\n\r\n.upload-warning {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.upload-progress {\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n\r\n.upload-status {\r\n  margin-top: 10px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n","import { render } from \"./WasteForm.vue?vue&type=template&id=53fa8846&scoped=true\"\nimport script from \"./WasteForm.vue?vue&type=script&lang=js\"\nexport * from \"./WasteForm.vue?vue&type=script&lang=js\"\n\nimport \"./WasteForm.vue?vue&type=style&index=0&id=53fa8846&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53fa8846\"]])\n\nexport default __exports__","<template>\n  <div class=\"records-container\">\n    <div class=\"header\">\n      <div class=\"back-button\" @click=\"goBack\">\n        <el-icon><arrow-left /></el-icon> 返回填报\n      </div>\n      <h1>废物记录查看</h1>\n      <div class=\"home-link\" @click=\"goHome\" v-if=\"isAdmin\">\n        首页 <el-icon><home-filled /></el-icon>\n      </div>\n      <div v-else></div>\n    </div>\n\n    <div class=\"content\">\n      <div class=\"unit-info\">\n        <h2>{{ unitName }} - 危险废物记录</h2>\n      </div>\n      \n      <div class=\"actions\">\n        <el-button type=\"primary\" @click=\"addNewRecord\">\n          <el-icon><plus /></el-icon> 新增填报\n        </el-button>\n        <el-button type=\"success\" @click=\"goToUserManagement\" v-if=\"isAdmin || isUnitAdmin\">\n          <el-icon><user /></el-icon> 人员管理\n        </el-button>\n        <el-button @click=\"refreshRecords\">\n          <el-icon><refresh /></el-icon> 刷新\n        </el-button>\n        <el-button type=\"primary\" @click=\"exportRecords\" :loading=\"loading\">\n          <el-icon><download /></el-icon> 导出记录\n        </el-button>\n      </div>\n      \n      <!-- 筛选面板 -->\n      <el-card class=\"filter-card\">\n        <div class=\"filter-header\">\n          <h3>筛选条件</h3>\n          <el-button type=\"primary\" link @click=\"showFilterPanel = !showFilterPanel\">\n            {{ showFilterPanel ? '收起' : '展开' }} \n            <el-icon v-if=\"!showFilterPanel\"><arrow-down /></el-icon>\n            <el-icon v-else><arrow-up /></el-icon>\n          </el-button>\n        </div>\n        \n        <div v-show=\"showFilterPanel\" class=\"filter-form-container\">\n          <el-form :model=\"filterForm\" label-width=\"100px\" class=\"filter-form\">\n            <el-row :gutter=\"20\">\n              <!-- 收集时间范围 -->\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n                <el-form-item label=\"收集时间\">\n                  <el-date-picker\n                    v-model=\"filterForm.dateRange\"\n                    type=\"daterange\"\n                    range-separator=\"至\"\n                    start-placeholder=\"开始日期\"\n                    end-placeholder=\"结束日期\"\n                    format=\"YYYY-MM-DD\"\n                    value-format=\"YYYY-MM-DD\"\n                    style=\"width: 100%\"\n                  />\n                </el-form-item>\n              </el-col>\n              \n              <!-- 废物类型 -->\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n                <el-form-item label=\"废物类型\">\n                  <el-select v-model=\"filterForm.wasteTypeId\" placeholder=\"选择废物类型\" style=\"width: 100%\" clearable>\n                    <el-option \n                      v-for=\"type in wasteTypes\" \n                      :key=\"type.id\" \n                      :label=\"type.name\" \n                      :value=\"type.id\" \n                    />\n                  </el-select>\n                </el-form-item>\n              </el-col>\n            </el-row>\n            \n            <el-row :gutter=\"20\">\n              <!-- 数量范围 -->\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n                <el-form-item label=\"数量范围(吨)\">\n                  <div class=\"quantity-range\">\n                    <el-input-number \n                      v-model=\"filterForm.minQuantity\" \n                      :min=\"0\"\n                      :precision=\"3\"\n                      :step=\"0.001\"\n                      placeholder=\"最小值\"\n                      style=\"width: 48%\"\n                    />\n                    <span class=\"range-separator\">至</span>\n                    <el-input-number \n                      v-model=\"filterForm.maxQuantity\" \n                      :min=\"filterForm.minQuantity || 0\"\n                      :precision=\"3\"\n                      :step=\"0.001\"\n                      placeholder=\"最大值\"\n                      style=\"width: 48%\"\n                    />\n                  </div>\n                </el-form-item>\n              </el-col>\n              \n              <!-- 产生地点 -->\n              <el-col :xs=\"24\" :sm=\"24\" :md=\"12\" :lg=\"12\" :xl=\"12\">\n                <el-form-item label=\"产生地点\">\n                  <el-input \n                    v-model=\"filterForm.location\" \n                    placeholder=\"输入地点关键词搜索\" \n                    clearable\n                  />\n                </el-form-item>\n              </el-col>\n            </el-row>\n            \n            <div class=\"filter-actions\">\n              <el-button type=\"primary\" @click=\"applyFilter\">筛选</el-button>\n              <el-button @click=\"resetFilter\">重置</el-button>\n            </div>\n          </el-form>\n        </div>\n      </el-card>\n      \n      <div class=\"records-wrapper\">\n        <el-card class=\"records-card\">\n          <div class=\"card-header\">\n            <h3>废物记录列表</h3>\n            <div class=\"card-actions\">\n              <el-button type=\"warning\" @click=\"exportRecords\">\n                <el-icon><download /></el-icon> 导出记录\n              </el-button>\n            </div>\n          </div>\n          \n          <el-table \n            :data=\"filteredRecords\" \n            style=\"width: 100%\" \n            border \n            v-loading=\"loading\"\n            stripe\n            class=\"responsive-table\"\n            height=\"500\"\n            @scroll=\"handleScroll\"\n          >\n            <el-table-column prop=\"waste_type_name\" label=\"废物类型\" min-width=\"110\" />\n            <el-table-column prop=\"location\" label=\"产生地点\" min-width=\"120\" />\n            <el-table-column label=\"收集开始时间\" min-width=\"160\">\n              <template #default=\"scope\">\n                {{ parseFormattedDateTime(scope.row.collection_start_time) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"数量(吨)\" min-width=\"100\">\n              <template #default=\"scope\">\n                {{ parseFloat(scope.row.quantity).toFixed(3) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"记录时间\" min-width=\"160\" class=\"mobile-hidden\">\n              <template #default=\"scope\">\n                {{ parseFormattedDateTime(scope.row.created_at) }}\n              </template>\n            </el-table-column>\n            <el-table-column label=\"汇报人\" min-width=\"100\" class=\"mobile-hidden\">\n              <template #default=\"scope\">\n                {{ scope.row.creator_name || '未知' }}\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"现场照片（清理前）\"\n              width=\"120\"\n              align=\"center\"\n            >\n              <template #default=\"scope\">\n                <div v-if=\"scope.row.photo_path_before\" class=\"photo-preview\">\n                  <!-- 多张照片显示 -->\n                  <div \n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_before)\" \n                    :key=\"index\"\n                    class=\"photo-thumbnail-container\"\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_before), index)\"\n                  >\n                    <el-image\n                      style=\"width: 50px; height: 50px\"\n                      :src=\"`${baseUrl}${path}`\"\n                      fit=\"cover\"\n                    ></el-image>\n                  </div>\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_before).length > 1\" class=\"photo-count\">\n                    {{ parsePhotoPath(scope.row.photo_path_before).length }}张\n                  </div>\n                </div>\n                <span v-else>无</span>\n              </template>\n            </el-table-column>\n            <el-table-column\n              label=\"现场照片（清理后）\"\n              width=\"120\"\n              align=\"center\"\n            >\n              <template #default=\"scope\">\n                <div v-if=\"scope.row.photo_path_after\" class=\"photo-preview\">\n                  <!-- 多张照片显示 -->\n                  <div \n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_after)\" \n                    :key=\"index\"\n                    class=\"photo-thumbnail-container\"\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_after), index)\"\n                  >\n                    <el-image\n                      style=\"width: 50px; height: 50px\"\n                      :src=\"`${baseUrl}${path}`\"\n                      fit=\"cover\"\n                    ></el-image>\n                  </div>\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_after).length > 1\" class=\"photo-count\">\n                    {{ parsePhotoPath(scope.row.photo_path_after).length }}张\n                  </div>\n                </div>\n                <span v-else>无</span>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" min-width=\"70\" fixed=\"right\">\n              <template #default=\"scope\">\n                <div class=\"operation-buttons\">\n                  <el-button \n                    type=\"primary\" \n                    size=\"small\" \n                    @click=\"editRecord(scope.row.id)\"\n                    text\n                    v-if=\"canEdit(scope.row)\"\n                  >\n                    编辑\n                  </el-button>\n                  <el-button \n                    type=\"danger\" \n                    size=\"small\" \n                    @click=\"confirmDelete(scope.row)\"\n                    text\n                    v-if=\"canEdit(scope.row)\"\n                  >\n                    删除\n                  </el-button>\n                </div>\n              </template>\n            </el-table-column>\n          </el-table>\n          \n          <div v-if=\"loadingMore\" class=\"loading-more\">\n            <el-icon class=\"loading\"><loading /></el-icon>\n            加载更多...\n          </div>\n          \n          <div class=\"empty-block\" v-if=\"records.length === 0 && !loading\">\n            <el-empty description=\"暂无废物记录\" />\n          </div>\n        </el-card>\n      </div>\n    </div>\n\n    <div class=\"footer\">\n      <p>&copy; 2025 危险废物管理系统</p>\n    </div>\n\n    <!-- 添加独立的图片预览组件 -->\n    <el-image-viewer\n      v-if=\"showViewer\"\n      :url-list=\"previewImages\"\n      :initial-index=\"previewIndex\"\n      @close=\"closeViewer\"\n    />\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted, computed, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { ElMessage, ElMessageBox, ElImageViewer } from 'element-plus';\nimport httpService from '../config/httpService';\nimport apiConfig from '../config/api';\nimport { ArrowLeft, HomeFilled, Refresh, Plus, User, ArrowDown, ArrowUp, Download, Loading } from '@element-plus/icons-vue';\nimport { exportToExcel, prepareImageExportData } from '../utils/exportUtils';\nimport auth from '../store/auth';\n\nexport default {\n  name: 'RecordsList',\n  components: {\n    ArrowLeft,\n    HomeFilled,\n    Refresh,\n    Plus,\n    User,\n    ArrowDown,\n    ArrowUp,\n    Download,\n    ElImageViewer,\n    Loading\n  },\n  props: {\n    unitId: {\n      type: [String, Number],\n      required: true\n    }\n  },\n  setup(props) {\n    const router = useRouter();\n    const records = ref([]);\n    const loading = ref(false);\n    const unitName = ref('');\n    const wasteTypes = ref([]);\n    const showFilterPanel = ref(true);\n    \n    // 添加baseUrl定义\n    const baseUrl = apiConfig.baseURL;\n    \n    // 添加解析照片路径的函数\n    const parsePhotoPath = (path) => {\n      if (!path) return [];\n      \n      try {\n        // 尝试解析为JSON\n        if (path.startsWith('[') && path.endsWith(']')) {\n          return JSON.parse(path);\n        }\n        // 如果不是JSON格式，则将其作为单个路径返回\n        return [path];\n      } catch (error) {\n        console.error('解析照片路径失败:', error);\n        // 如果解析失败，将其作为单个路径返回\n        return [path];\n      }\n    };\n    \n    // 添加分页相关的响应式变量\n    const page = ref(1);\n    const pageSize = ref(20);\n    const hasMore = ref(true);\n    const loadingMore = ref(false);\n    \n    // 筛选表单\n    const filterForm = reactive({\n      dateRange: null,\n      wasteTypeId: null,\n      minQuantity: null,\n      maxQuantity: null,\n      location: ''\n    });\n    \n    // 过滤后的记录\n    const filteredRecords = computed(() => {\n      if (!records.value || !Array.isArray(records.value)) {\n        return [];\n      }\n      \n      return records.value.filter(record => {\n        // 检查废物类型\n        if (filterForm.wasteTypeId && record.waste_type_id !== filterForm.wasteTypeId) {\n          return false;\n        }\n        \n        // 检查数量范围\n        if (filterForm.minQuantity !== null && parseFloat(record.quantity) < filterForm.minQuantity) {\n          return false;\n        }\n        if (filterForm.maxQuantity !== null && parseFloat(record.quantity) > filterForm.maxQuantity) {\n          return false;\n        }\n        \n        // 检查地点关键词\n        if (filterForm.location && !record.location.toLowerCase().includes(filterForm.location.toLowerCase())) {\n          return false;\n        }\n        \n        // 检查日期范围\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\n          const startDate = new Date(filterForm.dateRange[0]);\n          const endDate = new Date(filterForm.dateRange[1]);\n          endDate.setHours(23, 59, 59); // 设置为当天结束时间\n          \n          const recordDate = new Date(record.collection_start_time);\n          if (recordDate < startDate || recordDate > endDate) {\n            return false;\n          }\n        }\n        \n        return true;\n      });\n    });\n    \n    // 判断是否为管理员\n    const isAdmin = computed(() => {\n      return auth.isAdmin();\n    });\n    \n    // 判断是否为单位管理员\n    const isUnitAdmin = computed(() => {\n      return auth.isUnitAdmin();\n    });\n    \n    // 格式化日期时间\n    const parseFormattedDateTime = (dateTimeStr) => {\n      if (!dateTimeStr) return '';\n      const date = new Date(dateTimeStr);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n    };\n    \n    // 刷新记录\n    const refreshRecords = async () => {\n      await fetchRecords();\n      ElMessage.success('记录已刷新');\n    };\n    \n    // 返回填报页面\n    const goBack = () => {\n      // 获取当前用户的单位ID\n      const unitId = auth.getUnitId();\n      if (unitId) {\n        router.push(`/unit/${unitId}`);\n      } else {\n        // 如果没有单位ID，则返回首页\n        router.push('/');\n      }\n    };\n    \n    // 返回首页\n    const goHome = () => {\n      router.push('/');\n    };\n    \n    // 前往人员管理\n    const goToUserManagement = () => {\n      router.push(`/user-management`);\n    };\n    \n    // 添加新记录\n    const addNewRecord = () => {\n      router.push(`/unit/${props.unitId}`);\n    };\n    \n    // 编辑记录\n    const editRecord = (recordId) => {\n      router.push(`/record/${recordId}`);\n    };\n    \n    // 判断是否可以编辑记录\n    const canEdit = (record) => {\n      if (!record) return false;\n      \n      // 超级管理员可以编辑所有记录\n      if (isAdmin.value) return true;\n      \n      // 单位管理员可以编辑本单位的记录\n      const unitId = auth.getUnitId();\n      if (isUnitAdmin.value && unitId && record.unit_id === parseInt(unitId)) return true;\n      \n      // 普通用户只能编辑自己创建的记录\n      const userId = auth.getUserId();\n      return userId && record.creator_id === parseInt(userId);\n    };\n    \n    // 确认删除\n    const confirmDelete = (record) => {\n      ElMessageBox.confirm(\n        `确定要删除这条废物记录吗？此操作不可逆。`,\n        '删除确认',\n        {\n          confirmButtonText: '确定删除',\n          cancelButtonText: '取消',\n          type: 'warning',\n        }\n      )\n        .then(async () => {\n          try {\n            await httpService.delete(`${apiConfig.endpoints.wasteRecords}/${record.id}`);\n            ElMessage.success('记录已成功删除');\n            await fetchRecords(); // 重新加载记录\n          } catch (error) {\n            console.error('删除记录失败:', error);\n            ElMessage.error('删除记录失败，请重试');\n          }\n        })\n        .catch(() => {\n          ElMessage.info('已取消删除');\n        });\n    };\n    \n    // 应用筛选\n    const applyFilter = async () => {\n      try {\n        // 重置分页\n        page.value = 1;\n        \n        // 重新获取记录\n        await fetchRecords();\n        \n        ElMessage.success('筛选条件已应用');\n      } catch (error) {\n        console.error('应用筛选失败:', error);\n        ElMessage.error('应用筛选失败');\n      }\n    };\n    \n    // 重置筛选\n    const resetFilter = async () => {\n      filterForm.dateRange = null;\n      filterForm.wasteTypeId = null;\n      filterForm.minQuantity = null;\n      filterForm.maxQuantity = null;\n      filterForm.location = '';\n      \n      // 重置分页\n      page.value = 1;\n      \n      // 重新获取记录\n      await fetchRecords();\n      \n      ElMessage.success('筛选条件已重置');\n    };\n    \n    // 导出记录\n    const exportRecords = async () => {\n      try {\n        loading.value = true;\n        console.log('开始导出记录...');\n        \n        // 获取要导出的记录\n        const recordsToExport = filteredRecords.value;\n        \n        console.log(`导出记录数量: ${recordsToExport.length}`);\n        \n        if (recordsToExport.length === 0) {\n          ElMessage.warning('没有可导出的记录');\n          loading.value = false;\n          return;\n        }\n        \n        // 检查记录中是否有照片\n        const hasPhotos = recordsToExport.some(record => \n          record.photo_path_before || record.photo_path_after\n        );\n        console.log('记录中是否包含照片:', hasPhotos);\n        \n        // 打印第一条记录的照片路径\n        if (recordsToExport.length > 0) {\n          const firstRecord = recordsToExport[0];\n          console.log('第一条记录照片路径:');\n          console.log('清理前照片:', firstRecord.photo_path_before);\n          console.log('清理后照片:', firstRecord.photo_path_after);\n        }\n        \n        // 设置导出基础URL\n        console.log('baseUrl值:', baseUrl);\n        \n        // 准备导出数据\n        const exportData = recordsToExport.map(record => ({\n          '单位': record.unit_name || '',\n          '废物类型': record.waste_type_name || '',\n          '收集地点': record.location || '',\n          '收集时间': record.collection_start_time ? new Date(record.collection_start_time).toLocaleString() : '',\n          '数量(kg)': record.quantity || 0,\n          '记录时间': record.created_at ? new Date(record.created_at).toLocaleString() : '',\n          '汇报人': record.creator_name || '未知',\n          '清理前照片': '',  // 这里留空，图片会通过imageData添加\n          '清理后照片': ''   // 这里留空，图片会通过imageData添加\n        }));\n        \n        console.log('导出数据准备完成');\n        \n        // 准备图片数据\n        console.log('准备图片数据...');\n        // 使用正确的基础URL，确保能够访问到图片\n        const imageData = await prepareImageExportData(recordsToExport, baseUrl);\n        console.log('图片数据准备完成，数量:', Object.keys(imageData).length);\n        console.log('图片数据内容:', JSON.stringify(imageData));\n        \n        // 导出文件\n        const fileName = `${unitName.value}危险废物记录`;\n        const headers = [\n          { text: '单位', field: '单位' },\n          { text: '废物类型', field: '废物类型' },\n          { text: '收集地点', field: '收集地点' },\n          { text: '收集时间', field: '收集时间' },\n          { text: '数量(kg)', field: '数量(kg)' },\n          { text: '记录时间', field: '记录时间' },\n          { text: '汇报人', field: '汇报人' },\n          { text: '清理前照片', field: '清理前照片' },\n          { text: '清理后照片', field: '清理后照片' }\n        ];\n        \n        console.log('开始导出Excel文件...');\n        try {\n          const result = await exportToExcel(exportData, fileName, headers, imageData);\n          \n          if (result) {\n            console.log('导出成功');\n            ElMessage.success('导出成功');\n          } else {\n            console.log('导出失败，已回退到CSV导出');\n            ElMessage.warning('Excel导出失败，已回退到CSV导出');\n          }\n        } catch (exportError) {\n          console.error('导出Excel时发生错误:', exportError);\n          ElMessage.error('导出Excel失败: ' + exportError.message);\n        }\n      } catch (error) {\n        console.error('导出过程中发生错误:', error);\n        ElMessage.error('导出失败: ' + error.message);\n      } finally {\n        loading.value = false;\n      }\n    };\n    \n    // 图片预览相关\n    const showViewer = ref(false);\n    const previewImages = ref([]);\n    const previewIndex = ref(0);\n    \n    // 预览照片\n    const previewPhoto = (paths, index) => {\n      // 确保paths是数组\n      const photoArray = Array.isArray(paths) ? paths : [paths];\n      previewImages.value = photoArray.map(path => `${baseUrl}${path}`);\n      previewIndex.value = index || 0;\n      showViewer.value = true;\n    };\n    \n    // 关闭预览\n    const closeViewer = () => {\n      showViewer.value = false;\n    };\n\n    onMounted(async () => {\n      await fetchUnitName();\n      await fetchWasteTypes();\n      await fetchRecords();\n    });\n\n    // 获取废物类型列表\n    const fetchWasteTypes = async () => {\n      try {\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\n        wasteTypes.value = response.data;\n      } catch (error) {\n        console.error('Error fetching waste types:', error);\n        ElMessage.error('获取废物类型列表失败');\n      }\n    };\n    \n    const fetchUnitName = async () => {\n      try {\n        const response = await httpService.get(apiConfig.endpoints.units);\n        const unit = response.data.find(u => u.id === parseInt(props.unitId));\n        if (unit) {\n          unitName.value = unit.name;\n        }\n      } catch (error) {\n        console.error('Error fetching unit name:', error);\n        ElMessage.error('获取单位信息失败');\n      }\n    };\n\n    const fetchRecords = async (isLoadMore = false) => {\n      if (!isLoadMore) {\n        loading.value = true;\n        page.value = 1;\n        records.value = [];\n      } else {\n        loadingMore.value = true;\n      }\n      \n      try {\n        // 基本参数\n        const params = {\n          page: page.value,\n          pageSize: pageSize.value\n        };\n        \n        // 添加筛选参数\n        if (filterForm.wasteTypeId) params.wasteTypeId = filterForm.wasteTypeId;\n        if (filterForm.minQuantity !== null) params.minQuantity = filterForm.minQuantity;\n        if (filterForm.maxQuantity !== null) params.maxQuantity = filterForm.maxQuantity;\n        if (filterForm.location) params.location = filterForm.location;\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\n          params.dateRange = JSON.stringify(filterForm.dateRange);\n        }\n        \n        // 获取当前用户ID\n        const userId = auth.getUserId();\n        if (!userId) {\n          throw new Error('用户未登录');\n        }\n        \n        // 使用用户ID获取记录\n        const response = await httpService.get(`${apiConfig.endpoints.wasteRecordsByUser}/${userId}`, { params });\n        \n        // 确保响应数据包含records字段，并且是一个数组\n        if (response.data && Array.isArray(response.data.records)) {\n          if (isLoadMore) {\n            records.value = [...records.value, ...response.data.records];\n          } else {\n            records.value = response.data.records;\n          }\n          \n          hasMore.value = !!response.data.hasMore;\n        } else {\n          console.error('Invalid response format:', response.data);\n          records.value = [];\n          hasMore.value = false;\n          ElMessage.error('获取废物记录失败：数据格式错误');\n        }\n      } catch (error) {\n        console.error('Error fetching records:', error);\n        records.value = [];\n        hasMore.value = false;\n        ElMessage.error('获取废物记录失败');\n      } finally {\n        loading.value = false;\n        loadingMore.value = false;\n      }\n    };\n    \n    // 处理滚动加载更多\n    const handleScroll = async (e) => {\n      // 修复解构赋值问题，确保e.target存在且包含所需属性\n      if (!e || !e.target) return;\n      \n      const scrollHeight = e.target.scrollHeight || 0;\n      const scrollTop = e.target.scrollTop || 0;\n      const clientHeight = e.target.clientHeight || 0;\n      \n      // 当滚动到底部时加载更多\n      if (scrollHeight - scrollTop - clientHeight < 50 && hasMore.value && !loadingMore.value) {\n        page.value++;\n        await fetchRecords(true);\n      }\n    };\n\n    return {\n      records,\n      filteredRecords,\n      loading,\n      unitName,\n      wasteTypes,\n      isAdmin,\n      isUnitAdmin,\n      parseFormattedDateTime,\n      refreshRecords,\n      goBack,\n      goHome,\n      goToUserManagement,\n      addNewRecord,\n      editRecord,\n      canEdit,\n      confirmDelete,\n      apiConfig,\n      // 筛选相关\n      showFilterPanel,\n      filterForm,\n      applyFilter,\n      resetFilter,\n      // 导出相关\n      exportRecords,\n      // 图片预览相关\n      showViewer,\n      previewImages,\n      previewIndex,\n      previewPhoto,\n      closeViewer,\n      handleScroll,\n      // 照片路径解析\n      parsePhotoPath,\n      baseUrl,\n      // 分页相关\n      page,\n      pageSize,\n      hasMore,\n      loadingMore\n    };\n  }\n};\n</script>\n\n<style scoped>\n.records-container {\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n}\n\n.header {\n  background-color: #409EFF;\n  color: white;\n  padding: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.back-button, .home-link {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 16px;\n}\n\n.content {\n  flex: 1;\n  padding: 30px;\n  max-width: 1200px;\n  margin: 0 auto;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.unit-info {\n  margin-bottom: 20px;\n  text-align: center;\n}\n\n.unit-info h2 {\n  color: #333;\n  margin: 0;\n}\n\n.actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-bottom: 20px;\n  gap: 10px;\n}\n\n.filter-card {\n  margin-bottom: 20px;\n}\n\n.filter-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n}\n\n.filter-header h3 {\n  margin: 0;\n  color: #333;\n}\n\n.filter-form-container {\n  transition: all 0.3s ease;\n}\n\n.filter-form {\n  margin-top: 15px;\n}\n\n.quantity-range {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.range-separator {\n  margin: 0 5px;\n}\n\n.filter-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 20px;\n  gap: 10px;\n}\n\n.records-card {\n  margin-bottom: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.card-header h3 {\n  margin: 0;\n  color: #333;\n}\n\n.card-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.record-image {\n  width: 80px;\n  height: 80px;\n  border-radius: 4px;\n  object-fit: cover;\n}\n\n.photo-thumbnail-container {\n  cursor: pointer;\n  margin-bottom: 2px;\n}\n\n.photo-count {\n  font-size: 12px;\n  color: #909399;\n  text-align: center;\n  margin-top: 2px;\n}\n\n.photo-preview {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.image-error {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 80px;\n  height: 80px;\n  background-color: #f5f7fa;\n  color: #909399;\n  font-size: 20px;\n}\n\n.operation-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n\n.operation-buttons .el-button {\n  width: 80%;\n  margin-left: 0;\n  margin-right: 0;\n  text-align: center;\n  justify-content: center;\n}\n\n.footer {\n  background-color: #f5f7fa;\n  padding: 15px;\n  text-align: center;\n  color: #606266;\n}\n\n.loading-more {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 10px;\n  color: #909399;\n}\n\n.loading {\n  animation: rotating 2s linear infinite;\n  margin-right: 5px;\n}\n\n@keyframes rotating {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.empty-block {\n  padding: 30px;\n  text-align: center;\n}\n\n/* 响应式调整 */\n@media (max-width: 768px) {\n  .header {\n    flex-direction: column;\n    gap: 10px;\n    text-align: center;\n  }\n  \n  .content {\n    padding: 15px;\n  }\n  \n  .card-header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 10px;\n  }\n  \n  .card-actions {\n    width: 100%;\n    justify-content: space-between;\n  }\n  \n  .mobile-hidden {\n    display: none;\n  }\n  \n  .operation-buttons {\n    flex-direction: column;\n    justify-content: center;\n  }\n  \n  .action-buttons {\n    flex-direction: column;\n    justify-content: space-between;\n  }\n  \n  .action-buttons .el-button {\n    flex: 1;\n    justify-content: center;\n  }\n  \n  .filter-header {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 10px;\n  }\n  \n  .header-left {\n    width: 100%;\n  }\n  \n  .action-buttons {\n    width: 100%;\n    justify-content: space-between;\n  }\n  \n  .action-buttons .el-button {\n    flex: 1;\n    justify-content: center;\n  }\n}\n</style> ","// 用于导出数据到CSV和Excel的工具函数\nimport * as XLSX from 'xlsx';\nimport ExcelJS from 'exceljs';\n// import { saveAs } from 'file-saver';\n\n// 检查XLSX库是否正确加载\nconsole.log('XLSX库版本:', XLSX.version);\nconsole.log('XLSX库可用方法:', Object.keys(XLSX).join(', '));\n\n/**\n * 将数据导出为Excel文件（使用ExcelJS，支持图片）\n * @param {Array} data - 要导出的数据数组\n * @param {String} fileName - 导出的文件名（不含后缀）\n * @param {Array} headers - 要导出的列标题和对应字段名\n * @param {Object} imageData - 图片数据对象（可选）\n */\nexport const exportToExcel = async (data, fileName, headers, imageData = null) => {\n  if (!data || data.length === 0) {\n    console.error('导出失败：没有数据');\n    return false;\n  }\n\n  // 处理文件名\n  fileName = fileName.replace(/[\\\\/:*?\"<>|]/g, '_');\n  const timestamp = new Date().toISOString().replace(/[-:.]/g, '').substring(0, 14);\n  \n  console.log('导出函数被调用，数据条数:', data.length);\n  console.log('是否有图片数据:', imageData ? '是' : '否');\n  if (imageData) {\n    console.log('图片数据条数:', Object.keys(imageData).length);\n    console.log('图片数据内容示例:', JSON.stringify(Object.keys(imageData).slice(0, 2).reduce((obj, key) => {\n      obj[key] = imageData[key];\n      return obj;\n    }, {})));\n  }\n  \n  try {\n    console.log('使用ExcelJS导出Excel...');\n    \n    // 创建新的工作簿\n    const workbook = new ExcelJS.Workbook();\n    workbook.creator = '危险废物管理系统';\n    workbook.lastModifiedBy = '危险废物管理系统';\n    workbook.created = new Date();\n    workbook.modified = new Date();\n    \n    // 添加工作表\n    const worksheet = workbook.addWorksheet('危险废物记录');\n    \n    // 设置列\n    const columns = headers.map(header => ({\n      header: header.text,\n      key: header.field,\n      width: 15\n    }));\n    worksheet.columns = columns;\n    \n    // 添加数据行\n    data.forEach((record, rowIndex) => {\n      const row = {};\n      headers.forEach(header => {\n        row[header.field] = record[header.field] || '';\n      });\n      worksheet.addRow(row);\n      \n      // 处理图片\n      if (imageData && imageData[rowIndex]) {\n        console.log(`处理第${rowIndex+1}行的图片数据:`, JSON.stringify(Object.keys(imageData[rowIndex])));\n        \n        // 处理清理前照片\n        if (imageData[rowIndex][7] && imageData[rowIndex][7].base64) {\n          try {\n            // 从base64添加图片\n            const beforePhotoBase64 = imageData[rowIndex][7].base64;\n            // 确保base64字符串格式正确\n            const base64Data = beforePhotoBase64.startsWith('data:') \n              ? beforePhotoBase64 \n              : `data:image/jpeg;base64,${beforePhotoBase64}`;\n              \n            const beforePhotoId = workbook.addImage({\n              base64: base64Data,\n              extension: 'jpeg',\n            });\n            \n            // 计算图片位置（清理前照片列）\n            const beforePhotoColIndex = 7; // 直接使用索引，因为我们知道清理前照片在第8列（索引为7）\n            \n            // 添加图片到单元格，设置宽高\n            worksheet.addImage(beforePhotoId, {\n              tl: { col: beforePhotoColIndex, row: rowIndex + 1 },\n              ext: { width: 80, height: 80 }\n            });\n            \n            // 调整行高以适应图片\n            worksheet.getRow(rowIndex + 2).height = 60;\n            console.log(`成功添加第${rowIndex+1}行的清理前照片`);\n          } catch (imgError) {\n            console.error(`添加清理前照片失败，行 ${rowIndex + 1}:`, imgError);\n          }\n        }\n        \n        // 处理清理后照片\n        if (imageData[rowIndex][8] && imageData[rowIndex][8].base64) {\n          try {\n            // 从base64添加图片\n            const afterPhotoBase64 = imageData[rowIndex][8].base64;\n            // 确保base64字符串格式正确\n            const base64Data = afterPhotoBase64.startsWith('data:') \n              ? afterPhotoBase64 \n              : `data:image/jpeg;base64,${afterPhotoBase64}`;\n              \n            const afterPhotoId = workbook.addImage({\n              base64: base64Data,\n              extension: 'jpeg',\n            });\n            \n            // 计算图片位置（清理后照片列）\n            const afterPhotoColIndex = 8; // 直接使用索引，因为我们知道清理后照片在第9列（索引为8）\n            \n            // 添加图片到单元格，设置宽高\n            worksheet.addImage(afterPhotoId, {\n              tl: { col: afterPhotoColIndex, row: rowIndex + 1 },\n              ext: { width: 80, height: 80 }\n            });\n            \n            // 调整行高以适应图片\n            worksheet.getRow(rowIndex + 2).height = 60;\n            console.log(`成功添加第${rowIndex+1}行的清理后照片`);\n          } catch (imgError) {\n            console.error(`添加清理后照片失败，行 ${rowIndex + 1}:`, imgError);\n          }\n        }\n      }\n    });\n    \n    // 设置表头样式\n    worksheet.getRow(1).font = { bold: true };\n    worksheet.getRow(1).alignment = { vertical: 'middle', horizontal: 'center' };\n    \n    // 导出Excel文件\n    const excelFileName = `${fileName}_${timestamp}.xlsx`;\n    console.log('准备导出Excel文件:', excelFileName);\n    \n    // 生成buffer\n    const buffer = await workbook.xlsx.writeBuffer();\n    \n    // 创建Blob对象\n    const blob = new Blob([buffer], { \n      type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' \n    });\n    \n    // 创建下载链接\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = excelFileName;\n    \n    // 触发下载\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    URL.revokeObjectURL(url);\n    \n    console.log('Excel导出成功');\n    return true;\n  } catch (error) {\n    console.error('导出Excel失败，错误详情:', error);\n    console.log('回退到CSV导出');\n    // 如果Excel导出失败，回退到CSV导出\n    exportToCSV(data, fileName, headers);\n    return false;\n  }\n};\n\n/**\n * 导出为CSV文件\n * @param {Array} data - 数据数组\n * @param {String} fileName - 文件名\n * @param {Array} headers - 表头配置\n */\nexport const exportToCSV = (data, fileName, headers) => {\n  // 处理文件名\n  const timestamp = new Date().toISOString().replace(/[-:.]/g, '').substring(0, 14);\n  const csvFileName = `${fileName}_${timestamp}.csv`;\n  \n  // 准备CSV内容\n  let csvContent = '\\uFEFF'; // 添加BOM以支持中文\n  \n  // 添加表头\n  const headerRow = headers.map(h => `\"${h.text}\"`).join(',');\n  csvContent += headerRow + '\\r\\n';\n  \n  // 添加数据行\n  data.forEach(item => {\n    const row = headers.map(header => {\n      const value = item[header.field];\n      \n      // 处理null和undefined\n      if (value === null || value === undefined) {\n        return '';\n      }\n      \n      // 处理数字\n      if (header.type === 'number' || typeof value === 'number') {\n        return value;\n      }\n      \n      // 处理字符串，特别是包含逗号、引号或换行符的字符串\n      let cellValue = String(value);\n      if (cellValue.includes(',') || cellValue.includes('\"') || cellValue.includes('\\n')) {\n        cellValue = cellValue.replace(/\"/g, '\"\"'); // 将引号替换为两个引号\n        cellValue = `\"${cellValue}\"`; // 用引号包裹整个值\n      }\n      \n      return cellValue;\n    }).join(',');\n    \n    csvContent += row + '\\r\\n';\n  });\n  \n  // 创建下载链接\n  const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.setAttribute('href', url);\n  link.setAttribute('download', csvFileName);\n  link.style.visibility = 'hidden';\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n  \n  console.log('CSV导出成功');\n};\n\n/**\n * 将图片URL转换为Base64格式\n * @param {string} url 图片URL\n * @returns {Promise<string>} Base64格式的图片数据\n */\nexport const imageUrlToBase64 = async (url) => {\n  console.log('开始转换图片到Base64:', url);\n  \n  // 确保URL有效\n  if (!url || typeof url !== 'string') {\n    console.error('无效的图片URL:', url);\n    return null;\n  }\n  \n  // 添加随机参数以避免缓存问题\n  const urlWithCache = url.includes('?') \n    ? `${url}&_t=${new Date().getTime()}` \n    : `${url}?_t=${new Date().getTime()}`;\n  \n  // 尝试方法1：使用fetch API\n  try {\n    console.log('尝试使用fetch API获取图片...');\n    const response = await fetch(urlWithCache, { \n      mode: 'cors',\n      cache: 'no-cache',\n      credentials: 'same-origin',\n      headers: {\n        'Cache-Control': 'no-cache',\n        'Pragma': 'no-cache'\n      }\n    });\n    \n    if (!response.ok) {\n      throw new Error(`HTTP错误: ${response.status}`);\n    }\n    \n    const blob = await response.blob();\n    console.log('图片获取成功，大小:', blob.size, '字节, 类型:', blob.type);\n    \n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const result = reader.result;\n        console.log('图片转换为Base64成功，长度:', result.length);\n        // 确保返回的是base64字符串部分，去掉前缀\n        const base64Data = result.split(',')[1];\n        resolve(base64Data);\n      };\n      reader.onerror = (e) => {\n        console.error('FileReader错误:', e);\n        reject(e);\n      };\n      reader.readAsDataURL(blob);\n    });\n  } catch (error) {\n    console.warn('使用fetch API获取图片失败:', error);\n    \n    // 尝试方法2：使用Image对象\n    try {\n      console.log('尝试使用Image对象获取图片...');\n      const img = new Image();\n      img.crossOrigin = 'Anonymous'; // 允许跨域\n      \n      // 等待图片加载\n      await new Promise((resolve, reject) => {\n        img.onload = resolve;\n        img.onerror = (e) => {\n          console.error('图片加载错误:', e);\n          reject(e);\n        };\n        img.src = urlWithCache;\n      });\n      \n      console.log('图片加载成功，尺寸:', img.width, 'x', img.height);\n      \n      // 创建canvas并绘制图片\n      const canvas = document.createElement('canvas');\n      canvas.width = img.width;\n      canvas.height = img.height;\n      const ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0);\n      \n      // 转换为base64\n      const base64 = canvas.toDataURL('image/jpeg');\n      console.log('图片转换为Base64成功，长度:', base64.length);\n      // 确保返回的是base64字符串部分，去掉前缀\n      const base64Data = base64.split(',')[1];\n      return base64Data;\n    } catch (error2) {\n      console.error('使用Image对象获取图片也失败:', error2);\n      return null;\n    }\n  }\n};\n\n/**\n * 准备带图片的导出数据\n * @param {Array} records 记录数据\n * @param {string} baseUrl 基础URL\n * @returns {Promise<Object>} 包含导出数据和图片数据的对象\n */\nexport const prepareImageExportData = async (records, baseUrl) => {\n  console.log('准备图片导出数据，记录数:', records.length);\n  console.log('使用的基础URL:', baseUrl);\n  \n  // 调试：打印第一条记录的所有字段\n  if (records.length > 0) {\n    console.log('第一条记录的所有字段:');\n    const firstRecord = records[0];\n    Object.keys(firstRecord).forEach(key => {\n      console.log(`${key}: ${typeof firstRecord[key] === 'object' ? JSON.stringify(firstRecord[key]) : firstRecord[key]}`);\n    });\n  }\n  \n  const imageData = {};\n  let processedCount = 0;\n  let successCount = 0;\n  \n  // 解析照片路径的函数\n  const parsePhotoPath = (path) => {\n    if (!path) return [];\n    \n    try {\n      // 尝试解析为JSON\n      if (path.startsWith('[') && path.endsWith(']')) {\n        return JSON.parse(path);\n      }\n      // 如果不是JSON格式，则将其作为单个路径返回\n      return [path];\n    } catch (error) {\n      console.error('解析照片路径失败:', error);\n      // 如果解析失败，将其作为单个路径返回\n      return [path];\n    }\n  };\n  \n  for (let i = 0; i < records.length; i++) {\n    const record = records[i];\n    console.log(`处理记录 ${i+1}/${records.length}, ID: ${record.id}`);\n    \n    // 初始化该记录的图片数据\n    imageData[i] = {};\n    \n    // 处理清理前照片\n    if (record.photo_path_before) {\n      const beforePhotoPaths = parsePhotoPath(record.photo_path_before);\n      console.log(`记录 ${i+1} 清理前照片路径:`, beforePhotoPaths);\n      \n      if (beforePhotoPaths.length > 0) {\n        const beforePhotoUrl = `${baseUrl}${beforePhotoPaths[0]}`;\n        console.log(`记录 ${i+1} 清理前照片URL:`, beforePhotoUrl);\n        \n        try {\n          const beforePhotoBase64 = await imageUrlToBase64(beforePhotoUrl);\n          if (beforePhotoBase64) {\n            imageData[i][7] = {\n              url: beforePhotoUrl,\n              base64: beforePhotoBase64\n            };\n            console.log(`记录 ${i+1} 清理前照片转换成功`);\n            successCount++;\n          } else {\n            console.warn(`记录 ${i+1} 清理前照片转换失败`);\n            // 仍然保留URL\n            imageData[i][7] = {\n              url: beforePhotoUrl\n            };\n          }\n        } catch (error) {\n          console.error(`记录 ${i+1} 清理前照片处理错误:`, error);\n          // 仍然保留URL\n          imageData[i][7] = {\n            url: beforePhotoUrl\n          };\n        }\n      }\n    } else {\n      console.log(`记录 ${i+1} 没有清理前照片`);\n    }\n    \n    // 处理清理后照片\n    if (record.photo_path_after) {\n      const afterPhotoPaths = parsePhotoPath(record.photo_path_after);\n      console.log(`记录 ${i+1} 清理后照片路径:`, afterPhotoPaths);\n      \n      if (afterPhotoPaths.length > 0) {\n        const afterPhotoUrl = `${baseUrl}${afterPhotoPaths[0]}`;\n        console.log(`记录 ${i+1} 清理后照片URL:`, afterPhotoUrl);\n        \n        try {\n          const afterPhotoBase64 = await imageUrlToBase64(afterPhotoUrl);\n          if (afterPhotoBase64) {\n            imageData[i][8] = {\n              url: afterPhotoUrl,\n              base64: afterPhotoBase64\n            };\n            console.log(`记录 ${i+1} 清理后照片转换成功`);\n            successCount++;\n          } else {\n            console.warn(`记录 ${i+1} 清理后照片转换失败`);\n            // 仍然保留URL\n            imageData[i][8] = {\n              url: afterPhotoUrl\n            };\n          }\n        } catch (error) {\n          console.error(`记录 ${i+1} 清理后照片处理错误:`, error);\n          // 仍然保留URL\n          imageData[i][8] = {\n            url: afterPhotoUrl\n          };\n        }\n      }\n    } else {\n      console.log(`记录 ${i+1} 没有清理后照片`);\n    }\n    \n    // 添加单位名称\n    if (record.unit_name) {\n      imageData[i].unit_name = record.unit_name;\n    }\n    \n    processedCount++;\n  }\n  \n  console.log(`图片数据准备完成，处理记录: ${processedCount}/${records.length}, 成功转换图片: ${successCount}`);\n  return imageData;\n};\n","import { render } from \"./RecordsList.vue?vue&type=template&id=7b86bf8e&scoped=true\"\nimport script from \"./RecordsList.vue?vue&type=script&lang=js\"\nexport * from \"./RecordsList.vue?vue&type=script&lang=js\"\n\nimport \"./RecordsList.vue?vue&type=style&index=0&id=7b86bf8e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7b86bf8e\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"login-card\">\r\n      <div class=\"login-header\">\r\n        <h1>危险废物管理系统</h1>\r\n        <h2>用户登录</h2>\r\n      </div>\r\n      \r\n      <el-form \r\n        ref=\"loginForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-width=\"80px\"\r\n        class=\"login-form\"\r\n        @submit.prevent=\"submitForm\"\r\n      >\r\n        <el-form-item label=\"手机号\" prop=\"phone\">\r\n          <el-input \r\n            v-model=\"form.phone\" \r\n            placeholder=\"请输入手机号\" \r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input \r\n            v-model=\"form.password\" \r\n            type=\"password\" \r\n            placeholder=\"请输入密码\" \r\n            show-password\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-radio-group v-model=\"form.userType\" @change=\"handleUserTypeChange\">\r\n            <el-radio :label=\"1\">员工</el-radio>\r\n            <el-radio :label=\"2\">单位管理员</el-radio>\r\n            <el-radio :label=\"3\">超级管理员</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-checkbox v-model=\"form.rememberMe\">记住登录</el-checkbox>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button \r\n            type=\"primary\" \r\n            native-type=\"submit\"\r\n            @click=\"submitForm\" \r\n            :loading=\"auth.state.loading\"\r\n            style=\"width: 100%\"\r\n          >\r\n            登录\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <div v-if=\"auth.state.error\" class=\"login-error\">\r\n        {{ auth.state.error }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, ref, computed, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport auth from '../store/auth';\r\n\r\n/* eslint-disable vue/multi-word-component-names */\r\nexport default {\r\n  name: 'LoginView',\r\n  setup() {\r\n    const router = useRouter();\r\n    const loginForm = ref(null);\r\n    \r\n    const form = reactive({\r\n      phone: '',\r\n      password: '',\r\n      userType: 1, // 默认为员工\r\n      rememberMe: false // 添加记住登录选项\r\n    });\r\n    \r\n    // 所有用户类型都需要密码\r\n    const showPassword = computed(() => true);\r\n    \r\n    // 根据用户类型动态设置验证规则\r\n    const rules = computed(() => {\r\n      const phoneRules = [\r\n        { required: true, message: '请输入手机号', trigger: 'submit' },\r\n        { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号格式', trigger: 'submit' }\r\n      ];\r\n      \r\n      const passwordRules = [\r\n        { required: true, message: '请输入密码', trigger: 'submit' }\r\n      ];\r\n      \r\n      return {\r\n        phone: phoneRules,\r\n        password: passwordRules\r\n      };\r\n    });\r\n    \r\n    // 切换用户类型时重置表单\r\n    const handleUserTypeChange = () => {\r\n      if (loginForm.value) {\r\n        loginForm.value.clearValidate();\r\n      }\r\n    };\r\n    \r\n    // 提交表单\r\n    const submitForm = async () => {\r\n      console.log('提交表单被触发');\r\n      if (!loginForm.value) {\r\n        console.log('表单引用不存在');\r\n        return;\r\n      }\r\n      \r\n      // 防止重复提交\r\n      if (auth.state.loading) {\r\n        console.log('登录正在进行中，跳过');\r\n        return;\r\n      }\r\n      \r\n      // 所有用户类型都需要验证整个表单\r\n      console.log('登录模式');\r\n      loginForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          console.log('表单验证通过');\r\n          await doLogin();\r\n        } else {\r\n          console.log('表单验证失败');\r\n        }\r\n      });\r\n    };\r\n    \r\n    // 执行登录\r\n    const doLogin = async () => {\r\n      console.log('开始登录，账号:', form.phone, '用户类型:', form.userType);\r\n      try {\r\n        // 添加调试信息\r\n        console.log('开始处理登录操作...');\r\n        \r\n        // 所有用户类型都需要密码\r\n        const result = await auth.login(\r\n          form.phone,\r\n          form.password,\r\n          form.rememberMe,\r\n          form.userType\r\n        );\r\n        \r\n        console.log('登录响应:', result);\r\n        \r\n        if (result.success) {\r\n          const user = result.user;\r\n          \r\n          ElMessage.success(`欢迎，${user.username || user.phone}`);\r\n          \r\n          // 根据用户角色跳转到不同页面\r\n          if (user.role_id === 3) {\r\n            // 超级管理员\r\n            router.push('/admin-records');\r\n          } else if (user.role_id === 2) {\r\n            // 单位管理员直接进入记录页面\r\n            router.push(`/records/${user.unit_id}`);\r\n          } else {\r\n            // 普通员工进入填报页面\r\n            router.push(`/unit/${user.unit_id}`);\r\n          }\r\n        } else {\r\n          // 显示登录失败错误\r\n          ElMessage.error(result.error || '登录失败');\r\n        }\r\n      } catch (error) {\r\n        // 捕获并显示非预期错误\r\n        ElMessage.error(error.response?.data?.error || '登录失败，请检查网络连接');\r\n      }\r\n    };\r\n    \r\n    // 如果已登录，自动跳转\r\n    onMounted(() => {\r\n      if (auth.state.isLoggedIn) {\r\n        const user = auth.state.user;\r\n        if (user.role_id === 3) {\r\n          router.push('/admin-records');\r\n        } else if (user.role_id === 2) {\r\n          router.push(`/records/${user.unit_id}`);\r\n        } else {\r\n          router.push(`/unit/${user.unit_id}`);\r\n        }\r\n      }\r\n    });\r\n    \r\n    return {\r\n      form,\r\n      rules,\r\n      loginForm,\r\n      showPassword,\r\n      handleUserTypeChange,\r\n      submitForm,\r\n      auth\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.login-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: 100vh;\r\n  background-color: #f0f2f5;\r\n  padding: 15px;\r\n}\r\n\r\n.login-card {\r\n  width: 400px;\r\n  padding: 30px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.login-header {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.login-header h1 {\r\n  font-size: 24px;\r\n  color: #409EFF;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.login-header h2 {\r\n  font-size: 18px;\r\n  color: #555;\r\n  font-weight: normal;\r\n}\r\n\r\n.login-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.login-error {\r\n  color: #f56c6c;\r\n  text-align: center;\r\n  margin-top: 15px;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 移动端适配 */\r\n@media screen and (max-width: 480px) {\r\n  .login-card {\r\n    width: 100%;\r\n    padding: 20px;\r\n    box-shadow: none;\r\n  }\r\n  \r\n  .login-header h1 {\r\n    font-size: 20px;\r\n  }\r\n  \r\n  .login-header h2 {\r\n    font-size: 16px;\r\n  }\r\n  \r\n  .el-form-item {\r\n    margin-bottom: 15px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./Login.vue?vue&type=template&id=735f8166&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=735f8166&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-735f8166\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"edit-record-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <h1>{{ isNew ? '新增废物记录' : '编辑废物记录' }}</h1>\r\n      <div></div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"form-header\">\r\n        <h2>{{ unitName }}</h2>\r\n      </div>\r\n\r\n      <el-form \r\n        ref=\"recordForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-width=\"120px\"\r\n        class=\"record-form\"\r\n        v-loading=\"loading\"\r\n      >\r\n        <!-- 如果是超级管理员且是新增记录，显示单位选择 -->\r\n        <el-form-item label=\"单位\" prop=\"unitId\" v-if=\"isSuperAdmin && isNew\">\r\n          <el-select v-model=\"form.unitId\" placeholder=\"请选择单位\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"unit in units\" \r\n              :key=\"unit.id\" \r\n              :label=\"unit.name\" \r\n              :value=\"unit.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"废物类型\" prop=\"wasteTypeId\">\r\n          <el-select v-model=\"form.wasteTypeId\" placeholder=\"请选择废物类型\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"type in wasteTypes\" \r\n              :key=\"type.id\" \r\n              :label=\"type.name\" \r\n              :value=\"type.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"产生地点\" prop=\"location\">\r\n          <el-input v-model=\"form.location\" placeholder=\"请输入废物产生地点\" />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"收集日期\">\r\n          <el-date-picker\r\n            v-model=\"form.collectionDate\"\r\n            type=\"date\"\r\n            placeholder=\"选择日期\"\r\n            format=\"YYYY-MM-DD\"\r\n            value-format=\"YYYY-MM-DD\"\r\n            style=\"width: 100%\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"收集时间\">\r\n          <el-time-picker\r\n            v-model=\"form.collectionTime\"\r\n            format=\"HH:mm\"\r\n            placeholder=\"选择时间\"\r\n            value-format=\"HH:mm\"\r\n            style=\"width: 100%\"\r\n          >\r\n            <template #prefix>\r\n              <el-icon><clock /></el-icon>\r\n            </template>\r\n          </el-time-picker>\r\n          <!-- <div class=\"time-tip\">只需选择小时和分钟</div> -->\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"收集数量(吨)\" prop=\"quantity\">\r\n          <el-input-number \r\n            v-model=\"form.quantity\" \r\n            :min=\"0\" \r\n            :precision=\"3\" \r\n            :step=\"0.001\" \r\n            style=\"width: 100%\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集前）\" prop=\"photo_path_before\">\r\n          <div class=\"photo-tip\">请上传废物收集前的现场照片（最多5张）</div>\r\n          <div class=\"upload-warning\" v-if=\"showLargeFileWarning\">\r\n            <el-alert\r\n              title=\"上传大文件可能会导致处理时间较长，请耐心等待\"\r\n              type=\"warning\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n          </div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoBeforeChange\"\r\n            :on-remove=\"handlePhotoBeforeRemove\"\r\n            :file-list=\"fileListBefore\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集后）\" prop=\"photo_path_after\">\r\n          <div class=\"photo-tip\">请上传废物收集后的现场照片（最多5张）</div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoAfterChange\"\r\n            :on-remove=\"handlePhotoAfterRemove\"\r\n            :file-list=\"fileListAfter\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :on-preview=\"handlePictureCardPreview\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n          \r\n          <!-- 添加独立的图片预览组件 -->\r\n          <el-image-viewer\r\n            v-if=\"showViewer\"\r\n            :url-list=\"previewImages\"\r\n            :initial-index=\"previewIndex\"\r\n            @close=\"closeViewer\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"loading\">保存</el-button>\r\n          <el-button @click=\"goBack\">取消</el-button>\r\n        </el-form-item>\r\n        \r\n        <!-- 调试信息 -->\r\n        <el-collapse v-if=\"!isNew\">\r\n          <el-collapse-item title=\"调试信息\">\r\n            <div>\r\n              <h4>收集前照片路径:</h4>\r\n              <div v-for=\"(file, index) in fileListBefore\" :key=\"'before-'+index\">\r\n                <div>名称: {{ file.name }}</div>\r\n                <div>URL: {{ file.url }}</div>\r\n                <div>\r\n                  <img :src=\"file.url\" style=\"max-width: 200px; max-height: 200px;\" />\r\n                </div>\r\n                <hr />\r\n              </div>\r\n              \r\n              <h4>收集后照片路径:</h4>\r\n              <div v-for=\"(file, index) in fileListAfter\" :key=\"'after-'+index\">\r\n                <div>名称: {{ file.name }}</div>\r\n                <div>URL: {{ file.url }}</div>\r\n                <div>\r\n                  <img :src=\"file.url\" style=\"max-width: 200px; max-height: 200px;\" />\r\n                </div>\r\n                <hr />\r\n              </div>\r\n            </div>\r\n          </el-collapse-item>\r\n        </el-collapse>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 上传进度条对话框 -->\r\n    <el-dialog\r\n      v-model=\"showUploadProgress\"\r\n      title=\"正在上传文件\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <div class=\"upload-progress\">\r\n        <p>正在上传文件，请勿关闭页面...</p>\r\n        <el-progress \r\n          :percentage=\"uploadPercentage\" \r\n          :format=\"percentageFormat\"\r\n          :status=\"uploadPercentage === 100 ? 'success' : ''\"\r\n        ></el-progress>\r\n        <p class=\"upload-status\">{{ uploadStatus }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport { useRouter, useRoute } from 'vue-router';\r\nimport { ElMessage, ElImageViewer } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Plus, Clock } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'EditRecordView',\r\n  components: {\r\n    ArrowLeft,\r\n    Plus,\r\n    Clock,\r\n    ElImageViewer\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n    const recordForm = ref(null);\r\n    const loading = ref(false);\r\n    const submitting = ref(false);\r\n    const unitName = ref('');\r\n    const wasteTypes = ref([]);\r\n    const units = ref([]);\r\n    const fileListBefore = ref([]);\r\n    const fileListAfter = ref([]);\r\n    const previewImages = ref([]);\r\n    const showViewer = ref(false);\r\n    const previewIndex = ref(0);\r\n    const createdAt = ref('');\r\n    const showUploadProgress = ref(false);\r\n    const uploadPercentage = ref(0);\r\n    const uploadStatus = ref('准备上传...');\r\n    const showLargeFileWarning = ref(false);\r\n    \r\n    // 添加解析照片路径的函数\r\n    const parsePhotoPath = (path) => {\r\n      if (!path) return [];\r\n      \r\n      console.log('解析照片路径，原始值:', path, '类型:', typeof path);\r\n      \r\n      try {\r\n        // 如果已经是数组，直接返回\r\n        if (Array.isArray(path)) {\r\n          console.log('照片路径已经是数组:', path);\r\n          return path;\r\n        }\r\n        \r\n        // 尝试解析为JSON\r\n        if (typeof path === 'string') {\r\n          // 检查是否是JSON数组格式\r\n          if (path.startsWith('[') && path.endsWith(']')) {\r\n            const parsed = JSON.parse(path);\r\n            console.log('照片路径解析为JSON数组:', parsed);\r\n            return parsed;\r\n          }\r\n          \r\n          // 检查是否是逗号分隔的字符串\r\n          if (path.includes(',')) {\r\n            const paths = path.split(',').map(p => p.trim()).filter(p => p);\r\n            console.log('照片路径解析为逗号分隔字符串:', paths);\r\n            return paths;\r\n          }\r\n          \r\n          // 单个路径\r\n          console.log('照片路径解析为单个字符串:', [path]);\r\n          return [path];\r\n        }\r\n        \r\n        // 其他情况，尝试转换为字符串后处理\r\n        console.log('照片路径类型未知，尝试转换为字符串:', String(path));\r\n        return [String(path)];\r\n      } catch (error) {\r\n        console.error('解析照片路径失败:', error);\r\n        // 如果解析失败，将其作为单个路径返回\r\n        return typeof path === 'string' ? [path] : [];\r\n      }\r\n    };\r\n    \r\n    // 是否为新增记录\r\n    const isNew = computed(() => {\r\n      return !route.params.id || route.params.id === 'new';\r\n    });\r\n    \r\n    // 是否为超级管理员\r\n    const isSuperAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n    \r\n    // 表单数据\r\n    const form = reactive({\r\n      unitId: '',\r\n      wasteTypeId: '',\r\n      location: '',\r\n      collectionDate: '',\r\n      collectionTime: '',\r\n      quantity: 0,\r\n      recordId: null,\r\n      creatorId: auth.state.user?.id || null,\r\n      photo_path_before: '',\r\n      photo_path_after: '',\r\n      remarks: ''\r\n    });\r\n\r\n    const rules = {\r\n      unitId: [\r\n        { required: true, message: '请选择单位', trigger: 'change' }\r\n      ],\r\n      wasteTypeId: [\r\n        { required: true, message: '请选择废物类型', trigger: 'change' }\r\n      ],\r\n      location: [\r\n        { required: true, message: '请输入废物产生地点', trigger: 'blur' }\r\n      ],\r\n      collectionDate: [\r\n        { required: false }\r\n      ],\r\n      collectionTime: [\r\n        { required: false }\r\n      ],\r\n      quantity: [\r\n        { required: true, message: '请输入收集数量', trigger: 'change' }\r\n      ]\r\n    };\r\n\r\n    onMounted(async () => {\r\n      loading.value = true;\r\n      \r\n      try {\r\n        // 获取废物类型\r\n        await fetchWasteTypes();\r\n        \r\n        // 如果是超级管理员，获取所有单位\r\n        if (isSuperAdmin.value) {\r\n          await fetchUnits();\r\n        }\r\n        \r\n        // 如果是新增记录\r\n        if (isNew.value) {\r\n          // 新增记录默认使用当前用户的单位（非超级管理员）\r\n          if (!isSuperAdmin.value && auth.state.user) {\r\n            form.unitId = auth.state.user.unit_id;\r\n            await fetchUnitName(form.unitId);\r\n          }\r\n        } else {\r\n          // 只有在编辑现有记录时才获取记录详情\r\n          await fetchRecordDetails();\r\n        }\r\n      } catch (error) {\r\n        console.error('初始化数据失败:', error);\r\n        ElMessage.error('加载数据失败，请刷新重试');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    });\r\n\r\n    // 获取单位列表\r\n    const fetchUnits = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        units.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取单位列表失败:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      }\r\n    };\r\n\r\n    // 获取单位名称\r\n    const fetchUnitName = async (unitId) => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        const unit = response.data.find(u => u.id === parseInt(unitId));\r\n        if (unit) {\r\n          unitName.value = unit.name;\r\n        }\r\n      } catch (error) {\r\n        console.error('获取单位信息失败:', error);\r\n      }\r\n    };\r\n\r\n    // 获取废物类型\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取废物类型失败:', error);\r\n        ElMessage.error('获取废物类型失败');\r\n      }\r\n    };\r\n\r\n    // 获取记录详情\r\n    const fetchRecordDetails = async () => {\r\n      try {\r\n        loading.value = true;\r\n        const response = await httpService.get(`${apiConfig.endpoints.wasteRecords}/detail/${route.params.id}`);\r\n        \r\n        const record = response.data;\r\n        console.log('获取到的记录详情:', record);\r\n        \r\n        form.unitId = record.unit_id;\r\n        form.wasteTypeId = record.waste_type_id;\r\n        form.location = record.location;\r\n        form.recordId = record.id;\r\n        \r\n        // 处理收集时间\r\n        if (record.collection_start_time) {\r\n          const dateTime = new Date(record.collection_start_time);\r\n          form.collectionDate = dateTime.toISOString().slice(0, 10);\r\n          form.collectionTime = dateTime.toTimeString().slice(0, 5);\r\n        }\r\n        \r\n        form.quantity = record.quantity;\r\n        \r\n        // 处理照片\r\n        if (record.photo_path_before) {\r\n          console.log('收集前照片路径:', record.photo_path_before);\r\n          const photoPaths = parsePhotoPath(record.photo_path_before);\r\n          console.log('解析后的收集前照片路径:', photoPaths);\r\n          \r\n          fileListBefore.value = photoPaths.map(path => {\r\n            // 构建完整URL\r\n            let fullUrl = path;\r\n            if (!path.startsWith('http')) {\r\n              // 移除开头的斜杠（如果有）\r\n              const cleanPath = path.startsWith('/') ? path.substring(1) : path;\r\n              fullUrl = `${window.location.origin}/${cleanPath}`;\r\n            }\r\n            \r\n            console.log('收集前照片完整URL:', fullUrl);\r\n            \r\n            return {\r\n              name: path.split('/').pop(),\r\n              url: fullUrl\r\n            };\r\n          });\r\n        }\r\n        \r\n        if (record.photo_path_after) {\r\n          console.log('收集后照片路径:', record.photo_path_after);\r\n          const photoPaths = parsePhotoPath(record.photo_path_after);\r\n          console.log('解析后的收集后照片路径:', photoPaths);\r\n          \r\n          fileListAfter.value = photoPaths.map(path => {\r\n            // 构建完整URL\r\n            let fullUrl = path;\r\n            if (!path.startsWith('http')) {\r\n              // 移除开头的斜杠（如果有）\r\n              const cleanPath = path.startsWith('/') ? path.substring(1) : path;\r\n              fullUrl = `${window.location.origin}/${cleanPath}`;\r\n            }\r\n            \r\n            console.log('收集后照片完整URL:', fullUrl);\r\n            \r\n            return {\r\n              name: path.split('/').pop(),\r\n              url: fullUrl\r\n            };\r\n          });\r\n        }\r\n        \r\n        // 获取单位名称\r\n        unitName.value = record.unit_name;\r\n        \r\n        // 设置创建时间\r\n        createdAt.value = record.created_at;\r\n        \r\n        // 初始化预览图片列表\r\n        updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n        \r\n      } catch (error) {\r\n        console.error('获取记录详情失败:', error);\r\n        ElMessage.error('获取记录详情失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    // 处理上传前的文件处理\r\n    const handleBeforeUpload = async (file) => {\r\n      // 检查文件类型是否为图片\r\n      const acceptedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];\r\n      const isImage = acceptedTypes.includes(file.type);\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!');\r\n        return false;\r\n      }\r\n\r\n      // 检查文件大小（50MB = 50 * 1024 * 1024 bytes）\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        ElMessage.error('图片大小不能超过50MB!');\r\n        return false;\r\n      }\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const largeFileThreshold = 2 * 1024 * 1024; // 2MB\r\n      if (file.size > largeFileThreshold) {\r\n        showLargeFileWarning.value = true;\r\n      }\r\n      \r\n      // 直接返回true，允许文件被添加到上传列表\r\n      return true;\r\n    };\r\n\r\n    // 处理收集前的照片变更\r\n    const handlePhotoBeforeChange = (file, fileList) => {\r\n      console.log('收集前照片变更:', file);\r\n      \r\n      // 检查是否有大文件\r\n      checkForLargeFiles(fileList);\r\n      \r\n      // 确保文件有raw属性\r\n      if (file.raw === undefined && file.status === 'ready') {\r\n        file.raw = file.originFileObj || file;\r\n        console.log('为收集前照片添加raw属性:', file.raw);\r\n      }\r\n      \r\n      // 更新文件列表\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n      \r\n      return false; // 阻止自动上传\r\n    };\r\n\r\n    // 处理收集前的照片移除\r\n    const handlePhotoBeforeRemove = (file, fileList) => {\r\n      console.log('收集前照片移除:', file);\r\n      \r\n      // 更新fileListBefore\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...fileListBefore.value, ...fileListAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n    };\r\n\r\n    // 处理收集后的照片变更\r\n    const handlePhotoAfterChange = (file, fileList) => {\r\n      console.log('收集后照片变更:', file);\r\n      \r\n      // 检查是否有大文件\r\n      checkForLargeFiles(fileList);\r\n      \r\n      // 确保文件有raw属性\r\n      if (file.raw === undefined && file.status === 'ready') {\r\n        file.raw = file.originFileObj || file;\r\n        console.log('为收集后照片添加raw属性:', file.raw);\r\n      }\r\n      \r\n      // 更新文件列表\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n      \r\n      return false; // 阻止自动上传\r\n    };\r\n\r\n    // 处理收集后的照片移除\r\n    const handlePhotoAfterRemove = (file, fileList) => {\r\n      console.log('收集后照片移除:', file);\r\n      \r\n      // 更新fileListAfter\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...fileListBefore.value, ...fileListAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      // 更新预览图片\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n    };\r\n\r\n    // 更新预览图片\r\n    const updatePreviewImages = (fileList) => {\r\n      previewImages.value = fileList.map(file => {\r\n        if (file.url) {\r\n          console.log('预览图片URL:', file.url);\r\n          return file.url;\r\n        } else if (file.raw) {\r\n          // 检查是否已经创建了Blob URL\r\n          if (!file._blobUrl) {\r\n            file._blobUrl = URL.createObjectURL(file.raw);\r\n          }\r\n          console.log('预览图片从raw创建:', file._blobUrl);\r\n          return file._blobUrl;\r\n        } else if (file instanceof File) {\r\n          // 检查是否已经创建了Blob URL\r\n          if (!file._blobUrl) {\r\n            file._blobUrl = URL.createObjectURL(file);\r\n          }\r\n          console.log('预览图片从File创建:', file._blobUrl);\r\n          return file._blobUrl;\r\n        }\r\n        return '';\r\n      }).filter(url => url);\r\n      \r\n      console.log('预览图片列表:', previewImages.value);\r\n    };\r\n\r\n    // 处理图片预览\r\n    const handlePictureCardPreview = (file) => {\r\n      console.log('预览图片:', file);\r\n      \r\n      // 更新预览图片列表\r\n      updatePreviewImages([...fileListBefore.value, ...fileListAfter.value]);\r\n      \r\n      // 找到当前图片在预览列表中的索引\r\n      const index = previewImages.value.findIndex(url => {\r\n        if (file.url) {\r\n          return url === file.url;\r\n        } else if (file.raw) {\r\n          // 对于新上传的文件，需要比较Blob URL\r\n          const blobUrl = URL.createObjectURL(file.raw);\r\n          const result = url === blobUrl;\r\n          // 释放Blob URL\r\n          URL.revokeObjectURL(blobUrl);\r\n          return result;\r\n        }\r\n        return false;\r\n      });\r\n      \r\n      if (index !== -1) {\r\n        previewIndex.value = index;\r\n      } else {\r\n        previewIndex.value = 0;\r\n      }\r\n      \r\n      // 显示图片预览器\r\n      showViewer.value = true;\r\n    };\r\n    \r\n    // 关闭图片预览\r\n    const closeViewer = () => {\r\n      showViewer.value = false;\r\n    };\r\n\r\n    // 检查是否有大文件\r\n    const checkForLargeFiles = (files) => {\r\n      const largeFileThreshold = 2 * 1024 * 1024; // 2MB\r\n      return files.some(file => file.size > largeFileThreshold);\r\n    };\r\n\r\n    // 处理上传进度\r\n    const handleUploadProgress = (progressEvent) => {\r\n      if (progressEvent.total) {\r\n        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        uploadPercentage.value = percentage;\r\n        \r\n        if (percentage < 33) {\r\n          uploadStatus.value = '正在上传文件...';\r\n        } else if (percentage < 66) {\r\n          uploadStatus.value = '正在处理文件...';\r\n        } else if (percentage < 100) {\r\n          uploadStatus.value = '即将完成...';\r\n        } else {\r\n          uploadStatus.value = '上传完成，正在保存...';\r\n        }\r\n      }\r\n    };\r\n\r\n    // 格式化百分比显示\r\n    const percentageFormat = (percentage) => {\r\n      return percentage === 100 ? '完成' : `${percentage}%`;\r\n    };\r\n\r\n    // 提交表单\r\n    const submitForm = async () => {\r\n      if (!recordForm.value) return;\r\n      \r\n      await recordForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          // 显示上传进度对话框\r\n          uploadPercentage.value = 0;\r\n          uploadStatus.value = '正在上传文件...';\r\n          showUploadProgress.value = true;\r\n          \r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('unitId', form.unitId);\r\n            formData.append('wasteTypeId', form.wasteTypeId);\r\n            formData.append('location', form.location);\r\n            formData.append('collectionDate', form.collectionDate);\r\n            formData.append('collectionTime', form.collectionTime);\r\n            formData.append('quantity', form.quantity);\r\n            formData.append('remarks', form.remarks || '');\r\n            \r\n            // 处理照片 - 根据后端逻辑，如果有新上传的照片，后端会删除所有旧照片\r\n            // 因此，我们需要合并现有照片和新上传的照片\r\n            \r\n            // 处理收集前照片\r\n            if (fileListBefore.value.length > 0) {\r\n              const newFiles = fileListBefore.value.filter(file => file.raw);\r\n              const existingFiles = fileListBefore.value.filter(file => !file.raw);\r\n              \r\n              // 如果有新上传的照片，我们需要将现有照片的URL转换为File对象\r\n              if (newFiles.length > 0) {\r\n                console.log('有新上传的收集前照片，需要合并现有照片');\r\n                \r\n                // 将新照片添加到formData\r\n                newFiles.forEach(file => {\r\n                  if (file.raw) {\r\n                    console.log('添加新的收集前照片:', file.raw.name);\r\n                    formData.append('photo_before', file.raw);\r\n                  }\r\n                });\r\n                \r\n                // 如果有现有照片，我们需要将它们的路径保存到photo_path_before字段\r\n                if (existingFiles.length > 0) {\r\n                  const existingPaths = existingFiles.map(file => {\r\n                    // 确保URL是相对路径\r\n                    let path = file.url;\r\n                    const origin = window.location.origin;\r\n                    if (path.startsWith(origin)) {\r\n                      path = path.substring(origin.length);\r\n                      // 确保路径以/开头\r\n                      if (!path.startsWith('/')) {\r\n                        path = '/' + path;\r\n                      }\r\n                    }\r\n                    return path;\r\n                  });\r\n                  \r\n                  console.log('保存现有收集前照片路径:', existingPaths);\r\n                  formData.append('photo_path_before', JSON.stringify(existingPaths));\r\n                }\r\n              } else if (existingFiles.length > 0) {\r\n                // 如果没有新上传的照片，只有现有照片，我们需要将它们的路径保存到photo_path_before字段\r\n                const existingPaths = existingFiles.map(file => {\r\n                  // 确保URL是相对路径\r\n                  let path = file.url;\r\n                  const origin = window.location.origin;\r\n                  if (path.startsWith(origin)) {\r\n                    path = path.substring(origin.length);\r\n                    // 确保路径以/开头\r\n                    if (!path.startsWith('/')) {\r\n                      path = '/' + path;\r\n                    }\r\n                  }\r\n                  return path;\r\n                });\r\n                \r\n                console.log('保存现有收集前照片路径(无新照片):', existingPaths);\r\n                formData.append('photo_path_before', JSON.stringify(existingPaths));\r\n              }\r\n            } else {\r\n              // 如果没有照片，设置为空数组\r\n              formData.append('photo_path_before', JSON.stringify([]));\r\n            }\r\n            \r\n            // 处理收集后照片\r\n            if (fileListAfter.value.length > 0) {\r\n              const newFiles = fileListAfter.value.filter(file => file.raw);\r\n              const existingFiles = fileListAfter.value.filter(file => !file.raw);\r\n              \r\n              // 如果有新上传的照片，我们需要将现有照片的URL转换为File对象\r\n              if (newFiles.length > 0) {\r\n                console.log('有新上传的收集后照片，需要合并现有照片');\r\n                \r\n                // 将新照片添加到formData\r\n                newFiles.forEach(file => {\r\n                  if (file.raw) {\r\n                    console.log('添加新的收集后照片:', file.raw.name);\r\n                    formData.append('photo_after', file.raw);\r\n                  }\r\n                });\r\n                \r\n                // 如果有现有照片，我们需要将它们的路径保存到photo_path_after字段\r\n                if (existingFiles.length > 0) {\r\n                  const existingPaths = existingFiles.map(file => {\r\n                    // 确保URL是相对路径\r\n                    let path = file.url;\r\n                    const origin = window.location.origin;\r\n                    if (path.startsWith(origin)) {\r\n                      path = path.substring(origin.length);\r\n                      // 确保路径以/开头\r\n                      if (!path.startsWith('/')) {\r\n                        path = '/' + path;\r\n                      }\r\n                    }\r\n                    return path;\r\n                  });\r\n                  \r\n                  console.log('保存现有收集后照片路径:', existingPaths);\r\n                  formData.append('photo_path_after', JSON.stringify(existingPaths));\r\n                }\r\n              } else if (existingFiles.length > 0) {\r\n                // 如果没有新上传的照片，只有现有照片，我们需要将它们的路径保存到photo_path_after字段\r\n                const existingPaths = existingFiles.map(file => {\r\n                  // 确保URL是相对路径\r\n                  let path = file.url;\r\n                  const origin = window.location.origin;\r\n                  if (path.startsWith(origin)) {\r\n                    path = path.substring(origin.length);\r\n                    // 确保路径以/开头\r\n                    if (!path.startsWith('/')) {\r\n                      path = '/' + path;\r\n                    }\r\n                  }\r\n                  return path;\r\n                });\r\n                \r\n                console.log('保存现有收集后照片路径(无新照片):', existingPaths);\r\n                formData.append('photo_path_after', JSON.stringify(existingPaths));\r\n              }\r\n            } else {\r\n              // 如果没有照片，设置为空数组\r\n              formData.append('photo_path_after', JSON.stringify([]));\r\n            }\r\n            \r\n            // 打印FormData内容，用于调试\r\n            console.log('FormData内容:');\r\n            for (let [key, value] of formData.entries()) {\r\n              if (value instanceof File) {\r\n                console.log(`${key}: File - ${value.name} (${value.type}, ${value.size} bytes)`);\r\n              } else {\r\n                console.log(`${key}: ${value}`);\r\n              }\r\n            }\r\n            \r\n            // 根据是新增还是编辑选择不同的API\r\n            if (form.recordId) {\r\n              await httpService.putForm(\r\n                `${apiConfig.endpoints.wasteRecords}/${form.recordId}`, \r\n                formData,\r\n                handleUploadProgress\r\n              );\r\n              ElMessage.success('废物记录更新成功');\r\n            } else {\r\n              await httpService.postForm(\r\n                apiConfig.endpoints.wasteRecords, \r\n                formData,\r\n                handleUploadProgress\r\n              );\r\n              ElMessage.success('废物记录添加成功');\r\n            }\r\n            \r\n            // 关闭上传进度对话框\r\n            showUploadProgress.value = false;\r\n            \r\n            // 返回列表页\r\n            goBack();\r\n          } catch (error) {\r\n            console.error('提交表单失败:', error);\r\n            if (error.response && error.response.data) {\r\n              console.error('服务器返回错误:', error.response.data);\r\n              ElMessage.error(`提交表单失败: ${error.response.data.error || '未知错误'}`);\r\n            } else {\r\n              ElMessage.error('提交表单失败，请检查网络连接');\r\n            }\r\n            showUploadProgress.value = false;\r\n          }\r\n        } else {\r\n          console.log('表单验证失败');\r\n          ElMessage.error('请填写所有必填字段');\r\n          return false;\r\n        }\r\n      });\r\n    };\r\n\r\n    // 返回上一页\r\n    const goBack = () => {\r\n      if (isSuperAdmin.value) {\r\n        router.push('/admin-records');\r\n      } else {\r\n        router.push({ \r\n          name: 'RecordsList', \r\n          params: { unitId: auth.state.user.unit_id } \r\n        });\r\n      }\r\n    };\r\n\r\n    return {\r\n      form,\r\n      rules,\r\n      recordForm,\r\n      loading,\r\n      submitting,\r\n      unitName,\r\n      wasteTypes,\r\n      units,\r\n      fileListBefore,\r\n      fileListAfter,\r\n      previewImages,\r\n      showViewer,\r\n      previewIndex,\r\n      isNew,\r\n      isSuperAdmin,\r\n      parsePhotoPath,\r\n      handlePhotoBeforeChange,\r\n      handlePhotoBeforeRemove,\r\n      handlePhotoAfterChange,\r\n      handlePhotoAfterRemove,\r\n      handlePictureCardPreview,\r\n      handleBeforeUpload,\r\n      closeViewer,\r\n      submitForm,\r\n      goBack,\r\n      showUploadProgress,\r\n      uploadPercentage,\r\n      uploadStatus,\r\n      percentageFormat,\r\n      showLargeFileWarning\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-record-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.back-button {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.form-header {\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.form-header h2 {\r\n  color: #333;\r\n  border-bottom: 2px solid #409EFF;\r\n  display: inline-block;\r\n  padding-bottom: 5px;\r\n}\r\n\r\n.record-form {\r\n  background-color: #f9f9f9;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.waste-photo-uploader {\r\n  width: 100%;\r\n}\r\n\r\n.photo-tip, .time-tip {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 5px;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n\r\n.upload-warning {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.upload-progress {\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n\r\n.upload-status {\r\n  margin-top: 10px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n\r\n<style>\r\n/* 修复Element Plus图片预览组件的z-index问题 */\r\n.el-image-viewer__wrapper {\r\n  z-index: 2147483647 !important; /* 使用最大可能的z-index值 */\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的遮罩层也在最上层 */\r\n.el-image-viewer__mask {\r\n  z-index: 2147483646 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的操作按钮在最上层 */\r\n.el-image-viewer__btn {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的关闭按钮在最上层 */\r\n.el-image-viewer__close {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的图片在最上层 */\r\n.el-image-viewer__img {\r\n  z-index: 2147483646 !important;\r\n  position: relative !important;\r\n}\r\n\r\n/* 确保图片预览的操作栏在最上层 */\r\n.el-image-viewer__actions {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的缩放按钮在最上层 */\r\n.el-image-viewer__actions__inner {\r\n  z-index: 2147483647 !important;\r\n  position: relative !important;\r\n}\r\n</style>\r\n","import { render } from \"./EditRecord.vue?vue&type=template&id=23929916&scoped=true\"\nimport script from \"./EditRecord.vue?vue&type=script&lang=js\"\nexport * from \"./EditRecord.vue?vue&type=script&lang=js\"\n\nimport \"./EditRecord.vue?vue&type=style&index=0&id=23929916&scoped=true&lang=css\"\nimport \"./EditRecord.vue?vue&type=style&index=1&id=23929916&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-23929916\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"user-management-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <h1>人员管理</h1>\r\n      <div></div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"toolbar\">\r\n        <el-button type=\"primary\" @click=\"openAddDialog\">\r\n          <el-icon><plus /></el-icon> 添加用户\r\n        </el-button>\r\n      </div>\r\n\r\n      <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"users\"\r\n        border\r\n        stripe\r\n        style=\"width: 100%; margin-top: 20px;\"\r\n      >\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"60\" />\r\n        <el-table-column prop=\"username\" label=\"姓名\" width=\"120\" />\r\n        <el-table-column prop=\"phone\" label=\"手机号\" width=\"140\" />\r\n        <el-table-column prop=\"role_name\" label=\"角色\" width=\"120\" />\r\n        <el-table-column prop=\"unit_name\" label=\"单位\" min-width=\"120\" />\r\n        <el-table-column label=\"操作\" width=\"180\" fixed=\"right\">\r\n          <template #default=\"scope\">\r\n            <el-button size=\"small\" @click=\"handleEdit(scope.row)\">编辑</el-button>\r\n            <el-popconfirm\r\n              title=\"确定要删除此用户吗？\"\r\n              @confirm=\"handleDelete(scope.row)\"\r\n            >\r\n              <template #reference>\r\n                <el-button size=\"small\" type=\"danger\">删除</el-button>\r\n              </template>\r\n            </el-popconfirm>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n    <!-- 添加/编辑用户对话框 -->\r\n    <el-dialog\r\n      v-model=\"dialogVisible\"\r\n      :title=\"isEdit ? '编辑用户' : '添加用户'\"\r\n      width=\"500px\"\r\n    >\r\n      <el-form\r\n        ref=\"userForm\"\r\n        :model=\"form\"\r\n        :rules=\"rules\"\r\n        label-width=\"100px\"\r\n        style=\"max-width: 400px; margin: 0 auto;\"\r\n      >\r\n        <el-form-item label=\"姓名\" prop=\"username\">\r\n          <el-input v-model=\"form.username\" placeholder=\"请输入姓名\" />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"手机号\" prop=\"phone\">\r\n          <el-input v-model=\"form.phone\" placeholder=\"请输入手机号\" />\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"角色\" prop=\"roleId\">\r\n          <el-select v-model=\"form.roleId\" placeholder=\"请选择角色\" style=\"width: 100%\">\r\n            <!-- 如果是超级管理员，可以添加所有类型用户 -->\r\n            <el-option v-if=\"isSuperAdmin\" :value=\"3\" label=\"超级管理员\" />\r\n            <el-option :value=\"2\" label=\"单位管理员\" />\r\n            <el-option :value=\"1\" label=\"基层员工\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        \r\n        <el-form-item label=\"单位\" prop=\"unitId\" v-if=\"form.roleId !== 3\">\r\n          <el-select \r\n            v-model=\"form.unitId\" \r\n            placeholder=\"请选择单位\" \r\n            style=\"width: 100%\"\r\n            :disabled=\"!isSuperAdmin && isEdit\"\r\n          >\r\n            <el-option \r\n              v-for=\"unit in units\" \r\n              :key=\"unit.id\" \r\n              :label=\"unit.name\" \r\n              :value=\"unit.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n        \r\n        <el-form-item \r\n          label=\"密码\" \r\n          prop=\"password\"\r\n        >\r\n          <el-input \r\n            v-model=\"form.password\" \r\n            placeholder=\"请输入密码\" \r\n            type=\"password\"\r\n            show-password\r\n          />\r\n          <div class=\"password-hint\" v-if=\"!isEdit\">所有账号必须设置密码</div>\r\n          <div class=\"password-hint\" v-else>不修改密码请留空</div>\r\n        </el-form-item>\r\n      </el-form>\r\n      \r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm\" :loading=\"formLoading\">\r\n            确认\r\n          </el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Plus } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'UserManagement',\r\n  components: {\r\n    ArrowLeft,\r\n    Plus\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const loading = ref(false);\r\n    const formLoading = ref(false);\r\n    const dialogVisible = ref(false);\r\n    const isEdit = ref(false);\r\n    const userForm = ref(null);\r\n    const users = ref([]);\r\n    const units = ref([]);\r\n    \r\n    // 判断当前用户是否为超级管理员\r\n    const isSuperAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n    \r\n    // 当前登录用户的单位ID\r\n    const currentUnitId = computed(() => {\r\n      return auth.state.isLoggedIn ? auth.state.user.unit_id : null;\r\n    });\r\n    \r\n    // 表单数据\r\n    const form = reactive({\r\n      id: null,\r\n      username: '',\r\n      phone: '',\r\n      roleId: 1,\r\n      unitId: null,\r\n      password: ''\r\n    });\r\n    \r\n    // 表单验证规则\r\n    const rules = {\r\n      username: [\r\n        { required: true, message: '请输入姓名', trigger: 'blur' },\r\n        { min: 2, max: 20, message: '长度在 2 到 20 个字符', trigger: 'blur' }\r\n      ],\r\n      phone: [\r\n        { required: true, message: '请输入手机号', trigger: 'blur' },\r\n        { pattern: /^1[3-9]\\d{9}$/, message: '请输入有效的手机号码', trigger: 'blur' }\r\n      ],\r\n      roleId: [\r\n        { required: true, message: '请选择角色', trigger: 'change' }\r\n      ],\r\n      unitId: [\r\n        { required: true, message: '请选择单位', trigger: 'change' }\r\n      ],\r\n      password: [\r\n        { \r\n          required: function() {\r\n            // 新增账号时密码必填\r\n            return !isEdit.value;\r\n          }, \r\n          message: '请输入密码', \r\n          trigger: 'blur' \r\n        },\r\n        { min: 1, max: 20, message: '长度在 1 到 20 个字符', trigger: 'blur' }\r\n      ]\r\n    };\r\n    \r\n    // 获取用户列表\r\n    const fetchUsers = async () => {\r\n      loading.value = true;\r\n      try {\r\n        let response;\r\n        if (isSuperAdmin.value) {\r\n          // 超级管理员获取所有用户\r\n          response = await httpService.get(apiConfig.endpoints.users);\r\n        } else {\r\n          // 单位管理员只获取本单位员工\r\n          response = await httpService.get(`${apiConfig.endpoints.units}/${currentUnitId.value}/users`);\r\n        }\r\n        users.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n        ElMessage.error('获取用户列表失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 获取单位列表\r\n    const fetchUnits = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        units.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching units:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      }\r\n    };\r\n    \r\n    // 打开添加对话框\r\n    const openAddDialog = () => {\r\n      isEdit.value = false;\r\n      resetForm();\r\n      dialogVisible.value = true;\r\n      \r\n      // 如果是单位管理员，默认选择当前单位\r\n      if (!isSuperAdmin.value) {\r\n        form.unitId = currentUnitId.value;\r\n      }\r\n    };\r\n    \r\n    // 处理编辑\r\n    const handleEdit = (row) => {\r\n      isEdit.value = true;\r\n      form.id = row.id;\r\n      form.username = row.username;\r\n      form.phone = row.phone;\r\n      form.roleId = row.role_id;\r\n      form.unitId = row.unit_id;\r\n      form.password = ''; // 编辑时密码字段为空\r\n      dialogVisible.value = true;\r\n    };\r\n    \r\n    // 处理删除\r\n    const handleDelete = async (row) => {\r\n      try {\r\n        await httpService.delete(`${apiConfig.endpoints.users}/${row.id}`);\r\n        ElMessage.success('用户删除成功');\r\n        fetchUsers();\r\n      } catch (error) {\r\n        console.error('Error deleting user:', error);\r\n        let errorMsg = '删除用户失败';\r\n        if (error.response && error.response.data && error.response.data.error) {\r\n          errorMsg = error.response.data.error;\r\n        }\r\n        ElMessage.error(errorMsg);\r\n      }\r\n    };\r\n    \r\n    // 重置表单\r\n    const resetForm = () => {\r\n      if (userForm.value) {\r\n        userForm.value.resetFields();\r\n      }\r\n      form.id = null;\r\n      form.username = '';\r\n      form.phone = '';\r\n      form.roleId = 1;\r\n      form.unitId = null;\r\n      form.password = '';\r\n    };\r\n    \r\n    // 提交表单\r\n    const submitForm = () => {\r\n      userForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          formLoading.value = true;\r\n          try {\r\n            const userData = {\r\n              username: form.username,\r\n              phone: form.phone,\r\n              roleId: form.roleId,\r\n              unitId: form.roleId !== 3 ? form.unitId : null\r\n            };\r\n            \r\n            // 仅当有输入密码时，才添加密码字段\r\n            if (form.password) {\r\n              userData.password = form.password;\r\n            }\r\n            \r\n            if (isEdit.value) {\r\n              // 更新用户\r\n              await httpService.put(`${apiConfig.endpoints.users}/${form.id}`, userData);\r\n              ElMessage.success('用户更新成功');\r\n            } else {\r\n              // 添加用户\r\n              await httpService.post(apiConfig.endpoints.users, userData);\r\n              ElMessage.success('用户添加成功');\r\n            }\r\n            \r\n            dialogVisible.value = false;\r\n            fetchUsers();\r\n          } catch (error) {\r\n            console.error('Error submitting user form:', error);\r\n            let errorMsg = isEdit.value ? '更新用户失败' : '添加用户失败';\r\n            if (error.response && error.response.data && error.response.data.error) {\r\n              errorMsg = error.response.data.error;\r\n            }\r\n            ElMessage.error(errorMsg);\r\n          } finally {\r\n            formLoading.value = false;\r\n          }\r\n        } else {\r\n          ElMessage.warning('请完成必填项');\r\n        }\r\n      });\r\n    };\r\n    \r\n    // 返回上一页\r\n    const goBack = () => {\r\n      router.back();\r\n    };\r\n    \r\n    onMounted(() => {\r\n      fetchUsers();\r\n      fetchUnits();\r\n    });\r\n    \r\n    return {\r\n      loading,\r\n      formLoading,\r\n      dialogVisible,\r\n      isEdit,\r\n      userForm,\r\n      users,\r\n      units,\r\n      form,\r\n      rules,\r\n      isSuperAdmin,\r\n      currentUnitId,\r\n      openAddDialog,\r\n      handleEdit,\r\n      handleDelete,\r\n      submitForm,\r\n      goBack\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.user-management-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.back-button {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.toolbar {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.password-hint {\r\n  font-size: 12px;\r\n  color: #999;\r\n  margin-top: 5px;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n</style>\r\n","import { render } from \"./UserManagement.vue?vue&type=template&id=53211ca3&scoped=true\"\nimport script from \"./UserManagement.vue?vue&type=script&lang=js\"\nexport * from \"./UserManagement.vue?vue&type=script&lang=js\"\n\nimport \"./UserManagement.vue?vue&type=style&index=0&id=53211ca3&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-53211ca3\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"admin-records-container\">\r\n    <div class=\"header\">\r\n      <h1>危险废物管理系统 - 全部记录</h1>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"actions\">\r\n        <el-button type=\"primary\" @click=\"addNewRecord\">\r\n          <el-icon><plus /></el-icon> 新增填报\r\n        </el-button>\r\n        <el-button type=\"success\" @click=\"goToUserManagement\">\r\n          <el-icon><user /></el-icon> 人员管理\r\n        </el-button>\r\n        <el-button @click=\"refreshRecords\">\r\n          <el-icon><refresh /></el-icon> 刷新\r\n        </el-button>\r\n      </div>\r\n      \r\n      <!-- 筛选面板 -->\r\n      <el-card class=\"filter-card\">\r\n        <div class=\"filter-header\">\r\n          <h3>筛选条件</h3>\r\n          <el-button type=\"primary\" link @click=\"showFilterPanel = !showFilterPanel\">\r\n            {{ showFilterPanel ? '收起' : '展开' }} \r\n            <el-icon v-if=\"!showFilterPanel\"><arrow-down /></el-icon>\r\n            <el-icon v-else><arrow-up /></el-icon>\r\n          </el-button>\r\n        </div>\r\n        \r\n        <div v-show=\"showFilterPanel\" class=\"filter-form-container\">\r\n          <el-form :model=\"filterForm\" label-width=\"100px\" class=\"filter-form\">\r\n            <el-row :gutter=\"20\">\r\n              <!-- 所属单位（超级管理员特有） -->\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"所属单位\">\r\n                  <el-select v-model=\"filterForm.unitId\" placeholder=\"选择单位\" style=\"width: 100%\" clearable>\r\n                    <el-option \r\n                      v-for=\"unit in units\" \r\n                      :key=\"unit.id\" \r\n                      :label=\"unit.name\" \r\n                      :value=\"unit.id\" \r\n                    />\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 收集时间范围 -->\r\n              <el-col :span=\"12\">\r\n                <el-form-item label=\"收集时间\">\r\n                  <el-date-picker\r\n                    v-model=\"filterForm.dateRange\"\r\n                    type=\"daterange\"\r\n                    range-separator=\"至\"\r\n                    start-placeholder=\"开始日期\"\r\n                    end-placeholder=\"结束日期\"\r\n                    format=\"YYYY-MM-DD\"\r\n                    value-format=\"YYYY-MM-DD\"\r\n                    style=\"width: 100%\"\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <el-row :gutter=\"20\">\r\n              <!-- 废物类型 -->\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"废物类型\">\r\n                  <el-select v-model=\"filterForm.wasteTypeId\" placeholder=\"选择废物类型\" style=\"width: 100%\" clearable>\r\n                    <el-option \r\n                      v-for=\"type in wasteTypes\" \r\n                      :key=\"type.id\" \r\n                      :label=\"type.name\" \r\n                      :value=\"type.id\" \r\n                    />\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 数量范围 -->\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"数量范围(吨)\">\r\n                  <div class=\"quantity-range\">\r\n                    <el-input-number \r\n                      v-model=\"filterForm.minQuantity\" \r\n                      :min=\"0\"\r\n                      :precision=\"3\"\r\n                      :step=\"0.001\"\r\n                      placeholder=\"最小值\"\r\n                      style=\"width: 47%\"\r\n                    />\r\n                    <span class=\"range-separator\">至</span>\r\n                    <el-input-number \r\n                      v-model=\"filterForm.maxQuantity\" \r\n                      :min=\"filterForm.minQuantity || 0\"\r\n                      :precision=\"3\"\r\n                      :step=\"0.001\"\r\n                      placeholder=\"最大值\"\r\n                      style=\"width: 47%\"\r\n                    />\r\n                  </div>\r\n                </el-form-item>\r\n              </el-col>\r\n              \r\n              <!-- 产生地点 -->\r\n              <el-col :span=\"8\">\r\n                <el-form-item label=\"产生地点\">\r\n                  <el-input \r\n                    v-model=\"filterForm.location\" \r\n                    placeholder=\"输入地点关键词搜索\" \r\n                    clearable\r\n                  />\r\n                </el-form-item>\r\n              </el-col>\r\n            </el-row>\r\n            \r\n            <div class=\"filter-actions\">\r\n              <el-button type=\"primary\" @click=\"applyFilter\">筛选</el-button>\r\n              <el-button @click=\"resetFilter\">重置</el-button>\r\n            </div>\r\n          </el-form>\r\n        </div>\r\n      </el-card>\r\n      \r\n      <div class=\"records-wrapper\">\r\n        <el-card class=\"records-card\">\r\n          <div class=\"card-header\">\r\n            <h3>所有废物记录</h3>\r\n            <div class=\"card-actions\">\r\n              <el-button type=\"warning\" @click=\"exportRecords\">\r\n                <el-icon><download /></el-icon> 导出记录\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n          \r\n          <el-table \r\n            :data=\"filteredRecords\" \r\n            style=\"width: 100%\" \r\n            border \r\n            v-loading=\"loading\"\r\n            stripe\r\n            class=\"responsive-table\"\r\n            height=\"500\"\r\n            @scroll=\"handleScroll\"\r\n          >\r\n            <el-table-column prop=\"unit_name\" label=\"单位\" width=\"100\" />\r\n            <el-table-column prop=\"waste_type_name\" label=\"废物类型\" width=\"100\" />\r\n            <el-table-column prop=\"location\" label=\"产生地点\" />\r\n            <el-table-column prop=\"collection_start_time\" label=\"收集开始时间\" width=\"160\" />\r\n            <el-table-column label=\"数量(吨)\" width=\"80\">\r\n              <template #default=\"scope\">\r\n                {{ parseFloat(scope.row.quantity).toFixed(3) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"creator_name\" label=\"汇报人\" width=\"100\" />\r\n            <el-table-column prop=\"created_at\" label=\"记录时间\" width=\"160\" />\r\n            <el-table-column\r\n              label=\"现场照片（清理前）\"\r\n              width=\"120\"\r\n              align=\"center\"\r\n            >\r\n              <template #default=\"scope\">\r\n                <div v-if=\"scope.row.photo_path_before\" class=\"photo-preview\">\r\n                  <!-- 多张照片显示 -->\r\n                  <div \r\n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_before)\" \r\n                    :key=\"index\"\r\n                    class=\"photo-thumbnail-container\"\r\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_before), index)\"\r\n                  >\r\n                    <el-image\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :src=\"`${baseUrl}${path}`\"\r\n                      fit=\"cover\"\r\n                    ></el-image>\r\n                  </div>\r\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_before).length > 1\" class=\"photo-count\">\r\n                    {{ parsePhotoPath(scope.row.photo_path_before).length }}张\r\n                  </div>\r\n                </div>\r\n                <span v-else>无</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              label=\"现场照片（清理后）\"\r\n              width=\"120\"\r\n              align=\"center\"\r\n            >\r\n              <template #default=\"scope\">\r\n                <div v-if=\"scope.row.photo_path_after\" class=\"photo-preview\">\r\n                  <!-- 多张照片显示 -->\r\n                  <div \r\n                    v-for=\"(path, index) in parsePhotoPath(scope.row.photo_path_after)\" \r\n                    :key=\"index\"\r\n                    class=\"photo-thumbnail-container\"\r\n                    @click=\"previewPhoto(parsePhotoPath(scope.row.photo_path_after), index)\"\r\n                  >\r\n                    <el-image\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :src=\"`${baseUrl}${path}`\"\r\n                      fit=\"cover\"\r\n                    ></el-image>\r\n                  </div>\r\n                  <div v-if=\"parsePhotoPath(scope.row.photo_path_after).length > 1\" class=\"photo-count\">\r\n                    {{ parsePhotoPath(scope.row.photo_path_after).length }}张\r\n                  </div>\r\n                </div>\r\n                <span v-else>无</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"70\" fixed=\"right\">\r\n              <template #default=\"scope\">\r\n                <div class=\"operation-buttons\">\r\n                  <el-button \r\n                    type=\"primary\" \r\n                    size=\"small\" \r\n                    @click=\"editRecord(scope.row.id)\"\r\n                    text\r\n                  >\r\n                    编辑\r\n                  </el-button>\r\n                  <el-button \r\n                    type=\"danger\" \r\n                    size=\"small\" \r\n                    @click=\"confirmDelete(scope.row)\"\r\n                    text\r\n                  >\r\n                    删除\r\n                  </el-button>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          \r\n          <div v-if=\"loadingMore\" class=\"loading-more\">\r\n            <el-icon class=\"loading\"><loading /></el-icon>\r\n            加载更多...\r\n          </div>\r\n          \r\n          <div class=\"empty-block\" v-if=\"records.length === 0 && !loading\">\r\n            <el-empty description=\"暂无废物记录\" />\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n\r\n    <!-- 添加独立的图片预览组件 -->\r\n    <el-image-viewer\r\n      v-if=\"showViewer\"\r\n      :url-list=\"previewImages\"\r\n      :initial-index=\"previewIndex\"\r\n      @close=\"closeViewer\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, computed, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage, ElMessageBox, ElImageViewer } from 'element-plus';\r\nimport axios from 'axios';\r\nimport { Plus, Refresh, User, ArrowDown, ArrowUp, Download, Loading } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\nimport { exportToExcel } from '../utils/exportUtils';\r\nimport apiConfig from '../config/api';\r\n\r\n// API基础URL\r\n// const apiBaseURL = apiConfig.baseURL;\r\n\r\n// 解析照片路径\r\nconst parsePhotoPath = (path) => {\r\n  if (!path) return [];\r\n  \r\n  try {\r\n    // 尝试解析为JSON\r\n    if (path.startsWith('[') && path.endsWith(']')) {\r\n      return JSON.parse(path);\r\n    }\r\n    // 如果不是JSON格式，则将其作为单个路径返回\r\n    return [path];\r\n  } catch (error) {\r\n    console.error('解析照片路径失败:', error);\r\n    // 如果解析失败，将其作为单个路径返回\r\n    return [path];\r\n  }\r\n};\r\n\r\n// 获取指定类型的照片\r\nconst getPhotosByType = (record, type) => {\r\n  if (!record.photos) return [];\r\n  \r\n  try {\r\n    const photos = JSON.parse(record.photos);\r\n    if (Array.isArray(photos)) {\r\n      return photos.filter(photo => photo.type === type);\r\n    }\r\n    return [];\r\n  } catch (error) {\r\n    console.error('解析照片JSON失败:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default {\r\n  name: 'AdminRecordsView',\r\n  components: {\r\n    Plus,\r\n    Refresh,\r\n    User,\r\n    ArrowDown,\r\n    ArrowUp,\r\n    Download,\r\n    ElImageViewer,\r\n    Loading\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const records = ref([]);\r\n    const loading = ref(false);\r\n    const units = ref([]);\r\n    const wasteTypes = ref([]);\r\n    const showFilterPanel = ref(true);\r\n    \r\n    // 添加baseUrl定义\r\n    const baseUrl = apiConfig.baseURL;\r\n    \r\n    // 图片预览相关\r\n    const showViewer = ref(false);\r\n    const previewImages = ref([]);\r\n    const previewIndex = ref(0);\r\n    \r\n    // 添加分页相关的响应式变量\r\n    const page = ref(1);\r\n    const pageSize = ref(20);\r\n    const hasMore = ref(true);\r\n    const loadingMore = ref(false);\r\n    \r\n    // 筛选表单\r\n    const filterForm = reactive({\r\n      unitId: null,\r\n      dateRange: null,\r\n      wasteTypeId: null,\r\n      minQuantity: null,\r\n      maxQuantity: null,\r\n      location: ''\r\n    });\r\n    \r\n    // 过滤后的记录\r\n    const filteredRecords = computed(() => {\r\n      return records.value.filter(record => {\r\n        // 检查所属单位\r\n        if (filterForm.unitId && record.unit_id !== filterForm.unitId) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查废物类型\r\n        if (filterForm.wasteTypeId && record.waste_type_id !== filterForm.wasteTypeId) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查数量范围\r\n        if (filterForm.minQuantity !== null && parseFloat(record.quantity) < filterForm.minQuantity) {\r\n          return false;\r\n        }\r\n        if (filterForm.maxQuantity !== null && parseFloat(record.quantity) > filterForm.maxQuantity) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查地点关键词\r\n        if (filterForm.location && !record.location.toLowerCase().includes(filterForm.location.toLowerCase())) {\r\n          return false;\r\n        }\r\n        \r\n        // 检查日期范围\r\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\r\n          const startDate = new Date(filterForm.dateRange[0]);\r\n          // 将结束日期设置为当天的23:59:59，以包含整天\r\n          const endDate = new Date(filterForm.dateRange[1]);\r\n          endDate.setHours(23, 59, 59, 999);\r\n          \r\n          // 解析记录中的收集开始时间\r\n          if (record.collection_start_time) {\r\n            // 处理已格式化的日期时间字符串\r\n            const recordDate = parseFormattedDateTime(record.collection_start_time);\r\n            if (recordDate < startDate || recordDate > endDate) {\r\n              return false;\r\n            }\r\n          } else {\r\n            // 如果记录没有收集时间，并且筛选设置了日期范围，则排除该记录\r\n            return false;\r\n          }\r\n        }\r\n        \r\n        return true;\r\n      });\r\n    });\r\n    \r\n    // 解析已格式化的日期时间字符串\r\n    const parseFormattedDateTime = (formattedDateTime) => {\r\n      // 假设格式是 \"2025-03-01 14:30:00\"\r\n      // 移除所有非数字和连字符、冒号的字符\r\n      const cleanedStr = formattedDateTime.replace(/[^0-9\\-: ]/g, '');\r\n      return new Date(cleanedStr);\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // 验证用户是否为超级管理员\r\n      if (!auth.state.isLoggedIn || auth.state.user.role_id !== 3) {\r\n        ElMessage.error('权限不足');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n      \r\n      await Promise.all([\r\n        fetchUnits(),\r\n        fetchWasteTypes(),\r\n        fetchRecords()\r\n      ]);\r\n    });\r\n    \r\n    // 获取单位列表\r\n    const fetchUnits = async () => {\r\n      try {\r\n        const response = await axios.get(apiConfig.getUrl(apiConfig.endpoints.units));\r\n        units.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取单位列表失败:', error);\r\n        ElMessage.error('获取单位列表失败');\r\n      }\r\n    };\r\n    \r\n    // 获取废物类型列表\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await axios.get(apiConfig.getUrl(apiConfig.endpoints.wasteTypes));\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('获取废物类型列表失败:', error);\r\n        ElMessage.error('获取废物类型列表失败');\r\n      }\r\n    };\r\n\r\n    const fetchRecords = async (isLoadMore = false) => {\r\n      if (!isLoadMore) {\r\n        loading.value = true;\r\n        page.value = 1;\r\n        records.value = [];\r\n      } else {\r\n        loadingMore.value = true;\r\n      }\r\n      \r\n      try {\r\n        const params = {\r\n          page: page.value,\r\n          pageSize: pageSize.value,\r\n          wasteTypeId: filterForm.wasteTypeId,\r\n          minQuantity: filterForm.minQuantity,\r\n          maxQuantity: filterForm.maxQuantity,\r\n          location: filterForm.location,\r\n        };\r\n        \r\n        // Only add dateRange if it exists and has both start and end dates\r\n        if (filterForm.dateRange && filterForm.dateRange.length === 2) {\r\n          params.dateRange = JSON.stringify(filterForm.dateRange);\r\n        }\r\n        \r\n        const response = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.wasteRecords)}/user/${auth.state.user.id}`,\r\n          { params }\r\n        );\r\n        \r\n        // 格式化日期\r\n        const formattedRecords = response.data.records.map(record => ({\r\n          ...record,\r\n          created_at: formatDateTime(record.created_at),\r\n          collection_start_time: formatDateTime(record.collection_start_time)\r\n        }));\r\n        \r\n        if (isLoadMore) {\r\n          records.value = [...records.value, ...formattedRecords];\r\n        } else {\r\n          records.value = formattedRecords;\r\n        }\r\n        \r\n        hasMore.value = response.data.hasMore;\r\n        if (hasMore.value) {\r\n          page.value++;\r\n        }\r\n      } catch (error) {\r\n        console.error('获取废物记录失败:', error);\r\n        ElMessage.error('获取废物记录失败');\r\n      } finally {\r\n        loading.value = false;\r\n        loadingMore.value = false;\r\n      }\r\n    };\r\n\r\n    const formatDateTime = (dateTimeStr) => {\r\n      if (!dateTimeStr) return '';\r\n      const date = new Date(dateTimeStr);\r\n      return date.toLocaleString('zh-CN', {\r\n        year: 'numeric',\r\n        month: '2-digit',\r\n        day: '2-digit',\r\n        hour: '2-digit',\r\n        minute: '2-digit',\r\n        hour12: false\r\n      });\r\n    };\r\n\r\n    const refreshRecords = () => {\r\n      fetchRecords();\r\n    };\r\n\r\n    const addNewRecord = () => {\r\n      if (auth.state.user.role_id === 3) {\r\n        router.push('/record/new');\r\n      } else {\r\n        router.push(`/unit/${auth.state.user.unit_id}`);\r\n      }\r\n    };\r\n\r\n    const goToUserManagement = () => {\r\n      router.push('/user-management');\r\n    };\r\n\r\n    const editRecord = (recordId) => {\r\n      router.push(`/record/${recordId}`);\r\n    };\r\n\r\n    // 应用筛选\r\n    const applyFilter = async () => {\r\n      await fetchRecords();\r\n      ElMessage.success('筛选已应用');\r\n    };\r\n    \r\n    // 重置筛选\r\n    const resetFilter = async () => {\r\n      filterForm.unitId = null;\r\n      filterForm.dateRange = null;\r\n      filterForm.wasteTypeId = null;\r\n      filterForm.minQuantity = null;\r\n      filterForm.maxQuantity = null;\r\n      filterForm.location = '';\r\n      await fetchRecords();\r\n      ElMessage.info('筛选条件已重置');\r\n    };\r\n    \r\n    // 导出筛选后的记录为Excel\r\n    const exportRecords = async () => {\r\n      if (filteredRecords.value.length === 0) {\r\n        ElMessage.warning('没有可导出的记录');\r\n        return;\r\n      }\r\n      \r\n      try {\r\n        loading.value = true;\r\n        // 获取所有符合当前筛选条件的记录\r\n        const response = await axios.get(\r\n          `${apiConfig.getUrl(apiConfig.endpoints.wasteRecords)}/export/user/${auth.state.user.id}`,\r\n          {\r\n            params: {\r\n              unitId: filterForm.unitId,\r\n              wasteTypeId: filterForm.wasteTypeId,\r\n              minQuantity: filterForm.minQuantity,\r\n              maxQuantity: filterForm.maxQuantity,\r\n              location: filterForm.location,\r\n              dateRange: filterForm.dateRange\r\n            }\r\n          }\r\n        );\r\n        \r\n        const allRecords = response.data.map(record => ({\r\n          ...record,\r\n          created_at: formatDateTime(record.created_at),\r\n          collection_start_time: formatDateTime(record.collection_start_time)\r\n        }));\r\n        \r\n        // 定义导出列\r\n        const exportHeaders = [\r\n          { title: '单位', field: 'unit_name', width: 15 },\r\n          { title: '废物类型', field: 'waste_type_name', width: 15 },\r\n          { title: '产生地点', field: 'location', width: 20 },\r\n          { title: '收集开始时间', field: 'collection_start_time', width: 20, type: 'datetime' },\r\n          { title: '数量(吨)', field: 'quantity', width: 12, type: 'number' },\r\n          { title: '记录时间', field: 'created_at', width: 20, type: 'datetime' }\r\n        ];\r\n        \r\n        let fileName = '全部废物记录';\r\n        if (filterForm.unitId) {\r\n          const unit = units.value.find(u => u.id === filterForm.unitId);\r\n          if (unit) {\r\n            fileName = `${unit.name}_废物记录`;\r\n          }\r\n        }\r\n        if (filterForm.wasteTypeId) {\r\n          const wasteType = wasteTypes.value.find(type => type.id === filterForm.wasteTypeId);\r\n          if (wasteType) {\r\n            fileName += `_${wasteType.name}`;\r\n          }\r\n        }\r\n        \r\n        exportToExcel(allRecords, fileName, exportHeaders);\r\n        ElMessage.success('导出成功');\r\n      } catch (error) {\r\n        console.error('导出记录失败:', error);\r\n        ElMessage.error('导出记录失败');\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n    \r\n    // 确认删除记录\r\n    const confirmDelete = (record) => {\r\n      ElMessageBox.confirm(\r\n        '此操作将永久删除该记录，是否继续？',\r\n        '警告',\r\n        {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n        }\r\n      )\r\n        .then(async () => {\r\n          try {\r\n            await axios.delete(`${apiConfig.getUrl(apiConfig.endpoints.wasteRecords)}/${record.id}`);\r\n            ElMessage.success('删除成功');\r\n            await fetchRecords();\r\n          } catch (error) {\r\n            console.error('删除记录失败:', error);\r\n            ElMessage.error('删除记录失败');\r\n          }\r\n        })\r\n        .catch(() => {\r\n          ElMessage.info('已取消删除');\r\n        });\r\n    };\r\n\r\n    // 预览照片\r\n    const previewPhoto = (paths, index) => {\r\n      // 确保paths是数组\r\n      const photoArray = Array.isArray(paths) ? paths : [paths];\r\n      previewImages.value = photoArray.map(path => `${baseUrl}${path}`);\r\n      previewIndex.value = index || 0;\r\n      showViewer.value = true;\r\n    };\r\n    \r\n    // 关闭预览\r\n    const closeViewer = () => {\r\n      showViewer.value = false;\r\n    };\r\n\r\n    // 添加滚动加载处理函数\r\n    const handleScroll = async (e) => {\r\n      const element = e.target;\r\n      // 添加安全检查，确保element存在且有必要的属性\r\n      if (\r\n        element && \r\n        element.scrollHeight && \r\n        !loadingMore.value &&\r\n        hasMore.value &&\r\n        element.scrollHeight - element.scrollTop - element.clientHeight < 100\r\n      ) {\r\n        await fetchRecords(true);\r\n      }\r\n    };\r\n\r\n    return {\r\n      records,\r\n      filteredRecords,\r\n      loading,\r\n      units,\r\n      wasteTypes,\r\n      showFilterPanel,\r\n      filterForm,\r\n      applyFilter,\r\n      resetFilter,\r\n      exportRecords,\r\n      parsePhotoPath,\r\n      getPhotosByType,\r\n      refreshRecords,\r\n      addNewRecord,\r\n      goToUserManagement,\r\n      editRecord,\r\n      confirmDelete,\r\n      // 图片预览相关\r\n      showViewer,\r\n      previewImages,\r\n      previewIndex,\r\n      previewPhoto,\r\n      closeViewer,\r\n      baseUrl,\r\n      page,\r\n      pageSize,\r\n      hasMore,\r\n      loadingMore,\r\n      handleScroll\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.admin-records-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 20px;\r\n  text-align: center;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 30px;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 20px;\r\n  gap: 10px;\r\n}\r\n\r\n.filter-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.filter-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.filter-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.filter-form-container {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.quantity-range {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n\r\n.range-separator {\r\n  margin: 0 5px;\r\n}\r\n\r\n.filter-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  gap: 10px;\r\n}\r\n\r\n.records-wrapper {\r\n  margin-top: 20px;\r\n}\r\n\r\n.records-card {\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header h3 {\r\n  margin: 0;\r\n  color: #333;\r\n}\r\n\r\n.record-image {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n  display: block;\r\n}\r\n\r\n.photo-count {\r\n  font-size: 12px;\r\n  color: #409EFF;\r\n  text-align: center;\r\n  margin-top: 2px;\r\n}\r\n\r\n.image-error {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: 50px;\r\n  height: 50px;\r\n  background-color: #f5f7fa;\r\n  color: #909399;\r\n}\r\n\r\n.empty-block {\r\n  margin: 20px 0;\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 15px;\r\n  text-align: center;\r\n  color: #666;\r\n}\r\n\r\n.photo-thumbnail-container {\r\n  cursor: pointer;\r\n  margin-bottom: 2px;\r\n}\r\n\r\n.photo-count {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  text-align: center;\r\n  margin-top: 2px;\r\n}\r\n\r\n.photo-preview {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.operation-buttons {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 4px;\r\n  align-items: center;\r\n}\r\n\r\n.operation-buttons .el-button {\r\n  margin-left: 0;\r\n  padding: 4px 8px;\r\n}\r\n\r\n.loading-more {\r\n  text-align: center;\r\n  padding: 10px 0;\r\n  color: #909399;\r\n}\r\n\r\n.loading-more .loading {\r\n  margin-right: 5px;\r\n  animation: rotating 2s linear infinite;\r\n}\r\n\r\n@keyframes rotating {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n</style>\r\n\r\n<style>\r\n/* 修复Element Plus图片预览组件的z-index问题 */\r\n.el-image-viewer__wrapper {\r\n  z-index: 2147483647 !important; /* 使用最大可能的z-index值 */\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的遮罩层也在最上层 */\r\n.el-image-viewer__mask {\r\n  z-index: 2147483646 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的操作按钮在最上层 */\r\n.el-image-viewer__btn {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的关闭按钮在最上层 */\r\n.el-image-viewer__close {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的图片在最上层 */\r\n.el-image-viewer__img {\r\n  z-index: 2147483646 !important;\r\n  position: relative !important;\r\n}\r\n\r\n/* 确保图片预览的操作栏在最上层 */\r\n.el-image-viewer__actions {\r\n  z-index: 2147483647 !important;\r\n  position: fixed !important;\r\n}\r\n\r\n/* 确保图片预览的缩放按钮在最上层 */\r\n.el-image-viewer__actions__inner {\r\n  z-index: 2147483647 !important;\r\n  position: relative !important;\r\n}\r\n</style>\r\n","import { render } from \"./AdminRecords.vue?vue&type=template&id=02c0f4e0&scoped=true\"\nimport script from \"./AdminRecords.vue?vue&type=script&lang=js\"\nexport * from \"./AdminRecords.vue?vue&type=script&lang=js\"\n\nimport \"./AdminRecords.vue?vue&type=style&index=0&id=02c0f4e0&scoped=true&lang=css\"\nimport \"./AdminRecords.vue?vue&type=style&index=1&id=02c0f4e0&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-02c0f4e0\"]])\n\nexport default __exports__","import { createRouter, createWebHistory } from 'vue-router'\r\nimport UnitSelection from '../views/UnitSelection.vue'\r\nimport WasteForm from '../views/WasteForm.vue'\r\nimport RecordsList from '../views/RecordsList.vue'\r\nimport Login from '../views/Login.vue'\r\nimport EditRecord from '../views/EditRecord.vue'\r\nimport UserManagement from '../views/UserManagement.vue'\r\nimport AdminRecords from '../views/AdminRecords.vue'\r\nimport auth from '../store/auth'\r\n\r\nconst routes = [\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: Login,\r\n    meta: { requiresAuth: false }\r\n  },\r\n  {\r\n    path: '/user-management',\r\n    name: 'UserManagement',\r\n    component: UserManagement,\r\n    meta: { requiresAuth: true, requiresManager: true }\r\n  },\r\n  {\r\n    path: '/',\r\n    name: 'UnitSelection',\r\n    component: UnitSelection,\r\n    meta: { requiresAuth: true, requiresSuperAdmin: true }\r\n  },\r\n  {\r\n    path: '/admin-records',\r\n    name: 'AdminRecords',\r\n    component: AdminRecords,\r\n    meta: { requiresAuth: true, requiresSuperAdmin: true }\r\n  },\r\n  {\r\n    path: '/record/new',\r\n    name: 'EditRecord',\r\n    component: EditRecord,\r\n    props: { id: null },\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/record/:id',\r\n    name: 'EditRecord',\r\n    component: EditRecord,\r\n    props: true,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/unit/:id',\r\n    name: 'WasteForm',\r\n    component: WasteForm,\r\n    props: true,\r\n    meta: { requiresAuth: true }\r\n  },\r\n  {\r\n    path: '/records/:unitId',\r\n    name: 'RecordsList',\r\n    component: RecordsList,\r\n    props: true,\r\n    meta: { requiresAuth: true }\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\n// 路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n  // 检查页面是否需要授权\r\n  const requiresAuth = to.matched.some(record => record.meta.requiresAuth);\r\n  const requiresSuperAdmin = to.matched.some(record => record.meta.requiresSuperAdmin);\r\n  const requiresManager = to.matched.some(record => record.meta.requiresManager);\r\n  \r\n  // 如果路由需要登录但用户未登录，重定向到登录页面\r\n  if (requiresAuth && !auth.state.isLoggedIn) {\r\n    next({ name: 'Login' });\r\n    return;\r\n  }\r\n  \r\n  // 如果路由需要超级管理员权限但用户不是超级管理员\r\n  if (requiresSuperAdmin && auth.state.isLoggedIn && auth.state.user.role_id !== 3) {\r\n    // 如果用户已登录但不是超级管理员，重定向到其单位页面\r\n    next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n    return;\r\n  }\r\n  \r\n  // 如果路由需要管理员权限但用户不是管理员\r\n  if (requiresManager && auth.state.isLoggedIn && auth.state.user.role_id === 1) {\r\n    // 普通员工不能访问管理员页面\r\n    next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n    return;\r\n  }\r\n  \r\n  // 如果用户已登录且尝试访问登录页面，重定向到合适的页面\r\n  if (to.name === 'Login' && auth.state.isLoggedIn) {\r\n    if (auth.state.user.role_id === 3) {\r\n      next({ name: 'AdminRecords' }); // 超级管理员到管理页面\r\n    } else if (auth.state.user.role_id === 2) {\r\n      next({ name: 'RecordsList', params: { unitId: auth.state.user.unit_id } }); // 单位管理员直接进入记录页面\r\n    } else {\r\n      next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } }); // 普通员工到填报页面\r\n    }\r\n    return;\r\n  }\r\n  \r\n  // 超级管理员访问首页时，重定向到管理页面\r\n  if (to.path === '/' && auth.state.isLoggedIn) {\r\n    if (auth.state.user.role_id === 3) {\r\n      next({ name: 'AdminRecords' });\r\n      return;\r\n    } else if (auth.state.user.role_id === 2) {\r\n      next({ name: 'RecordsList', params: { unitId: auth.state.user.unit_id } });\r\n      return;\r\n    } else {\r\n      next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n      return;\r\n    }\r\n  }\r\n  \r\n  // 检查用户是否尝试访问不属于自己单位的页面\r\n  if (to.name === 'WasteForm' && auth.state.isLoggedIn && \r\n      auth.state.user.role_id !== 3 && // 不是超级管理员\r\n      auth.state.user.unit_id !== parseInt(to.params.id)) {\r\n    // 如果用户尝试访问其他单位，重定向到自己的单位\r\n    next({ name: 'WasteForm', params: { id: auth.state.user.unit_id } });\r\n    return;\r\n  }\r\n  \r\n  // 其他情况正常通过\r\n  next();\r\n});\r\n\r\nexport default router","import axios from 'axios';\nimport { ElMessage } from 'element-plus';\nimport auth from '../store/auth';\nimport apiConfig from './api';\nimport router from '../router';\n\n// 创建 axios 实例\nconst axiosInstance = axios.create({\n  baseURL: apiConfig.baseURL,\n  timeout: 300000, // 300秒超时\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  maxContentLength: 50 * 1024 * 1024, // 50MB\n  maxBodyLength: 50 * 1024 * 1024 // 50MB\n});\n\n// 请求拦截器\naxiosInstance.interceptors.request.use(\n  config => {\n    // 从 localStorage 或 sessionStorage 获取 token\n    const token = localStorage.getItem('token') || sessionStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  error => {\n    console.error('Request error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// 响应拦截器\naxiosInstance.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    if (error.response) {\n      switch (error.response.status) {\n        case 401:\n          // 检查是否是登录请求\n          if (error.config.url.includes('/api/login')) {\n            // 登录失败，不在这里显示错误信息，让组件自己处理\n            return Promise.reject(error);\n          } else {\n            // token 过期或无效，清除登录状态并跳转到登录页\n            auth.logout();\n            ElMessage.error('登录已过期，请重新登录');\n            router.push('/login');\n          }\n          break;\n        case 403:\n          ElMessage.error('没有权限访问该资源');\n          break;\n        case 404:\n          ElMessage.error('请求的资源不存在');\n          break;\n        case 500:\n          ElMessage.error('服务器错误，请稍后重试');\n          break;\n        default:\n          ElMessage.error(error.response.data?.error || '请求失败');\n      }\n    } else if (error.request) {\n      ElMessage.error('网络错误，请检查网络连接');\n    } else {\n      ElMessage.error('请求配置错误');\n    }\n    return Promise.reject(error);\n  }\n);\n\n// HTTP服务\nconst httpService = {\n  // GET请求\n  get(endpoint, params = {}) {\n    return axiosInstance.get(endpoint, { params });\n  },\n  \n  // POST请求\n  post(endpoint, data = {}) {\n    return axiosInstance.post(endpoint, data);\n  },\n  \n  // 带文件上传的POST请求\n  postForm(endpoint, formData, onUploadProgress) {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      timeout: 300000, // 300秒超时\n      maxContentLength: 50 * 1024 * 1024, // 50MB\n      maxBodyLength: 50 * 1024 * 1024 // 50MB\n    };\n    \n    // 只有当onUploadProgress是函数时才添加到配置中\n    if (typeof onUploadProgress === 'function') {\n      config.onUploadProgress = onUploadProgress;\n    }\n    \n    return axiosInstance.post(endpoint, formData, config);\n  },\n  \n  // PUT请求\n  put(endpoint, data = {}) {\n    return axiosInstance.put(endpoint, data);\n  },\n  \n  // 带文件上传的PUT请求\n  putForm(endpoint, formData, onUploadProgress) {\n    const config = {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      },\n      timeout: 300000, // 300秒超时\n      maxContentLength: 50 * 1024 * 1024, // 50MB\n      maxBodyLength: 50 * 1024 * 1024 // 50MB\n    };\n    \n    // 只有当onUploadProgress是函数时才添加到配置中\n    if (typeof onUploadProgress === 'function') {\n      config.onUploadProgress = onUploadProgress;\n    }\n    \n    return axiosInstance.put(endpoint, formData, config);\n  },\n  \n  // DELETE请求\n  delete(endpoint) {\n    return axiosInstance.delete(endpoint);\n  },\n\n  // 导出 axios 实例的 defaults\n  defaults: axiosInstance.defaults\n};\n\nexport default httpService;\n","import { reactive } from 'vue';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\n\r\n// 初始化状态\r\nconst defaultState = {\r\n  user: null,\r\n  token: null,\r\n  isLoggedIn: false,\r\n  loading: false,\r\n  error: null\r\n};\r\n\r\n// 创建响应式状态\r\nconst state = reactive({\r\n  ...defaultState\r\n});\r\n\r\n// 从localStorage获取已保存的用户信息和token\r\nconst init = () => {\r\n  const savedUser = localStorage.getItem('user');\r\n  const savedToken = localStorage.getItem('token');\r\n  if (savedUser && savedToken) {\r\n    try {\r\n      const user = JSON.parse(savedUser);\r\n      state.user = user;\r\n      state.token = savedToken;\r\n      state.isLoggedIn = true;\r\n      // 设置 token 到 httpService\r\n      if (httpService.defaults && httpService.defaults.headers) {\r\n        httpService.defaults.headers.common['Authorization'] = `Bearer ${savedToken}`;\r\n      }\r\n    } catch (e) {\r\n      console.error('Error parsing saved user data:', e);\r\n      localStorage.removeItem('user');\r\n      localStorage.removeItem('token');\r\n    }\r\n  }\r\n};\r\n\r\n// 登录方法\r\nconst login = async (phone, password, rememberMe = false, userType = 1) => {\r\n  // 设置加载状态\r\n  state.loading = true;\r\n  state.error = null;\r\n  \r\n  console.log('auth.login 开始执行，手机号:', phone, '用户类型:', userType);\r\n\r\n  try {\r\n    // 构建登录请求数据\r\n    const postData = { \r\n      phone, \r\n      rememberMe,\r\n      userType // 添加用户类型\r\n    };\r\n    \r\n    // 只有在密码存在且非空时才添加到请求中\r\n    if (password !== null && password !== undefined && password !== '') {\r\n      postData.password = password;\r\n      console.log('auth.login 发送密码参数');\r\n    } else {\r\n      console.log('auth.login 不发送密码参数');\r\n    }\r\n    \r\n    console.log('发送登录请求，数据:', postData);\r\n    const response = await httpService.post(apiConfig.endpoints.login, postData);\r\n    console.log('登录请求成功响应:', response.data);\r\n\r\n    const { token, ...user } = response.data;\r\n    state.user = user;\r\n    state.token = token;\r\n    state.isLoggedIn = true;\r\n    \r\n    // 设置 token 到 httpService\r\n    if (httpService.defaults && httpService.defaults.headers) {\r\n      httpService.defaults.headers.common['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    \r\n    // 如果选择记住登录，保存到localStorage\r\n    if (rememberMe) {\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      localStorage.setItem('token', token);\r\n    } else {\r\n      // 否则只保存在 sessionStorage 中\r\n      sessionStorage.setItem('user', JSON.stringify(user));\r\n      sessionStorage.setItem('token', token);\r\n    }\r\n    \r\n    return { success: true, user };\r\n  } catch (error) {\r\n    // 只设置错误状态，不显示错误消息\r\n    state.error = error.response?.data?.error || '登录失败，请检查网络连接';\r\n    console.error('Login error:', error);\r\n    return { success: false, error: state.error };\r\n  } finally {\r\n    state.loading = false;\r\n  }\r\n};\r\n\r\n// 注销方法\r\nconst logout = () => {\r\n  state.user = null;\r\n  state.token = null;\r\n  state.isLoggedIn = false;\r\n  if (httpService.defaults && httpService.defaults.headers) {\r\n    delete httpService.defaults.headers.common['Authorization'];\r\n  }\r\n  localStorage.removeItem('user');\r\n  localStorage.removeItem('token');\r\n  sessionStorage.removeItem('user');\r\n  sessionStorage.removeItem('token');\r\n};\r\n\r\n// 判断是否为超级管理员\r\nconst isAdmin = () => {\r\n  return state.isLoggedIn && state.user && state.user.role_id === 3;\r\n};\r\n\r\n// 判断是否为单位管理员\r\nconst isUnitAdmin = () => {\r\n  return state.isLoggedIn && state.user && state.user.role_id === 2;\r\n};\r\n\r\n// 获取当前用户ID\r\nconst getUserId = () => {\r\n  return state.user ? state.user.id : null;\r\n};\r\n\r\n// 获取当前用户单位ID\r\nconst getUnitId = () => {\r\n  return state.user ? state.user.unit_id : null;\r\n};\r\n\r\n// 初始化认证状态\r\ninit();\r\n\r\nexport default {\r\n  state,\r\n  login,\r\n  logout,\r\n  isAdmin,\r\n  isUnitAdmin,\r\n  getUserId,\r\n  getUnitId\r\n};\r\n","import { render } from \"./AppHeader.vue?vue&type=template&id=47e31eb0&scoped=true\"\nimport script from \"./AppHeader.vue?vue&type=script&lang=js\"\nexport * from \"./AppHeader.vue?vue&type=script&lang=js\"\n\nimport \"./AppHeader.vue?vue&type=style&index=0&id=47e31eb0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-47e31eb0\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=c0f1a378\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=c0f1a378&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\nimport ElementPlus from 'element-plus'\r\nimport 'element-plus/dist/index.css'\r\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\r\nimport './styles/global.css'\r\nimport './assets/css/responsive.css'\r\n\r\nconst app = createApp(App)\r\n\r\napp.use(router)\r\napp.use(ElementPlus, {\r\n  locale: zhCn\r\n})\r\n\r\napp.mount('#app')\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkhazardous_waste_management_frontend\"] = self[\"webpackChunkhazardous_waste_management_frontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6906); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["id","_createElementBlock","_hoisted_1","$setup","showHeader","_createBlock","_component_app_header","key","_createCommentVNode","_createVNode","_component_router_view","class","_createElementVNode","auth","state","isLoggedIn","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","userName","user","unit_name","_hoisted_4","_component_el_button","type","onClick","handleLogout","default","_withCtx","_cache","_","API_BASE_URL","baseURL","endpoints","login","users","units","wasteTypes","wasteRecords","wasteRecordsByUnit","wasteRecordDetail","wasteRecordsByUser","exportWasteRecords","getUrl","endpoint","this","_Fragment","_renderList","$data","unit","_component_el_card","shadow","$event","$options","selectUnit","name","data","loading","created","fetchUnits","methods","console","log","response","axios","get","api","error","ElMessage","$router","push","params","__exports__","isAdmin","args","goBack","_component_el_icon","_component_arrow_left","viewRecords","_component_document","_hoisted_5","unitName","_component_el_form","ref","model","form","rules","_component_el_form_item","label","prop","_component_el_select","modelValue","wasteTypeId","placeholder","style","_component_el_option","value","_component_el_input","location","_hoisted_6","_component_el_date_picker","collectionDate","format","editable","teleported","_component_el_time_picker","collectionTime","prefix","_component_clock","_component_el_input_number","quantity","min","precision","step","onFocus","selectAllText","controls","showLargeFileWarning","_hoisted_7","_component_el_alert","title","closable","_component_el_upload","action","handlePhotoBeforeChange","handlePhotoBeforeRemove","fileListBefore","limit","multiple","handleBeforeUpload","accept","_component_plus","handlePhotoAfterChange","handlePhotoAfterRemove","fileListAfter","_hoisted_8","submitForm","resetForm","_component_el_dialog","showUploadProgress","width","_hoisted_9","_component_el_progress","percentage","uploadPercentage","percentageFormat","status","_hoisted_10","uploadStatus","components","ArrowLeft","Document","Plus","Clock","props","String","Number","required","setup","router","useRouter","wasteForm","photoFilesBefore","photoFilesAfter","computed","role_id","reactive","Date","toISOString","slice","undefined","photo_before","photo_after","message","trigger","onMounted","async","viewportMeta","document","createElement","setAttribute","head","appendChild","originalViewport","querySelector","remove","fetchUnitName","fetchWasteTypes","onBeforeUnmount","httpService","apiConfig","find","u","parseInt","acceptedTypes","isImage","includes","file","maxSize","size","largeFileThreshold","fileList","newFiles","filter","f","raw","some","pf","forEach","newFile","allFiles","checkForLargeFiles","uid","files","handleUploadProgress","progressEvent","total","Math","round","loaded","validate","valid","formData","FormData","append","creatorName","username","phone","creator_id","creator_name","unitId","length","index","postForm","success","warning","resetFields","event","setTimeout","target","inputEl","select","goHome","_component_home_filled","addNewRecord","isUnitAdmin","goToUserManagement","_component_user","refreshRecords","_component_refresh","exportRecords","_component_download","link","showFilterPanel","_component_arrow_up","_component_arrow_down","filterForm","_component_el_row","gutter","_component_el_col","xs","sm","md","lg","xl","dateRange","clearable","minQuantity","maxQuantity","applyFilter","resetFilter","_hoisted_11","_hoisted_12","_hoisted_13","_component_el_table","filteredRecords","border","stripe","height","onScroll","handleScroll","_component_el_table_column","scope","parseFormattedDateTime","row","collection_start_time","parseFloat","toFixed","created_at","align","photo_path_before","_hoisted_14","parsePhotoPath","path","previewPhoto","_component_el_image","src","baseUrl","fit","_hoisted_15","_hoisted_16","_hoisted_17","photo_path_after","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","fixed","_hoisted_22","canEdit","editRecord","text","confirmDelete","loadingMore","_hoisted_23","_component_loading","records","_hoisted_24","_component_el_empty","description","showViewer","_component_el_image_viewer","previewImages","previewIndex","onClose","closeViewer","XLSX","Object","keys","join","exportToExcel","fileName","headers","imageData","replace","timestamp","substring","JSON","stringify","reduce","obj","workbook","ExcelJS","creator","lastModifiedBy","modified","worksheet","addWorksheet","columns","map","header","field","record","rowIndex","addRow","base64","beforePhotoBase64","base64Data","startsWith","beforePhotoId","addImage","extension","beforePhotoColIndex","tl","col","ext","getRow","imgError","afterPhotoBase64","afterPhotoId","afterPhotoColIndex","font","bold","alignment","vertical","horizontal","excelFileName","buffer","xlsx","writeBuffer","blob","Blob","url","URL","createObjectURL","href","download","body","click","removeChild","revokeObjectURL","exportToCSV","csvFileName","csvContent","headerRow","h","item","cellValue","visibility","imageUrlToBase64","urlWithCache","getTime","fetch","mode","cache","credentials","ok","Error","Promise","resolve","reject","reader","FileReader","onloadend","result","split","onerror","e","readAsDataURL","warn","img","Image","crossOrigin","onload","canvas","ctx","getContext","drawImage","toDataURL","error2","prepareImageExportData","firstRecord","processedCount","successCount","endsWith","parse","i","beforePhotoPaths","beforePhotoUrl","afterPhotoPaths","afterPhotoUrl","HomeFilled","Refresh","User","ArrowDown","ArrowUp","Download","ElImageViewer","Loading","page","pageSize","hasMore","Array","isArray","waste_type_id","toLowerCase","startDate","endDate","setHours","recordDate","dateTimeStr","date","getFullYear","getMonth","padStart","getDate","getHours","getMinutes","fetchRecords","getUnitId","recordId","unit_id","userId","getUserId","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","delete","catch","info","recordsToExport","hasPhotos","exportData","waste_type_name","toLocaleString","exportError","paths","photoArray","isLoadMore","scrollHeight","scrollTop","clientHeight","onSubmit","_withModifiers","password","_component_el_radio_group","userType","onChange","handleUserTypeChange","_component_el_radio","_component_el_checkbox","rememberMe","loginForm","showPassword","phoneRules","pattern","passwordRules","clearValidate","doLogin","isNew","isSuperAdmin","handlePictureCardPreview","_component_el_collapse","_component_el_collapse_item","route","useRoute","recordForm","submitting","createdAt","parsed","p","trim","creatorId","remarks","fetchRecordDetails","dateTime","toTimeString","photoPaths","fullUrl","cleanPath","window","origin","pop","updatePreviewImages","originFileObj","_blobUrl","File","findIndex","blobUrl","existingFiles","existingPaths","entries","putForm","openAddDialog","handleEdit","_component_el_popconfirm","onConfirm","handleDelete","reference","dialogVisible","isEdit","footer","formLoading","roleId","disabled","userForm","currentUnitId","max","fetchUsers","errorMsg","userData","put","post","back","span","getPhotosByType","photos","photo","formattedDateTime","cleanedStr","all","formattedRecords","formatDateTime","year","month","day","hour","minute","hour12","allRecords","exportHeaders","wasteType","element","routes","component","Login","meta","requiresAuth","UserManagement","requiresManager","UnitSelection","requiresSuperAdmin","AdminRecords","EditRecord","WasteForm","RecordsList","createRouter","history","createWebHistory","process","beforeEach","to","from","next","matched","axiosInstance","create","timeout","maxContentLength","maxBodyLength","interceptors","request","use","config","token","localStorage","getItem","sessionStorage","Authorization","logout","onUploadProgress","defaults","defaultState","init","savedUser","savedToken","common","removeItem","postData","setItem","AppHeader","render","app","createApp","App","ElementPlus","locale","zhCn","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","g","globalThis","Function","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}