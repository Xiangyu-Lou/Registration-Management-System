{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"waste-form-container\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  class: \"content\"\n};\nconst _hoisted_5 = {\n  class: \"unit-info\"\n};\nconst _hoisted_6 = {\n  class: \"form-row\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"upload-warning\"\n};\nconst _hoisted_8 = {\n  class: \"form-actions\"\n};\nconst _hoisted_9 = {\n  class: \"upload-progress\"\n};\nconst _hoisted_10 = {\n  class: \"upload-status\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_arrow_left = _resolveComponent(\"arrow-left\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_document = _resolveComponent(\"document\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_clock = _resolveComponent(\"clock\");\n  const _component_el_time_picker = _resolveComponent(\"el-time-picker\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_plus = _resolveComponent(\"plus\");\n  const _component_el_upload = _resolveComponent(\"el-upload\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_progress = _resolveComponent(\"el-progress\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [$setup.isAdmin ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"back-button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.goBack && $setup.goBack(...args))\n  }, [_createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_arrow_left)]),\n    _: 1 /* STABLE */\n  }), _cache[9] || (_cache[9] = _createTextVNode(\" 返回 \"))])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_3)), _cache[11] || (_cache[11] = _createElementVNode(\"h1\", null, \"危险废物填报\", -1 /* HOISTED */)), _createElementVNode(\"div\", {\n    class: \"view-records\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.viewRecords && $setup.viewRecords(...args))\n  }, [_cache[10] || (_cache[10] = _createTextVNode(\" 查看记录 \")), _createVNode(_component_el_icon, null, {\n    default: _withCtx(() => [_createVNode(_component_document)]),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h2\", null, _toDisplayString($setup.unitName), 1 /* TEXT */)]), _createVNode(_component_el_form, {\n    ref: \"wasteForm\",\n    model: $setup.form,\n    rules: $setup.rules,\n    \"label-position\": \"top\",\n    class: \"waste-form\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form_item, {\n      label: \"废物类型\",\n      prop: \"wasteTypeId\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_select, {\n        modelValue: $setup.form.wasteTypeId,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.wasteTypeId = $event),\n        placeholder: \"请选择废物类型\",\n        style: {\n          \"width\": \"100%\"\n        }\n      }, {\n        default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.wasteTypes, type => {\n          return _openBlock(), _createBlock(_component_el_option, {\n            key: type.id,\n            label: type.name,\n            value: type.id\n          }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n        }), 128 /* KEYED_FRAGMENT */))]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"产生地点\",\n      prop: \"location\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input, {\n        modelValue: $setup.form.location,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.location = $event),\n        placeholder: \"请输入废物产生地点\"\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_el_form_item, {\n      label: \"收集日期\",\n      class: \"date-item\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n        modelValue: $setup.form.collectionDate,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.form.collectionDate = $event),\n        type: \"date\",\n        placeholder: \"选择日期\",\n        format: \"YYYY-MM-DD\",\n        \"value-format\": \"YYYY-MM-DD\",\n        style: {\n          \"width\": \"100%\"\n        },\n        editable: false,\n        \"popper-class\": \"date-picker-popup\",\n        teleported: false\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"收集时间\",\n      class: \"time-item\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_time_picker, {\n        modelValue: $setup.form.collectionTime,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.form.collectionTime = $event),\n        format: \"HH:mm\",\n        placeholder: \"选择时间\",\n        \"value-format\": \"HH:mm\",\n        style: {\n          \"width\": \"100%\"\n        },\n        editable: false,\n        \"popper-class\": \"time-picker-popup\",\n        teleported: false\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_clock)]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    })]), _createVNode(_component_el_form_item, {\n      label: \"收集数量(吨)\",\n      prop: \"quantity\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_input_number, {\n        modelValue: $setup.form.quantity,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.form.quantity = $event),\n        min: 0,\n        precision: 3,\n        step: 0.001,\n        style: {\n          \"width\": \"100%\"\n        },\n        onFocus: _cache[7] || (_cache[7] = $event => $setup.selectAllText($event)),\n        \"input-props\": {\n          inputmode: 'decimal',\n          pattern: '[0-9]*[.,]?[0-9]*'\n        },\n        controls: false\n      }, null, 8 /* PROPS */, [\"modelValue\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"现场照片（收集前）\",\n      prop: \"photo_before\"\n    }, {\n      default: _withCtx(() => [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n        class: \"photo-tip\"\n      }, \"请上传废物收集前的现场照片（最多5张）\", -1 /* HOISTED */)), $setup.showLargeFileWarning ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_el_alert, {\n        title: \"上传大文件可能会导致处理时间较长，请耐心等待\",\n        type: \"warning\",\n        closable: false,\n        \"show-icon\": \"\"\n      })])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_el_upload, {\n        class: \"waste-photo-uploader\",\n        action: \"#\",\n        \"auto-upload\": false,\n        \"on-change\": $setup.handlePhotoBeforeChange,\n        \"on-remove\": $setup.handlePhotoBeforeRemove,\n        \"file-list\": $setup.fileListBefore,\n        limit: 5,\n        multiple: \"\",\n        \"list-type\": \"picture-card\",\n        \"before-upload\": $setup.handleBeforeUpload,\n        accept: \"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_plus)]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"on-change\", \"on-remove\", \"file-list\", \"before-upload\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_form_item, {\n      label: \"现场照片（收集后）\",\n      prop: \"photo_after\"\n    }, {\n      default: _withCtx(() => [_cache[13] || (_cache[13] = _createElementVNode(\"div\", {\n        class: \"photo-tip\"\n      }, \"请上传废物收集后的现场照片（最多5张）\", -1 /* HOISTED */)), _createVNode(_component_el_upload, {\n        class: \"waste-photo-uploader\",\n        action: \"#\",\n        \"auto-upload\": false,\n        \"on-change\": $setup.handlePhotoAfterChange,\n        \"on-remove\": $setup.handlePhotoAfterRemove,\n        \"file-list\": $setup.fileListAfter,\n        limit: 5,\n        multiple: \"\",\n        \"list-type\": \"picture-card\",\n        \"before-upload\": $setup.handleBeforeUpload,\n        accept: \"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_icon, null, {\n          default: _withCtx(() => [_createVNode(_component_plus)]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"on-change\", \"on-remove\", \"file-list\", \"before-upload\"])]),\n      _: 1 /* STABLE */\n    }), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      class: \"submit-btn\",\n      onClick: $setup.submitForm,\n      loading: $setup.loading\n    }, {\n      default: _withCtx(() => _cache[14] || (_cache[14] = [_createTextVNode(\"提交\")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"]), _createVNode(_component_el_button, {\n      class: \"reset-btn\",\n      onClick: $setup.resetForm\n    }, {\n      default: _withCtx(() => _cache[15] || (_cache[15] = [_createTextVNode(\"重置\")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"model\", \"rules\"])]), _createCommentVNode(\" 上传进度条对话框 \"), _createVNode(_component_el_dialog, {\n    modelValue: $setup.showUploadProgress,\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.showUploadProgress = $event),\n    title: \"正在上传文件\",\n    width: \"30%\",\n    \"close-on-click-modal\": false,\n    \"close-on-press-escape\": false,\n    \"show-close\": false\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, [_cache[16] || (_cache[16] = _createElementVNode(\"p\", null, \"正在上传文件，请勿关闭页面...\", -1 /* HOISTED */)), _createVNode(_component_el_progress, {\n      percentage: $setup.uploadPercentage,\n      format: $setup.percentageFormat,\n      status: $setup.uploadPercentage === 100 ? 'success' : ''\n    }, null, 8 /* PROPS */, [\"percentage\", \"format\", \"status\"]), _createElementVNode(\"p\", _hoisted_10, _toDisplayString($setup.uploadStatus), 1 /* TEXT */)])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _cache[17] || (_cache[17] = _createElementVNode(\"div\", {\n    class: \"footer\"\n  }, [_createElementVNode(\"p\", null, \"© 2025 危险废物管理系统\")], -1 /* HOISTED */))]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","$setup","isAdmin","onClick","_cache","args","goBack","_createVNode","_component_el_icon","default","_withCtx","_component_arrow_left","_","_createTextVNode","_hoisted_3","viewRecords","_component_document","_hoisted_4","_hoisted_5","_toDisplayString","unitName","_component_el_form","ref","model","form","rules","_component_el_form_item","label","prop","_component_el_select","modelValue","wasteTypeId","$event","placeholder","style","_Fragment","_renderList","wasteTypes","type","_createBlock","_component_el_option","id","name","value","_component_el_input","location","_hoisted_6","_component_el_date_picker","collectionDate","format","editable","teleported","_component_el_time_picker","collectionTime","prefix","_component_clock","_component_el_input_number","quantity","min","precision","step","onFocus","selectAllText","controls","showLargeFileWarning","_hoisted_7","_component_el_alert","title","closable","_createCommentVNode","_component_el_upload","action","handlePhotoBeforeChange","handlePhotoBeforeRemove","fileListBefore","limit","multiple","handleBeforeUpload","accept","_component_plus","handlePhotoAfterChange","handlePhotoAfterRemove","fileListAfter","_hoisted_8","_component_el_button","submitForm","loading","resetForm","_component_el_dialog","showUploadProgress","width","_hoisted_9","_component_el_progress","percentage","uploadPercentage","percentageFormat","status","_hoisted_10","uploadStatus"],"sources":["F:\\Project\\Hazardous-waste-management-system\\frontend\\src\\views\\WasteForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"waste-form-container\">\r\n    <div class=\"header\">\r\n      <div class=\"back-button\" @click=\"goBack\" v-if=\"isAdmin\">\r\n        <el-icon><arrow-left /></el-icon> 返回\r\n      </div>\r\n      <div v-else></div>\r\n      <h1>危险废物填报</h1>\r\n      <div class=\"view-records\" @click=\"viewRecords\">\r\n        查看记录 <el-icon><document /></el-icon>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"content\">\r\n      <div class=\"unit-info\">\r\n        <h2>{{ unitName }}</h2>\r\n      </div>\r\n\r\n      <el-form \r\n        ref=\"wasteForm\" \r\n        :model=\"form\" \r\n        :rules=\"rules\" \r\n        label-position=\"top\"\r\n        class=\"waste-form\"\r\n      >\r\n        <el-form-item label=\"废物类型\" prop=\"wasteTypeId\">\r\n          <el-select v-model=\"form.wasteTypeId\" placeholder=\"请选择废物类型\" style=\"width: 100%\">\r\n            <el-option \r\n              v-for=\"type in wasteTypes\" \r\n              :key=\"type.id\" \r\n              :label=\"type.name\" \r\n              :value=\"type.id\" \r\n            />\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"产生地点\" prop=\"location\">\r\n          <el-input v-model=\"form.location\" placeholder=\"请输入废物产生地点\" />\r\n        </el-form-item>\r\n\r\n        <div class=\"form-row\">\r\n          <el-form-item label=\"收集日期\" class=\"date-item\">\r\n            <el-date-picker\r\n              v-model=\"form.collectionDate\"\r\n              type=\"date\"\r\n              placeholder=\"选择日期\"\r\n              format=\"YYYY-MM-DD\"\r\n              value-format=\"YYYY-MM-DD\"\r\n              style=\"width: 100%\"\r\n              :editable=\"false\"\r\n              popper-class=\"date-picker-popup\"\r\n              :teleported=\"false\"\r\n            />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"收集时间\" class=\"time-item\">\r\n            <el-time-picker\r\n              v-model=\"form.collectionTime\"\r\n              format=\"HH:mm\"\r\n              placeholder=\"选择时间\"\r\n              value-format=\"HH:mm\"\r\n              style=\"width: 100%\"\r\n              :editable=\"false\"\r\n              popper-class=\"time-picker-popup\"\r\n              :teleported=\"false\"\r\n            >\r\n              <template #prefix>\r\n                <el-icon><clock /></el-icon>\r\n              </template>\r\n            </el-time-picker>\r\n          </el-form-item>\r\n        </div>\r\n\r\n        <el-form-item label=\"收集数量(吨)\" prop=\"quantity\">\r\n          <el-input-number\r\n            v-model=\"form.quantity\"\r\n            :min=\"0\"\r\n            :precision=\"3\"\r\n            :step=\"0.001\"\r\n            style=\"width: 100%\"\r\n            @focus=\"selectAllText($event)\"\r\n            :input-props=\"{\r\n              inputmode: 'decimal',\r\n              pattern: '[0-9]*[.,]?[0-9]*'\r\n            }\"\r\n            :controls=\"false\"\r\n          />\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集前）\" prop=\"photo_before\">\r\n          <div class=\"photo-tip\">请上传废物收集前的现场照片（最多5张）</div>\r\n          <div class=\"upload-warning\" v-if=\"showLargeFileWarning\">\r\n            <el-alert\r\n              title=\"上传大文件可能会导致处理时间较长，请耐心等待\"\r\n              type=\"warning\"\r\n              :closable=\"false\"\r\n              show-icon\r\n            />\r\n          </div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoBeforeChange\"\r\n            :on-remove=\"handlePhotoBeforeRemove\"\r\n            :file-list=\"fileListBefore\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"现场照片（收集后）\" prop=\"photo_after\">\r\n          <div class=\"photo-tip\">请上传废物收集后的现场照片（最多5张）</div>\r\n          <el-upload\r\n            class=\"waste-photo-uploader\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :on-change=\"handlePhotoAfterChange\"\r\n            :on-remove=\"handlePhotoAfterRemove\"\r\n            :file-list=\"fileListAfter\"\r\n            :limit=\"5\"\r\n            multiple\r\n            list-type=\"picture-card\"\r\n            :before-upload=\"handleBeforeUpload\"\r\n            accept=\"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.jpeg,.jpg,.png,.gif,.bmp,.webp\"\r\n          >\r\n            <el-icon><plus /></el-icon>\r\n          </el-upload>\r\n        </el-form-item>\r\n\r\n        <div class=\"form-actions\">\r\n          <el-button type=\"primary\" class=\"submit-btn\" @click=\"submitForm\" :loading=\"loading\">提交</el-button>\r\n          <el-button class=\"reset-btn\" @click=\"resetForm\">重置</el-button>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n\r\n    <!-- 上传进度条对话框 -->\r\n    <el-dialog\r\n      v-model=\"showUploadProgress\"\r\n      title=\"正在上传文件\"\r\n      width=\"30%\"\r\n      :close-on-click-modal=\"false\"\r\n      :close-on-press-escape=\"false\"\r\n      :show-close=\"false\"\r\n    >\r\n      <div class=\"upload-progress\">\r\n        <p>正在上传文件，请勿关闭页面...</p>\r\n        <el-progress \r\n          :percentage=\"uploadPercentage\" \r\n          :format=\"percentageFormat\"\r\n          :status=\"uploadPercentage === 100 ? 'success' : ''\"\r\n        ></el-progress>\r\n        <p class=\"upload-status\">{{ uploadStatus }}</p>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <div class=\"footer\">\r\n      <p>&copy; 2025 危险废物管理系统</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted, computed, onBeforeUnmount } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { ElMessage } from 'element-plus';\r\nimport httpService from '../config/httpService';\r\nimport apiConfig from '../config/api';\r\nimport { ArrowLeft, Document, Plus, Clock } from '@element-plus/icons-vue';\r\nimport auth from '../store/auth';\r\n\r\nexport default {\r\n  name: 'WasteForm',\r\n  components: {\r\n    ArrowLeft,\r\n    Document,\r\n    Plus,\r\n    Clock\r\n  },\r\n  props: {\r\n    id: {\r\n      type: [String, Number],\r\n      required: true\r\n    }\r\n  },\r\n  setup(props) {\r\n    const router = useRouter();\r\n    const wasteForm = ref(null);\r\n    const loading = ref(false);\r\n    const unitName = ref('');\r\n    const wasteTypes = ref([]);\r\n    const photoFilesBefore = ref([]);\r\n    const photoFilesAfter = ref([]);\r\n    const fileListBefore = ref([]);\r\n    const fileListAfter = ref([]);\r\n    const showUploadProgress = ref(false);\r\n    const uploadPercentage = ref(0);\r\n    const uploadStatus = ref('准备上传...');\r\n    const showLargeFileWarning = ref(false);\r\n    \r\n    // 检查用户是否为超级管理员\r\n    const isAdmin = computed(() => {\r\n      return auth.state.isLoggedIn && auth.state.user.role_id === 3;\r\n    });\r\n\r\n    // 初始化表单，将日期和时间分开\r\n    const form = reactive({\r\n      wasteTypeId: '',\r\n      location: '',\r\n      collectionDate: new Date().toISOString().slice(0, 10), // 默认为当天\r\n      collectionTime: '08:00',\r\n      quantity: undefined,\r\n      photo_before: [],\r\n      photo_after: []\r\n    });\r\n\r\n    const rules = {\r\n      wasteTypeId: [\r\n        { required: true, message: '请选择废物类型', trigger: 'change' }\r\n      ],\r\n      location: [\r\n        { required: true, message: '请输入废物产生地点', trigger: 'blur' }\r\n      ],\r\n      collectionDate: [\r\n        { required: false }\r\n      ],\r\n      collectionTime: [\r\n        { required: false }\r\n      ],\r\n      quantity: [\r\n        { required: true, message: '请输入收集数量', trigger: 'change' }\r\n      ]\r\n    };\r\n\r\n    onMounted(async () => {\r\n      // 设置viewport meta标签\r\n      const viewportMeta = document.createElement('meta');\r\n      viewportMeta.setAttribute('name', 'viewport');\r\n      viewportMeta.setAttribute('content', 'width=device-width,initial-scale=1.0,user-scalable=no,maximum-scale=1');\r\n      document.head.appendChild(viewportMeta);\r\n\r\n      // 保存原始的viewport meta标签（如果存在）\r\n      const originalViewport = document.querySelector('meta[name=\"viewport\"]');\r\n      if (originalViewport && originalViewport !== viewportMeta) {\r\n        originalViewport.remove();\r\n      }\r\n\r\n      await fetchUnitName();\r\n      await fetchWasteTypes();\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      // 移除我们添加的viewport meta标签\r\n      const viewportMeta = document.querySelector('meta[name=\"viewport\"]');\r\n      if (viewportMeta) {\r\n        viewportMeta.remove();\r\n      }\r\n\r\n      // 恢复原始的viewport设置\r\n      const originalViewport = document.createElement('meta');\r\n      originalViewport.setAttribute('name', 'viewport');\r\n      originalViewport.setAttribute('content', 'width=device-width,initial-scale=1.0');\r\n      document.head.appendChild(originalViewport);\r\n    });\r\n\r\n    const fetchUnitName = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.units);\r\n        const unit = response.data.find(u => u.id === parseInt(props.id));\r\n        if (unit) {\r\n          unitName.value = unit.name;\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching unit name:', error);\r\n        ElMessage.error('获取单位信息失败');\r\n      }\r\n    };\r\n\r\n    const fetchWasteTypes = async () => {\r\n      try {\r\n        const response = await httpService.get(apiConfig.endpoints.wasteTypes);\r\n        wasteTypes.value = response.data;\r\n      } catch (error) {\r\n        console.error('Error fetching waste types:', error);\r\n        ElMessage.error('获取废物类型失败');\r\n      }\r\n    };\r\n\r\n    // 处理上传前的文件处理\r\n    const handleBeforeUpload = async (file) => {\r\n      // 检查文件类型是否为图片\r\n      const acceptedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];\r\n      const isImage = acceptedTypes.includes(file.type);\r\n      \r\n      if (!isImage) {\r\n        ElMessage.error('只能上传图片文件!');\r\n        return false;\r\n      }\r\n\r\n      // 检查文件大小（50MB = 50 * 1024 * 1024 bytes）\r\n      const maxSize = 50 * 1024 * 1024;\r\n      if (file.size > maxSize) {\r\n        ElMessage.error('图片大小不能超过50MB!');\r\n        return false;\r\n      }\r\n      \r\n      // 使用compressToJpg函数处理图片\r\n      try {\r\n        // 显示处理进度提示\r\n        showUploadProgress.value = true;\r\n        uploadStatus.value = '正在处理图片...';\r\n        uploadPercentage.value = 0;\r\n        \r\n        // 导入图片处理函数\r\n        const { compressToJpg } = await import('../utils/imageUtils');\r\n        \r\n        // 处理图片，转换为JPG并压缩\r\n        const processedFile = await compressToJpg(file, (progress) => {\r\n          uploadPercentage.value = progress;\r\n        });\r\n        \r\n        // 处理完成\r\n        uploadStatus.value = '图片处理完成';\r\n        uploadPercentage.value = 100;\r\n        \r\n        // 延迟关闭进度条\r\n        setTimeout(() => {\r\n          showUploadProgress.value = false;\r\n        }, 500);\r\n        \r\n        return processedFile;\r\n      } catch (error) {\r\n        console.error('图片处理失败:', error);\r\n        ElMessage.warning('图片处理失败，将使用原始图片');\r\n        showUploadProgress.value = false;\r\n        return file;\r\n      }\r\n    };\r\n\r\n    // 处理收集前照片变更\r\n    const handlePhotoBeforeChange = (file, fileList) => {\r\n      // 更新文件列表\r\n      console.log('收集前照片变更:', file);\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 检查是否是新上传的文件批次\r\n      const newFiles = fileList.filter(f => f.raw && !photoFilesBefore.value.some(pf => pf.name === f.raw.name));\r\n      \r\n      // 将新文件添加到photoFilesBefore\r\n      newFiles.forEach(newFile => {\r\n        if (newFile.raw) {\r\n          photoFilesBefore.value.push(newFile.raw);\r\n        }\r\n      });\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const allFiles = [...photoFilesBefore.value, ...photoFilesAfter.value];\r\n      showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n      \r\n      console.log('更新后的photoFilesBefore:', photoFilesBefore.value);\r\n    };\r\n\r\n    // 处理收集前照片移除\r\n    const handlePhotoBeforeRemove = (file, fileList) => {\r\n      console.log('收集前照片移除:', file);\r\n      fileListBefore.value = fileList;\r\n      \r\n      // 从photoFilesBefore中移除被删除的文件\r\n      if (file.raw) {\r\n        photoFilesBefore.value = photoFilesBefore.value.filter(f => \r\n          f.name !== file.raw.name\r\n        );\r\n      } else {\r\n        // 如果没有raw属性，可能是已经处理过的文件，使用uid或name来匹配\r\n        photoFilesBefore.value = photoFilesBefore.value.filter(f => \r\n          f.uid !== file.uid && f.name !== file.name\r\n        );\r\n      }\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...photoFilesBefore.value, ...photoFilesAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      console.log('更新后的photoFilesBefore:', photoFilesBefore.value);\r\n    };\r\n\r\n    // 处理收集后照片变更\r\n    const handlePhotoAfterChange = (file, fileList) => {\r\n      // 更新文件列表\r\n      console.log('收集后照片变更:', file);\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 检查是否是新上传的文件批次\r\n      const newFiles = fileList.filter(f => f.raw && !photoFilesAfter.value.some(pf => pf.name === f.raw.name));\r\n      \r\n      // 将新文件添加到photoFilesAfter\r\n      newFiles.forEach(newFile => {\r\n        if (newFile.raw) {\r\n          photoFilesAfter.value.push(newFile.raw);\r\n        }\r\n      });\r\n      \r\n      // 检查是否有大文件需要显示警告\r\n      const allFiles = [...photoFilesBefore.value, ...photoFilesAfter.value];\r\n      showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n      \r\n      console.log('更新后的photoFilesAfter:', photoFilesAfter.value);\r\n    };\r\n\r\n    // 处理收集后照片移除\r\n    const handlePhotoAfterRemove = (file, fileList) => {\r\n      console.log('收集后照片移除:', file);\r\n      fileListAfter.value = fileList;\r\n      \r\n      // 从photoFilesAfter中移除被删除的文件\r\n      if (file.raw) {\r\n        photoFilesAfter.value = photoFilesAfter.value.filter(f => \r\n          f.name !== file.raw.name\r\n        );\r\n      } else {\r\n        // 如果没有raw属性，可能是已经处理过的文件，使用uid或name来匹配\r\n        photoFilesAfter.value = photoFilesAfter.value.filter(f => \r\n          f.uid !== file.uid && f.name !== file.name\r\n        );\r\n      }\r\n      \r\n      // 如果没有大文件了，隐藏警告\r\n      if (!checkForLargeFiles([...photoFilesBefore.value, ...photoFilesAfter.value])) {\r\n        showLargeFileWarning.value = false;\r\n      }\r\n      \r\n      console.log('更新后的photoFilesAfter:', photoFilesAfter.value);\r\n    };\r\n\r\n    // 检查是否有大文件\r\n    const checkForLargeFiles = (files) => {\r\n      const largeFileThreshold = 5 * 1024 * 1024; // 5MB\r\n      return files.some(file => file.size > largeFileThreshold);\r\n    };\r\n\r\n    // 处理上传进度\r\n    const handleUploadProgress = (progressEvent) => {\r\n      if (progressEvent.total) {\r\n        const percentage = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n        uploadPercentage.value = percentage;\r\n        \r\n        if (percentage < 33) {\r\n          uploadStatus.value = '正在上传文件...';\r\n        } else if (percentage < 66) {\r\n          uploadStatus.value = '正在处理文件...';\r\n        } else if (percentage < 100) {\r\n          uploadStatus.value = '即将完成...';\r\n        } else {\r\n          uploadStatus.value = '上传完成，正在保存...';\r\n        }\r\n      }\r\n    };\r\n\r\n    // 格式化百分比显示\r\n    const percentageFormat = (percentage) => {\r\n      return percentage === 100 ? '完成' : `${percentage}%`;\r\n    };\r\n\r\n    const submitForm = () => {\r\n      wasteForm.value.validate(async (valid) => {\r\n        if (valid) {\r\n          loading.value = true;\r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('unitId', props.id);\r\n            formData.append('wasteTypeId', form.wasteTypeId);\r\n            formData.append('location', form.location);\r\n            \r\n            // 组合日期和时间，如果有的话\r\n            if (form.collectionDate && form.collectionTime) {\r\n              formData.append('collectionDate', form.collectionDate);\r\n              formData.append('collectionTime', form.collectionTime);\r\n            }\r\n            formData.append('quantity', form.quantity);\r\n            \r\n            // 添加创建者ID（如果用户已登录）\r\n            if (auth.state.isLoggedIn && auth.state.user) {\r\n              formData.append('creator_id', auth.state.user.id);\r\n              // 添加创建者名称，优先使用username，如果没有则使用phone\r\n              const creatorName = auth.state.user.username || auth.state.user.phone || '未知';\r\n              formData.append('creator_name', creatorName);\r\n              console.log('添加用户信息:', {\r\n                creator_id: auth.state.user.id,\r\n                creator_name: creatorName,\r\n                user: auth.state.user\r\n              });\r\n            } else {\r\n              console.log('用户未登录或用户信息不完整');\r\n            }\r\n            \r\n            console.log('提交表单数据:', {\r\n              unitId: props.id,\r\n              wasteTypeId: form.wasteTypeId,\r\n              location: form.location,\r\n              quantity: form.quantity,\r\n              photo_before: photoFilesBefore.value ? photoFilesBefore.value.length : 0,\r\n              photo_after: photoFilesAfter.value ? photoFilesAfter.value.length : 0\r\n            });\r\n            \r\n            // 添加收集前照片\r\n            if (photoFilesBefore.value && photoFilesBefore.value.length > 0) {\r\n              console.log('添加收集前照片数量:', photoFilesBefore.value.length);\r\n              photoFilesBefore.value.forEach((file, index) => {\r\n                if (file) {\r\n                  console.log(`收集前照片 ${index+1}:`, file.name);\r\n                  formData.append('photo_before', file);\r\n                }\r\n              });\r\n            }\r\n            \r\n            // 添加收集后照片\r\n            if (photoFilesAfter.value && photoFilesAfter.value.length > 0) {\r\n              console.log('添加收集后照片数量:', photoFilesAfter.value.length);\r\n              photoFilesAfter.value.forEach((file, index) => {\r\n                if (file) {\r\n                  console.log(`收集后照片 ${index+1}:`, file.name);\r\n                  formData.append('photo_after', file);\r\n                }\r\n              });\r\n            }\r\n\r\n            // 检查是否有大文件需要显示警告\r\n            const allFiles = [...(photoFilesBefore.value || []), ...(photoFilesAfter.value || [])];\r\n            showLargeFileWarning.value = checkForLargeFiles(allFiles);\r\n            \r\n            // 如果有文件要上传，显示进度条\r\n            if (allFiles.length > 0) {\r\n              showUploadProgress.value = true;\r\n              uploadPercentage.value = 0;\r\n              uploadStatus.value = '准备上传...';\r\n            }\r\n\r\n            const response = await httpService.postForm(\r\n              apiConfig.endpoints.wasteRecords, \r\n              formData,\r\n              handleUploadProgress\r\n            );\r\n            \r\n            console.log('提交响应:', response.data);\r\n\r\n            ElMessage.success('废物记录提交成功');\r\n            resetForm();\r\n          } catch (error) {\r\n            console.error('Error submitting form:', error);\r\n            if (error.response) {\r\n              console.error('错误响应数据:', error.response.data);\r\n              console.error('错误状态码:', error.response.status);\r\n            }\r\n            ElMessage.error('提交失败，请稍后再试');\r\n          } finally {\r\n            loading.value = false;\r\n            showUploadProgress.value = false;\r\n          }\r\n        } else {\r\n          ElMessage.warning('请完成必填项');\r\n        }\r\n      });\r\n    };\r\n\r\n    const resetForm = () => {\r\n      if (wasteForm.value) {\r\n        wasteForm.value.resetFields();\r\n      }\r\n      photoFilesBefore.value = [];\r\n      photoFilesAfter.value = [];\r\n      fileListBefore.value = [];\r\n      fileListAfter.value = [];\r\n      form.quantity = undefined;\r\n      form.collectionDate = new Date().toISOString().slice(0, 10); // 重置为今天\r\n      form.collectionTime = '08:00'; // 重置为默认时间\r\n    };\r\n\r\n    const goBack = () => {\r\n      // 只有超级管理员才能返回到单位选择页面\r\n      if (isAdmin.value) {\r\n        router.push('/');\r\n      }\r\n    };\r\n\r\n    const viewRecords = () => {\r\n      router.push({ name: 'RecordsList', params: { unitId: props.id } });\r\n    };\r\n\r\n    const selectAllText = (event) => {\r\n      // 使用setTimeout确保DOM已完全渲染\r\n      setTimeout(() => {\r\n        if (event && event.target) {\r\n          // 找到el-input-number内部的input元素\r\n          const inputEl = event.target.querySelector('input');\r\n          if (inputEl) {\r\n            inputEl.select();\r\n          }\r\n        }\r\n      }, 10);\r\n    };\r\n\r\n    return {\r\n      form,\r\n      rules,\r\n      wasteForm,\r\n      loading,\r\n      unitName,\r\n      wasteTypes,\r\n      isAdmin,\r\n      fileListBefore,\r\n      fileListAfter,\r\n      handlePhotoBeforeChange,\r\n      handlePhotoBeforeRemove,\r\n      handlePhotoAfterChange,\r\n      handlePhotoAfterRemove,\r\n      handleBeforeUpload,\r\n      submitForm,\r\n      resetForm,\r\n      goBack,\r\n      viewRecords,\r\n      selectAllText,\r\n      showUploadProgress,\r\n      uploadPercentage,\r\n      uploadStatus,\r\n      percentageFormat,\r\n      showLargeFileWarning\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.waste-form-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.header {\r\n  background-color: #409EFF;\r\n  color: white;\r\n  padding: 12px 16px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 10;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.header h1 {\r\n  font-size: 18px;\r\n  margin: 0;\r\n  font-weight: 500;\r\n}\r\n\r\n.back-button, .view-records {\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 5px;\r\n  font-size: 14px;\r\n  white-space: nowrap;\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 16px;\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.unit-info {\r\n  text-align: center;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.unit-info h2 {\r\n  color: #333;\r\n  border-bottom: 2px solid #409EFF;\r\n  display: inline-block;\r\n  padding-bottom: 5px;\r\n  font-size: 18px;\r\n  margin: 0;\r\n}\r\n\r\n.waste-form {\r\n  background-color: #ffffff;\r\n  padding: 16px;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.form-row {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .form-row {\r\n    flex-direction: row;\r\n  }\r\n  \r\n  .date-item, .time-item {\r\n    flex: 1;\r\n  }\r\n  \r\n  .content {\r\n    padding: 24px;\r\n    max-width: 800px;\r\n  }\r\n  \r\n  .header h1 {\r\n    font-size: 22px;\r\n  }\r\n}\r\n\r\n.waste-photo-uploader {\r\n  width: 100%;\r\n}\r\n\r\n.waste-photo-uploader :deep(.el-upload--picture-card) {\r\n  width: 80px;\r\n  height: 80px;\r\n  line-height: 80px;\r\n}\r\n\r\n.waste-photo-uploader :deep(.el-upload-list--picture-card .el-upload-list__item) {\r\n  width: 80px;\r\n  height: 80px;\r\n}\r\n\r\n.photo-tip, .time-tip {\r\n  font-size: 12px;\r\n  color: #666;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 12px;\r\n  margin-top: 24px;\r\n}\r\n\r\n.submit-btn, .reset-btn {\r\n  width: 45%;\r\n  height: 44px;\r\n  font-size: 16px;\r\n  border-radius: 8px;\r\n}\r\n\r\n@media (min-width: 768px) {\r\n  .form-actions {\r\n    justify-content: flex-start;\r\n  }\r\n  \r\n  .submit-btn, .reset-btn {\r\n    width: auto;\r\n  }\r\n}\r\n\r\n.footer {\r\n  background-color: #f5f5f5;\r\n  padding: 12px;\r\n  text-align: center;\r\n  color: #666;\r\n  font-size: 12px;\r\n}\r\n\r\n:deep(.el-form-item__label) {\r\n  font-size: 15px;\r\n  font-weight: 500;\r\n  color: #333;\r\n  padding-bottom: 4px;\r\n}\r\n\r\n:deep(.el-input__inner), \r\n:deep(.el-select__input), \r\n:deep(.el-input-number__decrease), \r\n:deep(.el-input-number__increase) {\r\n  height: 44px;\r\n  font-size: 15px;\r\n}\r\n\r\n:deep(.el-button) {\r\n  font-size: 15px;\r\n  padding: 12px 20px;\r\n}\r\n\r\n:deep(.el-select-dropdown__item) {\r\n  font-size: 15px;\r\n  padding: 12px 20px;\r\n}\r\n\r\n:deep(.el-date-editor.el-input), \r\n:deep(.el-date-editor.el-input__inner) {\r\n  width: 100%;\r\n}\r\n\r\n:deep(.el-form-item) {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n:deep(.date-picker-popup),\r\n:deep(.time-picker-popup) {\r\n  touch-action: none;\r\n}\r\n\r\n:deep(.el-input__wrapper) {\r\n  cursor: pointer;\r\n}\r\n\r\n:deep(.el-input__inner) {\r\n  -webkit-tap-highlight-color: transparent;\r\n  user-select: none;\r\n}\r\n\r\n.upload-warning {\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.upload-progress {\r\n  text-align: center;\r\n  padding: 10px;\r\n}\r\n\r\n.upload-status {\r\n  margin-top: 10px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}